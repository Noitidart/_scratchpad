DISQUS.define("next.lounge.common",function(){"use strict";var a,b=function(b){a=b},c=function(){return a},d=Backbone.View.extend({updateDom:function(a,b){var d=c();d&&d.initialized?d.updateDom(a,b):_.isFunction(a)&&a.call(b)},resize:function(){var a=c();a&&a.initialized&&a.resize()}}),e=d.extend({initialize:function(a){this.session=a.session,this.showZero=a.showZero||!1,this.max=a.max},render:function(){var a=this.session.get("notificationCount")||0;return this.max&&(a=Math.min(a,this.max)),this.$el.html("<span>"+a+"</span>"),a>0||this.showZero?this.$el.show():this.$el.hide(),this}});return{setLounge:b,getLounge:c,LoungeSubView:d,NotificationCountView:e}}),$(document).ready(function(){"use strict";function a(){$(".dropdown").removeClass("open")}$("html").on("click",a),$("body").delegate("[data-toggle]","click",function(b){b.stopPropagation(),b.preventDefault();var c=$(b.currentTarget),d=c.closest("."+c.attr("data-toggle")),e="disabled"!==d.attr("data-dropdown")&&!d.hasClass("open");d.attr("data-dropdown","enabled"),a(),e&&d.addClass("open")}),DISQUS.Bus.on("window.click",a)}),DISQUS.define("next.lounge.mixins",function(){"use strict";var a=DISQUS.use("next.lounge.common"),b=DISQUS.use("next.utils"),c=b.preventDefaultHandler,d={_getShortUrl:function(a){var b=this,c=this._shareUrl(),d=c,e=_.extend({url:c,source:"disqus_embed_next"},this.model.relatedIds());DISQUS.api.call("shortener/create.json",{method:"POST",data:e,timeout:1e3*5,success:function(a){var b=a.code,c=a.response;0===b&&(d=c.url)},complete:function(){a.call(b,d)}})},_shareWaitPopup:function(a){return window.open(DISQUS.urls.loading,"_blank",a||"width=550,height=520")},share:function(a){this.sharers[a].call(this)},sharers:{twitter:function(){var a="https://twitter.com/intent/tweet",b=this._shareWaitPopup();this._getShortUrl(function(c){b.location=DISQUS.serialize(a,{url:c,text:this.model.twitterText(c)})})},facebook:function(){var a="https://www.facebook.com/sharer.php",b=this._shareWaitPopup("width=655,height=352");this._getShortUrl(function(c){b.location=DISQUS.serialize(a,{u:c})})}}},e=a.LoungeSubView.extend({className:"alert",events:{"click [data-action=dismiss]":"dismiss"},initialize:function(a){_.extend(this,a)},render:function(){var a=this,b=a.$el;return b.html(DISQUS.renderBlock("alert",{message:a.message,safe:a.safe})),b.attr("class",a.className),a.type&&b.addClass(a.type),a},dismiss:function(a){a&&a.preventDefault&&a.preventDefault(),this.remove(),this.trigger("dismiss")}}),f={alert:function(a,b){b?_.isString(b)&&(b={type:b}):b={},this.dismissAlert();var c=this._alert=new e(_.extend({message:a},b));return this.updateDom(function(){c.render(),this._alertSelector?this.$el.find(this._alertSelector).prepend(c.el):this.el.parentNode.insertBefore(c.el,this.el)},this),c},dismissAlert:function(){this._alert&&this._alert.dismiss()},setAlertSelector:function(a){this._alertSelector=a}},g={toggleFollow:c(function(b){var c=b&&$(b.target).closest("a[data-user]").attr("data-user"),d=this.collection&&c?this.collection.get(c):this.user,e=a.getLounge(),f=e.session;return f.isRegistered()?(d.get("isFollowing")?this.unfollow(d):this.follow(d),void 0):(this.trigger("authenticating"),this.listenToOnce(f,"identify",function(){this.follow(d)}),void e.authenticate("disqusDotcom"))}),unfollow:function(b){b.unfollow(),a.getLounge().trigger("uiAction:unfollowUser",b)},follow:function(b){b.follow(),a.getLounge().trigger("uiAction:followUser",b)}},h=function(){function a(){return this.collapseTarget&&this.collapseTarget.length||(this.collapseTarget=this.collapseTargetSelector?this[this.collapseScope].find(this.collapseTargetSelector):this[this.collapseScope]),this.collapseTarget}function b(){var b=this;if(b.isCollapseAllowed){var c=a.call(b);c&&c.length&&b.updateDom(function(){c.height(b.collapsedHeight),e.call(b)})}}function c(a){var b=this;if(b.collapseTarget&&b.collapseTarget.length){var c=b.collapseTarget;b.updateDom(function(){c.css("height","auto"),c.css("maxHeight","none"),f.call(b)}),a||(b.isCollapseAllowed=!1)}}function d(){return this.seeMoreButton&&this.seeMoreButton.length||(this.seeMoreButton=a.call(this).siblings("[data-action=see-more]")),this.seeMoreButton}function e(){var a=this;d.call(this).removeClass("hidden").on("click",function(){a.expand()})}function f(){d.call(this).addClass("hidden").off("click")}return function(a){var d=this;d.isCollapseAllowed=!0,d.collapsedHeight=a.collapsedHeight,d.collapseTargetSelector=a.collapseTargetSelector,d.collapseScope=a.collapseScope||"$el",d.collapse=b,d.expand=c}}();return{ShareMixin:d,AlertView:e,AlertMixin:f,FollowButtonMixin:g,asCollapsible:h}}),DISQUS.define("next.realtime",function(a){"use strict";function b(){i.apply(this,arguments),this.reqCounter=0,this.marker=0,this.interval=1,this._boundOnError=_.bind(this.onError,this),this._boundOnLoad=_.bind(this.onLoad,this),this._boundOnProgress=_.bind(this.onProgress,this)}function c(){i.apply(this,arguments),this.handshakeSuccess=null,this.interval=1,this._boundOnOpen=_.bind(this.onOpen,this),this._boundError=_.bind(this.onError,this),this._boundClose=_.bind(this.onClose,this),this._boundMessage=_.compose(_.bind(this.onMessage,this),function(a){return JSON.parse(a.data)})}var d=DISQUS.use("next.utils"),e=2,f=120,g=function(){},h=function(){throw new Error("Pipe class cannot be used directly.")},i=function(a,b){this.channel=a,this.since=b,this.connection=null,this.paused=!1,this._msgBuffer=[],this._boundOpen=_.bind(this.open,this)};_.extend(i.prototype,Backbone.Events,{getUrl:function(a){var b={};return this.since&&(b.since=this.since),_.extend(b,a),DISQUS.serialize(this.baseUrl+this.channel,b)},onMessage:function(a){var b=a.message_type,c=a.firehose_id;this.lastEventId=c,DISQUS.log("RT: new message:",b,c);var d={type:b,data:a.message_body,lastEventId:c};this.trigger(b,d)},_msgToBuffer:function(){this._msgBuffer.push(_.toArray(arguments))},pause:function(a){this.paused||(this.paused=!0,this._trigger=this.trigger,this.trigger=a===!1?g:this._msgToBuffer,DISQUS.log("RT: paused, buffered: %s",a!==!1))},resume:function(){if(this.paused){this.paused=!1,this.trigger=this._trigger,DISQUS.log("RT: resumed, buffered messages: %s",this._msgBuffer.length);for(var a;a=this._msgBuffer.shift();)this.trigger.apply(this,a)}},open:h,close:function(){var a=this.connection;return a?(this.connection=null,a):!1}}),_.extend(b.prototype,i.prototype,{baseUrl:DISQUS.urls.realertime+"/api/2/",onError:function(){this.connection&&(this.connection=null,this.trigger("error",this),this.interval<=f&&(this.interval*=e),d.sendStat("rt_streampipe_error"),DISQUS.logError("RT: Connection error, backing off %s secs",this.interval),_.delay(this._boundOpen,1e3*this.interval))},onLoad:function(){this.connection&&(this.connection=null,this.since=null,this.trigger("success",this),d.sendStat("rt_streampipe_close"),_.defer(this._boundOpen))},onProgress:function(){if(this.connection){var a,b=this.connection.responseText,c=0;if(b&&!(this.marker>=b.length)){a=b.slice(this.marker).split("\n");for(var d,e,f,g=a.length,h=0;g>h;h++)if(d=a[h],c+=d.length+1,e=d.replace(/^\s+|\s+$/g,"")){try{f=JSON.parse(e)}catch(i){if(h===g-1){c-=d.length+1;break}DISQUS.log("RT: unable to parse: ",e,d);continue}this.onMessage(f)}else DISQUS.log("RT: ignoring empty row...");c>0&&(this.marker+=c-1)}}},open:function(){this.close();var a=this.connection=d.CORS.request("GET",this.getUrl({bust:++this.reqCounter}),this._boundOnLoad,this._boundOnError);if(!a)return d.sendStat("rt_streampipe_cors_unavail"),void DISQUS.log("RT: Cannot use any cross-domain request"+" tool with StreamPipe. Bailing out.");a.onprogress=this._boundOnProgress,this.connection=a,this.marker=0;try{a.send()}catch(b){this.connection=null,d.sendStat("rt_streampipe_cors_fail"),DISQUS.log("RT: Attempt to send a CORS request failed.")}},close:function(){var a=i.prototype.close.apply(this);return a&&a.abort()}}),_.extend(c.prototype,i.prototype,{baseUrl:("https:"===a.location.protocol?"wss:":"ws:")+DISQUS.urls.realertime+"/ws/2/",onOpen:function(){DISQUS.log("RT: [Socket] Connection established."),this.handshakeSuccess=!0,this.since=null},onError:function(){if(this.connection){if(this.connection=null,!this.handshakeSuccess)return DISQUS.log("RT: [Socket] Error before open, bailing out."),d.sendStat("rt_socketpipe_fail"),this.trigger("fail"),void 0;this.trigger("error"),this.interval<=f&&(this.interval*=e),d.sendStat("rt_socketpipe_error"),DISQUS.logError("RT: Connection error, backing off %s secs",this.interval),_.delay(this._boundOpen,1e3*this.interval)}},onClose:function(a){if(this.connection){if(!a.wasClean)return d.sendStat("rt_socketpipe_unclean_close"),this.onError(),void 0;this.connection=null,d.sendStat("rt_socketpipe_clean_close"),DISQUS.log("RT: [Socket] Connection closed. Restarting..."),this.trigger("close"),this.open()}},open:function(){this.close();var b=this.connection=new a.WebSocket(this.getUrl());b.onopen=this._boundOnOpen,b.onerror=this._boundError,b.onmessage=this._boundMessage,b.onclose=this._boundClose},close:function(){var a=i.prototype.close.apply(this);return a&&a.close()}});var j={_wsSupported:a.WebSocket&&2===WebSocket.CLOSING,initialize:function(a,d,e,f){this.close(),this._initArgs=[a,d,e,f];var g=this._wsSupported,h=g?c:b,i=this.pipe=new h(a,d);_.chain(e).pairs().each(function(a){i.on(a[0],a[1],f)}),g&&i.on("fail",function(){this._wsSupported=!1,i.off(),this.initialize.apply(this,this._initArgs)},this),i.open()},pause:function(a){this.pipe&&this.pipe.pause(a)},resume:function(){this.pipe&&this.pipe.resume()},close:function(){this.pipe&&(this.pipe.close(),this.pipe=null)}};return $(a).on("unload",_.bind(j.close,j)),{Pipe:i,StreamPipe:b,SocketPipe:c,Manager:j}}),DISQUS.define("next.lounge.tracking",function(a){"use strict";function b(a,b){var e=DISQUS.use("next.intelligence"),f=DISQUS.juggler.client("juggler",!0),g=new e.Intelligence,h=DISQUS.use("next.jester"),i=b.initialData,j=b.switches;_.isObject(i)&&!_.isEmpty(i)&&(b.session.once("identify",function(){var c=this,d=c.user.id;if(d&&(f.overwrite({user_id:d}),j.enabled("dark_jester")&&DISQUS.juggler.client("jester",!0).overwrite({user_id:d})),j.enabled("juggler_thread_onReady")){var e={thread_slug:i.thread.slug,user_type:c.user.get("user_type")||"anon",referrer:a.document.referrer,theme:"next"},h=i.forum.settings;h&&_.has(h,"organicDiscoveryEnabled")&&_.extend(e,{organic_enabled:h.organicDiscoveryEnabled,promoted_enabled:h.promotedDiscoveryEnabled,max_enabled:h.discoveryMax,thumbnails_enabled:h.discoveryThumbnailsEnabled}),f.emit("init_embed",e),j.enabled("dark_jester")&&DISQUS.juggler.client("jester",!0).emit("init_embed",e),g.init({version:"next",forum:i.forum.id,features:i.features,session:c.user}),b.session.on("change:id",function(a){g.setSession(a),g.trackEvent(a.id?"login":"logout")})}}),f.load({disable:!j.enabled("juggler_enabled"),url:DISQUS.urls.juggler+"/event.js",disableSSL:j.enabled("next_disable_ssl_juggler"),thread:i.thread.id,forum:i.forum.id,forum_id:i.forum.pk}),j.enabled("dark_jester")&&DISQUS.juggler.client("jester",!0).load(_.extend(f.copySettings(),{url:DISQUS.urls.jester})),b.on({inViewport:function(){g.trackEvent("view_embed"),h.client.emit({verb:"view",object_type:"application",object_id:"embed",zone:d[b.currentSection]}),b.off("inViewport")},"uiAction:createPost":function(a){b.session.user.id||g.setSession("guest"),null!=a.get("parent")?g.trackEvent("post_comment_reply"):g.trackEvent("post_comment")},"uiCallback:postCreated":function(a){var c={object_type:"comment",object_id:a.id,verb:"post",zone:d[b.currentSection]};a.has("parent")&&(c.target_type="comment",c.target_id=a.get("parent")),h.client.emit(c)},"uiAction:seeMore":function(){h.client.emit({verb:"open",object_type:"section",object_id:"next-page",zone:d[b.currentSection]})},"uiAction:postUpvote":function(a){g.trackEvent("like_comment"),h.client.emit({verb:"like",object_type:"comment",object_id:a.id,zone:d[b.currentSection]})},"uiAction:postUnvote":function(a){h.client.emit({verb:"unlike",object_type:"comment",object_id:a.id,zone:d[b.currentSection]})},"uiAction:postDownvote":function(a){g.trackEvent("dislike_comment"),h.client.emit({verb:"dislike",object_type:"comment",object_id:a.id,zone:d[b.currentSection]})},"uiAction:upvotersCardShow":function(){g.trackEvent("upvoters_card_shown")},"uiAction:showProfileFromUpvotes":function(){g.trackEvent("upvoters_profile_click")},"uiAction:threadUnlike":function(){h.client.emit({verb:"unlike",object_type:"thread",zone:d[b.currentSection]})},"uiAction:threadLike":function(){g.trackEvent("like_thread"),h.client.emit({verb:"like",object_type:"thread",zone:d[b.currentSection]})},"uiAction:postShare":function(a,c){g.trackEvent("share_comment_"+c),h.client.emit({verb:"share",object_type:"comment",object_id:a.id,target_type:"service",target_id:c,zone:d[b.currentSection]})},"uiAction:threadShare":function(a){g.trackEvent("share_thread_"+a),h.client.emit({verb:"share",object_type:"thread",target_type:"service",target_id:a,zone:d[b.currentSection]})},"uiAction:navigate":function(a){c[a]&&g.trackEvent("open_"+c[a]),d[a]&&h.client.emit({verb:"open",object_type:"zone",object_id:d[a],zone:d[b.currentSection]})},"uiAction:followUser":function(a){g.trackEvent("follow_user"),h.client.emit({verb:"follow",object_type:"user",object_id:a.id,zone:d[b.currentSection]})},"uiAction:unfollowUser":function(a){h.client.emit({verb:"stop-following",object_type:"user",object_id:a.id,zone:d[b.currentSection]})},"uiAction:openLogin":function(a){g.trackEvent("open_login_"+a),h.client.emit({verb:"open",object_type:"login",object_id:a,zone:d[b.currentSection]})},"uiAction:finishRegistrationEmbed":function(){g.trackEvent("finish_registration_embed")},"uiAction:finishRegistrationWindow":function(){g.trackEvent("finish_registration_window")},"uiAction:finishAccountComplete":function(){g.trackEvent("finish_account_complete")},"uiAction:onboardAlertShow":function(){h.client.emit({section:"onboard_alert",verb:"view",object_type:"alert",zone:d[b.currentSection]})},"uiAction:onboardOpen":function(){h.client.emit({section:"onboard_alert",verb:"open",object_type:"zone",object_id:"embed.onboard",zone:d[b.currentSection]})},"uiAction:onboardAlertDismiss":function(){h.client.emit({section:"onboard_alert",verb:"close",object_type:"alert",zone:d[b.currentSection]})}}))}var c={community:"community",dashboard:"mydisqus",network:"mydisqus_network"},d={community:"community",conversation:"thread",dashboard:"my-notifications",network:"my-activity-feed"};return{init:function(c){b(a,c)}}}),DISQUS.define("next.lounge.views",function(){"use strict";function a(a){var b=a&&a.match(/discovery\-([\w\-]+)/);return b&&b[1]}var b=DISQUS.use("next"),c=DISQUS.use("next.lounge.common"),d=DISQUS.use("next.models"),e=DISQUS.use("next.collections"),f=DISQUS.use("next.utils"),g=DISQUS.use("next.realtime"),h=DISQUS.use("Bus"),i=DISQUS.strings.get,j=DISQUS.use("urls"),k=DISQUS.use("next.lounge.views.posts"),l=DISQUS.use("next.lounge.views.dashboard"),m=DISQUS.use("next.lounge.views.community"),n=DISQUS.use("next.lounge.views.media"),o=DISQUS.use("next.lounge.mixins"),p=DISQUS.use("next.lounge.views.onboard"),q=DISQUS.use("next.lounge.views.posts.collection"),r=c.LoungeSubView,s=f.preventDefaultHandler,t=DISQUS.use("next.jester"),u=Backbone.View.extend({events:{"click [data-action^=auth\\:]":"handleAuth","click [data-action=verify-email]":"verifyEmail","click [data-action=audiencesync]":"audienceSync","click [data-action=profile]":"handleShowProfile","click [data-action=onboard]":"handleShowOnboarding","click [data-action=sort]":"handleSort","click [data-action=close-thread]":"closeThread","click [data-action=open-thread]":"openThread","click [data-action=debug]":"renderDebugInfo","click [data-action=repair]":"repairThread","click [data-action=toggle-media]":"toggleMedia","click a":_.wrap(f.logLinkClick,function(a,b){var c=!this.isLinkAffiliatorEnabled()||!$(b.currentTarget).is("[rel=nofollow]");return a(b,c)})},MEDIA_PERSISTED_WIDTHS:[320,480,600,800],MAX_MEDIA_HEIGHT:480,initialize:function(a){c.setLounge(this),a=a||{};var b=a.jsonData||{};this.initialData=b.response||{},this.profileWindowName=_.globalUniqueId("disqus_"),f.extract(b,"response.forum.id")&&(DISQUS.urls.moderate=f.updateURL(DISQUS.urls.moderate,{hostname:b.response.forum.id+"."})),d.Session.setDefaults(this.initialData.session),this.session=d.Session.get(),this.bindSessionEvents(),this.forum=new d.Forum,this.forum.set(this.initialData.forum),this.thread=new d.Thread(this.initialData.thread,{forum:this.forum,postCursor:b.cursor,moderators:(this.initialData.thread||{}).moderators,order:b.order}),this.postsView=new q.PostCollectionView({posts:this.thread.posts,thread:this.thread,lounge:this,session:this.session,el:this.el}),this.switches=new e.SwitchCollection(DISQUS.config.switches,{parse:!0}),this.states={realtimeIndicatorsCreated:!1,streamingPaused:!1,inViewport:!1,nearViewport:!1},this.forum.get("settings").backplaneEnabled&&this.enableBackplane();var g=_.bind(this.bootstrap,this);f.isIframed(window)?this.listenTo(h,"init",g):_.defer(g),this.setAlertSelector("#layout")},initOnboardAlert:function(){var a=this.onboardAlert=new p.OnboardAlert({session:this.session});this.proxyViewEvents(this.onboardAlert),this.listenTo(this.session,"change:id",function(){a.setInitialCookie(),a.render().$el.appendTo("#onboard")}),this.listenTo(h,{"onboard.complete":_.bind(a.remove,a),"onboardAlert.show":function(){a.render().$el.appendTo("#onboard")}}),this.listenToOnce(this,"uiCallback:postCreated",function(){a.shouldPopup()&&(a.setPopupCookie(),this.showOnboarding("complete-profile"))}),this.listenTo(h,"onboard.profileUpdated",this.updateSessionUser)},updateSessionUser:function(){this.updateUserFromSession()||this.session.user.fetch({reset:!0})},updateUserFromSession:function(){var a=this.session.user,b=Modernizr.sessionstorage&&sessionStorage.getItem("onboard.profileUpdated");if(!b)return!1;try{var c=JSON.parse(b);a.set(c)}catch(d){return!1}finally{sessionStorage.removeItem("onboard.profileUpdated")}return!0},enableBackplane:function(){this.backplaneCredentialsReady=!1,this.events["click [data-action=logout]"]=function(a){return this.backplaneCredentialsReady?(a.preventDefault(),h.sendHostMessage("backplane.invalidate",{redirectUrl:DISQUS.urls.logout}),void 0):!0},this.listenTo(this.session,"identify",function(){this.backplaneCredentialsReady&&!this.session.isRegistered()&&(h.sendHostMessage("backplane.invalidate"),this.backplaneCredentialsReady=!1,DISQUS.api.headers({Authorization:null}))}),this.listenTo(h,"login",function(a){null!==a.backplane&&(this.setBackplaneHeaders(a.backplane),this.fetchSession())}),h.sendHostMessage("loadBackplane")},setBackplaneHeaders:function(a){var b="Backplane "+JSON.stringify({provider:"janrain",message_id_url:a.messageUrl,channel_name:a.channel,forum_id:this.forum.id});this.backplaneCredentialsReady=!0,DISQUS.api.headers({Authorization:b})},bootstrap:function(b){var c=this,d={};c.config=b=b||f.getConfigFromHash(window),this.discoveryOverride=a(b.parentWindowHash),b.apiKey&&(d["X-Disqus-Publisher-API-Key"]=b.apiKey),b.remoteAuthS3&&(d["X-Disqus-Remote-Auth"]=b.remoteAuthS3),_.isEmpty(d)||DISQUS.api.headers(d),b.anchorColor&&!function(){var a=f.escapeColor(b.anchorColor);f.addStylesheetRules([[".publisher-anchor-color a",["color",a,!0]],["a.publisher-anchor-color",["color",a,!0]],[".publisher-anchor-hover a:hover",["color",a,!0]],["a.publisher-anchor-hover:hover",["color",a,!0]],[".active .publisher-nav-color:after",["background",a,!0]],[".media-preview .active.publisher-border-color",["border-color",a,!0]],[".publisher-color",["color",a,!1]],[".publisher-color:hover",["color",a,!1]],[".publisher-background-color",["background-color",a,!1]],[".publisher-border-color",["border-color",a,!1]]])}(),this.isMobile=f.isPhone(window),f.injectBaseElement(b.referrer),b.referrer&&(c.thread.currentUrl=b.referrer),b.width&&(document.body.style.width=b.width+"px");var e=this.getPermalinkOptions(b.parentWindowHash);e&&h.once("embed.rendered",_.bind(c.scrollToPost,c,e.postId,e.options)),b.sso&&(DISQUS.templateGlobals.sso=b.sso,c.session.set("sso",b.sso)),this.position=b.initialPosition?b.initialPosition:f.calculatePositionFullscreen(),c.updateModeratorText(),c.initUI(),c.bindBusListeners(),c.initHighlightedPost(),c.postsView.bootstrap(this.initialData,e),c.initSession(),c.listenTo(c.thread,"create",function(a){h.sendHostMessage("posts.create",a.toJSON())}),c.initialized=!0,t.client.set({product:"embed",thread:this.initialData.thread.id,forum:this.initialData.forum.id,forum_id:this.initialData.forum.pk}),this.initLinkAffiliator()},initUI:function(){this.applyPublisherClasses(),window.Handlebars.lounge.templates(),this.renderLayout(),this.currentSection="conversation",this.bindUIUpdateHandlers(),this.initDeferredViews(),this.postsView.once("rendered",function(){var a=f.getPageHeight();h.sendHostMessage("mainViewRendered",{height:a}),this._lastHeight=a,this.initRealtime()},this),_.defer(_.bind(this.initUIComponents,this))},initUIComponents:function(){this.findClosestThumbnailSize(),this.renderForm(),this.updatePostCount(),this.initCommunity(),this.initUserMenu(),this.initThreadVotes(),this.initThreadShareMenu(),this.initThreadSubscribe(),this.renderStreamingToggle(),this.initOnboardAlert(),this.bindProfileUIListeners(this.session)},initHighlightedPost:function(){var a=this,b=a.thread;if(b.has("highlightedPost")){var c=new d.UniqueModel(d.Post,b.get("highlightedPost"));if(!c.get("isDeleted")){var e=q.PostCollectionView.prototype.getPostViewClass(),f=new e({model:c,thread:b,session:this.session}).stopListening(c.usersTyping).listenTo(b,"change:highlightedPost",function(){a.updateDom(f.remove,f)}).render();f.$el.addClass("highlighted"),a.updateDom(function(){f.$el.appendTo("#highlighted-post")})}}},bindUIUpdateHandlers:function(){var a=this,b=a.thread,c=a.session;a.listenTo(b,{"change:likes":a.updateThreadVotes,"change:userScore":a.updateThreadUserScore,"change:posts":a.updatePostCount}),a.listenTo(b.queue,"add reset",a.toggleRealtimeNotifications),a.postsView.bindUIUpdateHandlers(),a.listenTo(c,"change:id",a.updateThreadSessionData),a.initNotificationMenu(),a.listenTo(c,"change:id",a.initDashboard),a.listenTo(a,"scrollOffViewport",function(){this.states.realtimeIndicatorsCreated&&"conversation"===this.currentSection&&h.sendHostMessage("indicator:hide")}),a.listenTo(a,"scroll",a.handleRealtimeScroll),a.listenTo(a,"scroll",function(a){this.position=a,"conversation"===this.currentSection&&(this.conversationPosition=a)}),a.listenTo(a.postsView,"rendered",a.toggleRealtimeNotifications)},initDeferredViews:function(){var a=this;a.deferredViews=[],a.unsortedDeferredViews=[],a.listenTo(a,"scroll",a.processDeferredViews),a.listenTo(a,"domReflow",function(){this.invalidateDeferredViewOffsets(),this.processDeferredViews()}),a.listenTo(h,"window.resize",a.processDeferredViews)},initSession:function(){!this.switches.enabled("next_lazy_embed")||this.states.inViewport?this.fetchSession():this.listenToOnce(this,"inViewport",this.fetchSession)},bindBusListeners:_.once(function(){this.listenTo(h,{"window.hashchange":function(b){if(this.discoveryOverride=a(b),this.discoveryOverride)return this.fetchSession();var c=this.getPermalinkOptions(b);c&&this.scrollToPost(c.postId,c.options)},"window.scroll":function(a){this.trigger("scroll",a)},"window.inViewport":function(){this.states.inViewport=!0,this.trigger("inViewport")},"window.nearViewport":function(){this.states.nearViewport=!0,this.trigger("nearViewport")},"window.scrollOffViewport":function(){this.states.inViewport=!1,this.states.nearViewport=!1,this.trigger("scrollOffViewport")},"window.resize":this.resize,"indicator:click":this.handleRealtimeClick,"!auth:success":function(a){a&&(a.sessionId&&DISQUS.api.headers({"X-Sessionid":a.sessionId}),a.message&&this.alert(a.message,{type:"info"}),a.logEvent&&this.trigger("uiAction:"+a.logEvent)),this.fetchSession()},"!audiencesync:grant":function(){this.session.set("audienceSyncVerified",!0)}})}),isLinkAffiliatorEnabled:function(){return this.switches.enabled("enable_link_affiliation")&&f.extract(this,"initialData.forum.settings.linkAffiliationEnabled")&&!this.isHttps()&&this.isPublisherIdValid()},isPublisherIdValid:function(){var a=f.extract(this,"initialData.forum.pk");return _.isNumber(a)},initLinkAffiliator:function(){if(this.isLinkAffiliatorEnabled()&&!this.initLinkAffiliatorCalled){this.initLinkAffiliatorCalled=!0;var a=f.extract(this,"initialData.forum.pk"),b=new E({el:document.body});h.once("affiliationOptions",function(a){a&&_.isNumber(a.timeout)&&b.trigger("options.timeout",a.timeout)}),h.sendHostMessage("loadLinkAffiliator",{clientUrl:DISQUS.urls.linkAffiliatorClient,apiUrl:DISQUS.urls.linkAffiliatorAPI,key:DISQUS.keys.viglinkAPI,id:a})}},bindSessionEvents:_.once(function(){this.listenTo(this.session,"change:isReadOnly",function(){this.session.get("isReadOnly")&&this.alert(i("The Disqus comment system is temporarily in maintenance mode. "+"You can still read comments during this time, however posting "+"comments and other actions are temporarily delayed."))}),this.listenTo(this.session,"identify change:audienceSyncVerified",function(){this.session.get("audienceSyncVerified")&&h.sendHostMessage("session.identify",this.session.user.id)}),this.listenTo(this.session,"change:discoveryVariant",this.initDiscovery)}),fetchSession:function(){var a={thread:this.thread};return this.switches.enabled("discovery_next:override")&&this.discoveryOverride&&(a.discovery=this.discoveryOverride),this.session.fetch(a)},initRealtimeIndicators:function(){if(!this.switches.enabled("disable_realtime_indicators")&&!this.states.realtimeIndicatorsCreated){var a={contents:DISQUS.renderBlock("realtimeIndicator",{orientation:"north"})},b={contents:DISQUS.renderBlock("realtimeIndicator",{orientation:"south"})};h.sendHostMessage("indicator:init",{north:a,south:b}),this.states.realtimeIndicatorsCreated=!0}},insertStreamingComments:_.throttle(function(){var a=this.thread.queue;a.drain(),_.each(a.counters.replies,function(b,c){a.drain(c)})},1e3),updateModeratorText:function(){var a=this.forum.get("settings");a.moderatorText&&(DISQUS.strings.translations.Mod=a.moderatorText)},handleRealtimeScroll:function(a){if(this.states.inViewport&&this.states.realtimeIndicatorsCreated&&"conversation"===this.currentSection){var b=_.union([this.queueView],_.values(this.postsView.subViews)),c=0,d=0;_.each(b,function(b){if(b&&!b.getDirection&&(b=b.queueView),b&&!(b.options.count<=0)){var e=b.getDirection(a);1===e?c+=b.options.count:e===-1&&(d+=b.options.count)}});var e,f;f={type:"north"},c>0?(e="indicator:show",f.content=DISQUS.renderBlock("realtimeIndicatorText",{num:c,orientation:"north"})):e="indicator:hide",h.sendHostMessage(e,f),f={type:"south"},d>0?(f.content=DISQUS.renderBlock("realtimeIndicatorText",{num:d,orientation:"south"}),e="indicator:show"):e="indicator:hide",h.sendHostMessage(e,f)}},handleRealtimeClick:function(a){var b=this;h.sendHostMessage("indicator:hide",{type:a});var d,e,f,g=_.union([b],_.toArray(b.postsView.subViews));g=_.filter(g,function(c){if(c=c.queueView,!c||c.options.count<=0)return!1;var d="north"===a?1:-1;return c.getDirection(b.position)!==d?!1:!0}),g=_.sortBy(g,function(a){return a===b?0:a.offset.top}),d="north"===a?_.last(g):_.first(g),e=d.queueView,d===b?(f=0,e.handleDrain()):(f=d.offset.top-100,e.handleDrain()),c.getLounge().once("domReflow",_.bind(h.sendHostMessage,h,"scrollTo",{top:f}))},toggleRealtimeNotifications:function(){var a=this,b=a.thread.queue;a.updateDom(function(){if(_.defer(function(){h.sendHostMessage("fakeScroll")}),!b.length)return void $("[data-role=realtime-notification]").hide();if(a.thread.get("hasStreaming"))return void a.insertStreamingComments();if(b.counters.comments){var c=a.queueView||new A({model:a.thread,el:a.$el.find("button[data-role=realtime-notification]")});a.queueView=c,c.setCount(b.counters.comments),c.render()}_.each(b.counters.replies,function(b,c){var d=a.thread.posts.get(c);if(d){var e=a.postsView.getPostView(d.cid);if(e){var f=e.queueView;f||(f=new B({thread:a.thread,postView:e,model:d,el:e.$el.find("[data-role=realtime-notification\\:"+c+"] a")}),e.queueView=f),f.setCount(b),f.render()}}})})},renderDebugInfo:s(function(){if(this.session.user.get("isGlobalAdmin")){for(var a=[],b=0,c=this.switches.models.length;c>b;b++)this.switches.models[b].attributes.enabled&&a.push(this.switches.models[b].id);var d=new C({Shortname:this.thread.get("forum"),"Thread ID":this.thread.get("id"),"Thread slug":this.thread.get("slug"),"Anchor color":f.escapeColor(this.config.anchorColor),Switches:a.join(", ")});d.render(),this.updateDom(function(){var a=document.body;a.insertBefore(d.el,a.firstChild)})}}),repairThread:s(function(){this.session.user.get("isGlobalAdmin")&&DISQUS.api.call("internal/threads/repair.json",{method:"GET",data:{thread:this.thread.get("id")},success:_.bind(this.alert,this,"Thread repair has been queued. Refresh in a few seconds."),error:_.bind(this.alert,this,"An error occurred while repairing thread. Please try again.","error")})}),getPermalinkOptions:function(a){var b=a&&a.match(/(comment|reply|edit)\-([0-9]+)/);if(b)return{postId:b[2],options:{highlight:!0,openReply:"reply"===b[1],openEdit:"edit"===b[1]}}},scrollToPost:function(a,b){b=b||{};var c=this;"conversation"!==c.currentSection&&(b.force=!0),c.mainNav.navTo("conversation");var e=c.$el.find("#post-"+a);return e.length?(b.highlight&&(c.$el.find(".post-content.target").removeClass("target"),e.find(".post-content").first().addClass("target")),b.openReply&&c.postsView.openReply(a),b.openEdit&&c.postsView.openEdit(a),h.sendHostMessage("scrollTo",{top:e.offset().top+(b.padding||0),force:b.force||null}),void 0):(DISQUS.api.call("posts/getContext.json",{method:"GET",data:{post:a},success:function(e){var f=_.filter(e.response,function(a){return a.thread===c.thread.get("id")});0!==f.length&&(_.each(f,function(a){a=new d.UniqueModel(d.Post,a),a.requestedByPermalink=!0,c.thread.posts.add(a)}),h.once("embed.resized",_.bind(c.scrollToPost,c,a,b)))}}),void 0)},updateThreadSessionData:function(a){if(a){a.get("thread")&&this.thread.set(a.get("thread"));var b=a.get("votes");b&&"object"==typeof b&&_.each(b,function(a,b){var c=this.postsView.posts.get(b);c&&c.set("userScore",a)},this)}},initDashboard:function(){var a=$("#main-nav [data-nav=dashboard]");return this.session.isAnonymous()?a.hide():(a.show(),this.notificationCount=new c.NotificationCountView({el:a.find("[data-role=notification-count]")[0],session:this.session,max:99}),this.notificationCount.render(),this.listenTo(this.session,"change:notificationCount",function(){this.session.get("notificationCount")<=0?this.notificationCount.remove():this.notificationCount.render()}),this.dashboard=new l.DashboardView({el:"#dashboard",session:this.session,notifications:this.notifications}),this.dashboard.render(),void 0)},initCommunity:function(){this.community=new m.CommunityView({el:document.getElementById("community"),forum:this.forum,session:this.session})},initNotificationMenu:function(){var a=this.notificationMenu=new DISQUS.next.lounge.views.NotificationMenuView({el:this.$el.find("[data-role=notification-menu]")[0],session:this.session});a.render(),this.listenTo(this.session,"change:id",_.bind(a.render,a)),this.listenTo(this.session,"change:notificationCount",_.bind(a.render,a))},initUserMenu:function(){var a=this.userMenu=new y({el:this.$el.find("[data-role=logout]")[0],session:this.session,thread:this.thread,referrerUrl:this.config.referrer});this.listenTo(this.thread,"change:isClosed",this.render),a.render()},initThreadShareMenu:function(){this.threadShareMenu=new v({el:$("#thread-share-menu")[0],model:this.thread})},initDiscovery:function(a,b){function c(){var c=DISQUS.discovery.init(_.extend({},b,{sourceThread:d.initialData.thread,sourceForum:d.initialData.forum,containerId:"discovery",session:a,sourceThreadUrl:d.thread.currentUrl||document.referrer,position:d.getPosition()}));
d.listenTo(c,"resize",d.updateDom)}var d=this;if(!d.states.initDiscoveryCalled)return d.states.initDiscoveryCalled=!0,b?(curl(["css!"+"//a.disquscdn.com/next/styles/discovery.0b8d201ef2b1977df44a5c3274d81a48.css","js!"+"//a.disquscdn.com/next/discovery.47597f0ec9669bb653c73211f7655d0f.js"]).then(function(){window.Handlebars.discovery.templates(),c()}),void 0):void DISQUS.log("Discovery seems not enabled. Check Gargoyle switches or forum settings.")},isHttps:function(){return"https:"===window.location.protocol},isRealtimeEnabled:function(){var a=moment.unix(this.initialData.lastModified);return!this.thread.get("isClosed")&&(this.switches.enabled("realtime_for_oldies")||moment().diff(a,"days")<=7)},realtimeHandlers:{Post:function(a){var b=a.data,c=this.thread;if(!this.thread.get("hasStreaming")||!this.states.streamingPaused){if(!b.id)return void DISQUS.logError("RT: no post ID");if(!b.author||!b.author.id)return void DISQUS.logError("RT: no author or author ID");if(!b.author.name)return void DISQUS.logError("RT: no author name or email hash");if(!b.post||!b.post.message)return void DISQUS.logError("RT: no post message");if(c.posts.get(b.id)||c.queue.get(b.id))return void DISQUS.log("RT: duplicate: ",b.id);if("approved"!==b.type)return void DISQUS.log("RT: unnaproved: ",b.id);if(b.type===b.type_prev)return void DISQUS.log("RT: Post change message, ignoring for now ",b.id);this.thread.incrementPostCount(1);var e=b.post.parent_post.id;if(e="0"!==e?e:null,e&&!c.posts.get(e)&&!c.queue.get(e))return void DISQUS.log("RT: parent is not on this page: ",b.id);var f=b.author.id,g=c.users.get(f);g||(g=new d.UniqueModel(d.User,{id:f,name:b.author.name,isAnonymous:"0"===b.author.id}),b.author.avatar&&g.set("avatar",{cache:b.author.avatar,permalink:b.author.avatar}),c.users.add(g)),c.queue.add({id:b.id,userId:g.get("id"),parentId:e,message:b.post.message,createdAt:b.date})}},Vote:function(a){var b=a.data;if(b.id&&b.vote){var c=this.thread,e=c.posts.get(b.vote.recipient_post_id);if(e){DISQUS.log("RT: Vote for post ",e.id);var f=e.votes.get(b.id);f||(DISQUS.log("RT: Creating new vote with id ",b.id),f=new d.Vote({id:b.id}),e.votes.add(f));var g=e._vote(b.vote.vote,f.get("score"));0!==g&&f.set("score",g)}}},ThreadVote:function(a){var b=a.data,c=this.thread;if(b.id&&b.vote&&(!this.session.user.id||b.vote.voter_id!==this.session.user.id)){var e=c.votes.get(b.id);e||(e=new d.ThreadVote({id:b.id}),c.votes.add(e));var f=c._vote(b.vote.vote,e.get("score"));0!==f&&e.set("score",f)}},typing:function(a){var b=a.data,c=this.thread,e=b.typing,f=b.post;if(b.thread===c.id&&f){var g=c.posts.get(f);g&&(g.usersTyping.count()<=0&&!e||g.usersTyping.add(d.TypingUser.make(_.extend({client_context:a.lastEventId},b))))}}},initRealtime:function(){var a=g.Manager;if(!a.pipe&&this.isRealtimeEnabled()){this.initRealtimeIndicators();var b;this.switches.enabled("aggressive_embed_cache")&&(b=this.initialData.lastModified),a.initialize("thread/"+this.thread.id,b,this.realtimeHandlers,this);var c=0;this.listenTo(DISQUS.api,"call",function(b){"POST"!==b.method||b.secure||(c++,a.pause())}),this.listenTo(DISQUS.api,"complete",function(){0>=c||--c||a.resume()})}},updateDom:function(){var a=_.debounce(function(){this.resize(),this.trigger("domReflow")},0);return function(b,c){b&&b.call(c),a.call(this)}}(),initThreadVotes:_.debounce(function(){var a,b=this;b.threadVotes&&b.threadVotes.remove(),b.threadVotes=a=new w({thread:b.thread,session:b.session}),b.listenTo(a,{"vote:like":_.bind(b.trigger,b,"uiAction:threadLike"),"vote:unlike":_.bind(b.trigger,b,"uiAction:threadUnlike")}),a.render(),this.updateDom(function(){$("#thread-votes").append(a.el)})},200),initThreadSubscribe:function(){this.threadSubscribeButton=new x({session:this.session,thread:this.thread,el:$("#thread-subscribe-button")[0]})},renderStreamingToggle:function(){var a=this;if(a.thread.get("hasStreaming")){var b=$(DISQUS.renderBlock("realtimeToggleButton"));$(b).on("click",s(function(){a.toggleStreamingRealtime()})),a.updateDom(function(){$("#realtime-toggle").empty(),$("#realtime-toggle").append(b[0])})}},toggleStreamingRealtime:function(){var a=$("#realtime-toggle a.btn");this.states.streamingPaused?(this.states.streamingPaused=!1,a.addClass("pause")):(this.states.streamingPaused=!0,a.removeClass("pause"))},updateThreadVotes:function(){$("#thread-votes [data-role=like-count]").text(this.thread.get("likes"))},updateThreadUserScore:function(){var a=this.thread.get("userScore"),b=$("#thread-votes [data-role=vote-button]");b.removeClass("upvoted").removeClass("downvoted"),a>0?b.addClass("upvoted"):0>a&&b.addClass("downvoted")},updatePostCount:function(){var a=this;this.postCountContainer=this.postCountContainer||this.$("a[data-role=post-count]"),this.postCountContainer.html(DISQUS.renderBlock("postCount",{count:a.thread.get("posts")}))},swapMain:function(a){var b=this,c=this.$el.find("#main-nav [data-nav=conversation]").parent("li");"conversation"!==a?c.attr("data-dropdown","disabled"):_.defer(function(){c.attr("data-dropdown","enabled")}),b.updateDom(function(){b.states.realtimeIndicatorsCreated&&"conversation"!==a&&h.sendHostMessage("indicator:hide");var c=b[a];c&&!c.isRendered&&(b.freeze(!0),b.listenToOnce(c,"render:all",_.bind(b.freeze,b,!1)),c.show()),b.$el.find("[data-role=main]").hide(),b.$el.find("[data-role=main]#"+a).show(),b.prevSection=b.currentSection,b.currentSection=a}),b.trigger("uiAction:navigate",a)},setupNavigation:function(){var a=this;a.mainNav=new D({el:a.$("#main-nav")}),a.listenTo(a.mainNav,"nav",function(a){this.swapMain(a),this.updateDom()})},renderLayout:function(){var a=this;a.addFeatureDetectionClasses();var b=$(DISQUS.renderBlock("layout",{thread:a.thread.toJSON(),forum:a.forum.toJSON(),order:a.thread.posts.getOrder()}));b.appendTo(a.$el),a.setupNavigation(),a.postsView.renderLayout(),a.updateDom()},addFeatureDetectionClasses:function(){var a=$(document.documentElement);this.isMobile&&a.addClass("mobile"),f.useOpacityTransitions(window)&&a.addClass("use-opacity-transitions")},renderForm:function(){if(this.thread.get("isClosed"))return void this.alert(i("Comments for this thread are now closed."));if(!this.session.get("canReply"))return void this.session.once("change:id",this.renderForm,this);var a=this.form=new k.PostReplyView({thread:this.thread,session:this.session});a.render(),this.updateDom(function(){a.prependTo($("#form")),a.resize()},this)},showOnboarding:function(a){Modernizr.sessionstorage&&sessionStorage.setItem("onboard.session",JSON.stringify(this.session.user.toJSON()));var b={threadId:this.thread.get("id"),forumId:this.forum.get("id"),forumPk:f.extract(this,"initialData.forum.pk").toString()};a&&(b=_.extend(b,{activeSection:a})),DISQUS.browser.mobile||this.isFullscreen?(b.fullscreen=!0,window.open(j.createUrlWithConfig(b,{f:this.forum.get("id")},j.onboard))):(h.sendHostMessage("onboard.show",b),this.trigger("uiAction:onboardOpen"))},handleShowOnboarding:s(function(a){var b=$(a.target).attr("data-section");this.showOnboarding(b)}),handleShowProfile:s(function(a){var b=$(a.currentTarget).attr("data-user");this.showProfile(b)}),handleSort:s(function(a){var b=$(a.currentTarget).attr("data-sort");this.$el.find('[data-role="post-sort"]').replaceWith(DISQUS.renderBlock("postSort",{order:b})),this.thread.posts.setOrder(b),this.thread.posts.fetch({reset:!0}),f.cookies.create("disqus.order",b),this.postsView.handleSort()}),closeThread:s(function(){this.thread.close({success:_.bind(h.sendHostMessage,h,"reset"),error:_.bind(this.alert,this,"An error occurred while closing thread. Please try again.","error")})}),openThread:s(function(){this.thread.open({success:_.bind(h.sendHostMessage,h,"reset"),error:_.bind(this.alert,this,"An error occurred while opening thread. Please try again.","error")})}),findClosestThumbnailSize:function(){var a=document.body.offsetWidth;if(this.loadedThumbnailWidth)return this.loadedThumbnailWidth;var b=this.MEDIA_PERSISTED_WIDTHS,c=b.length;this.loadedThumbnailWidth=_.find(b,function(d,e){return e+1===c||Math.abs(b[e+1]-a)>Math.abs(b[e]-a)})},createDeferredViewsForImages:function(){var a=this;$("img[data-src]").each(function(b,c){var d=$(c),e=new z({el:c,url:d.attr("data-src"),relatedPost:d.attr("data-post")});d.removeAttr("data-src"),a.trackDeferredView(e)})},trackDeferredView:function(a){if(null===a.getOffset())return void this.unsortedDeferredViews.push(a);var b=_.sortedIndex(this.deferredViews,a,function(a){var b=a.getOffset();return b?b.visibleTop:null});this.deferredViews[b]!==a&&this.deferredViews.splice(b,0,a)},invalidateDeferredViewOffsets:function(){_.invoke(this.deferredViews,"invalidateOffset"),this.unsortedDeferredViews=this.unsortedDeferredViews.concat(this.deferredViews),this.deferredViews=[]},trackUnsortedDeferredViews:function(){var a=this.unsortedDeferredViews;this.unsortedDeferredViews=[],_.each(a,this.trackDeferredView,this)},getPosition:function(){return this.position},processDeferredViews:function(){this.createDeferredViewsForImages(),this.trackUnsortedDeferredViews();var a=this.deferredViews.length;if(a){var b=this.getPosition(),c=b.pageOffset+b.height-b.frameOffset.top;if(!(0>c)){for(var d=0;a>d;++d){var e=this.deferredViews[d];if(!e.isAboveOffset(c))break;e.options.relatedPost&&this.postsView.listenTo(e,"load error",_.bind(this.postsView.onDeferredViewReady,this.postsView,e.options.relatedPost)),e.trigger("viewport:enter")}this.deferredViews=this.deferredViews.slice(d)}}},showProfile:function(a){Modernizr.sessionstorage&&sessionStorage.setItem("profile.session",JSON.stringify(this.session.user.toJSON())),$(document).trigger("mouseout");var b={userId:a,threadId:this.thread.get("id"),forumId:this.forum.get("id"),forumPk:f.extract(this,"initialData.forum.pk").toString()};if(DISQUS.browser.mobile){var c={user:{id:a},fullscreen:!0};window.open(j.createUrlWithConfig(c,{},j.profile))}else h.sendHostMessage("profile.show",b)},resize:function(){var a=f.getPageHeight();this._lastHeight!==a&&(this._frozen&&this._lastHeight&&this._lastHeight>a||(this._lastHeight=a,h.sendHostMessage("resize",{height:a})))},freeze:function(a){this._frozen=!!a,this._frozen===!1&&this.resize()},windowOpen:function(a,b,c){f.windowOpen(a,"_blank",{width:b,height:c})},authenticate:function(a){var b=this.authServices[a];if(!b)return void DISQUS.log("Unknown authentication service: "+a);if(_.isFunction(b))return b.call(this);c.getLounge().trigger("uiAction:openLogin",a);var d={forum:this.thread.forum.get("id")};"https:"===window.location.protocol&&(d.redirect_secure=1),_.extend(d,b.params),this.windowOpen(DISQUS.serialize(b.url,d),b.width,b.height)},handleAuth:s(function(a){this.authenticate(f.extractService(a.target,"auth"))}),authServices:{disqus:{url:DISQUS.urls.login,width:460,height:355},disqusDotcom:{url:DISQUS.urls.dotcomLogin,width:478,height:590,params:{next:DISQUS.urls.login}},twitter:{url:DISQUS.urls.oauth.twitter,width:650,height:680},facebook:{url:DISQUS.urls.oauth.facebook,width:550,height:300},google:{url:DISQUS.urls.oauth.google,width:650,height:440},sso:function(){var a=parseInt(this.config.sso.width||"800",10),b=parseInt(this.config.sso.height||"500",10),c=window.open(this.config.sso.url,"_blank","width="+a+",height="+b);!function d(){f.isWindowClosed(c)?h.sendHostMessage("reload"):_.delay(d,500)}()}},verifyEmail:s(function(){var a=DISQUS.serialize(DISQUS.urls.verifyEmail,{f:this.forum.id});window.open(a,"_blank","width=460,height=355")}),getAudienceSyncUrl:_.memoize(function(){var a={client_id:this.config.apiKey,response_type:"audiencesync",forum_id:this.forum.id};return"https:"===window.location.protocol&&(a.ssl=1),DISQUS.serialize(DISQUS.urls.authorize,a)}),audienceSync:s(function(){this.windowOpen(this.getAudienceSyncUrl(),460,355)}),toggleMedia:s(function(){var a=n.settings,b=!a.get("collapsed");a.set("collapsed",b)})});_.extend(u.prototype,o.ShareMixin),_.extend(u.prototype,o.AlertMixin),f.mixin(u,DISQUS.next.views.mixins.UiActionEventProxy),b.views.mixins.appliesPublisherClasses.call(u.prototype);var v=r.extend({events:{"click [data-action=share\\:twitter]":"_onShare","click [data-action=share\\:facebook]":"_onShare"},_onShare:s(function(a){var b=f.extractService(a.target,"share");b&&this.sharers[b]&&(c.getLounge().trigger("uiAction:threadShare",b),this.share(b))}),_shareUrl:function(){return this.model.url()}});_.extend(v.prototype,o.ShareMixin);var w=r.extend({className:"thread-likes",initialize:function(a){_.extend(this,a)},events:{"click [data-action=upvote]":"upvote"},render:function(){var a=this,b=a.$el;return b.html(DISQUS.renderBlock("threadVotes",{thread:a.thread.toJSON(),user:a.session.toJSON()})),a.thread.get("userScore")>0?b.addClass("upvoted"):b.removeClass("upvoted"),b.attr("data-role","vote-button"),b},upvote:s(function(){this.vote(1)}),vote:function(a){var b,c=this.thread.get("userScore")===a;this.trigger(c?"vote:unlike":"vote:like"),this.thread.vote(c?0:a),c||(b=this.$el.find(".dropdown"),_.defer(function(){b.addClass("open")}))},remove:function(){this.off(),Backbone.View.prototype.remove.call(this)}}),x=r.extend({events:{"click [data-action=subscribe]":"subscribe","keydown #thread-subscribe-email":"subscribeKeypress"},initialize:function(a){this.thread=a.thread,this.session=a.session,this.listenTo(this.thread,"change:userSubscription",this.updateStatus),this.updateStatus(),this._boundDocumentClickHandler=_.bind(this._documentClickHandler,this)},updateStatus:function(){this.thread.get("userSubscription")?this.$el.addClass("subscribed"):this.$el.removeClass("subscribed")},subscribe:s(function(){var a=this.thread.get("userSubscription");this.session.isAnonymous()&&!a?this.showForm():this.thread.subscribe(!a)}),showForm:function(){var a=this;this._unbindDocumentClickHandler(),_.defer(function(){$(document.body).on("click",a._boundDocumentClickHandler)}),a.$el.addClass("show-form").find("input")[0].focus()},_documentClickHandler:function(a){"thread-subscribe-email"!==a.target.id&&this.hideForm()},_unbindDocumentClickHandler:function(){$(document.body).off("click",this._boundDocumentClickHandler)},hideForm:function(){this._unbindDocumentClickHandler(),this.$el.removeClass("show-form").find("input")[0].blur()},subscribeKeypress:function(a){var b=this.$el.find("input");if(b.removeClass("alert error"),"Esc"===a.key||27===a.keyCode)return void this.hideForm();if("Enter"===a.key||13===a.keyCode){var c=a.target.value;if(!f.validateEmail(c))return b.addClass("alert error"),void 0;this.hideForm(),this.thread.subscribe(!0,c)}}}),y=r.extend({initialize:function(a){_.extend(this,a),this.listenTo(this.session,"change:id",this.render),this.listenTo(n.settings,"change:collapsed",this.onMediaCollapseChange)},render:function(){var a=DISQUS.renderBlock("userMenu",{user:this.session.toJSON(),thread:this.thread.toJSON(),feedbackUrl:this.getSurveyMonkeyUrl(),newMedia:c.getLounge().switches.enabled("new_media"),sso:this.session.get("sso")});this.updateDom(function(){this.$el.html(a),this.onMediaCollapseChange()},this)},onMediaCollapseChange:function(){n.settings.get("collapsed")?this.$el.addClass("media-collapsed"):this.$el.removeClass("media-collapsed")},getSurveyMonkeyUrl:function(){var a,b="https://www.surveymonkey.com/s/5RBPTTZ",c=this.referrerUrl,d=this.session.user.id;a=d?[d,c]:[c];var e="?c="+encodeURIComponent(a.join(";"));return b+e}}),z=r.extend(_.extend({},b.views.mixins.IsVisibleViewMixin,{topEdgeOffset:function(){return-c.getLounge().getPosition().height},initialize:function(){this.hasLoaded=null,this.once("viewport:enter",this.loadImage,this)},loadImage:function(){var a=this;if(!a.hasLoaded){var b=function(b){return function(){a.trigger(b),a.$el.off(".deferredMediaView")}};a.$el.on("load.deferredMediaView",b("load")),a.$el.on("error.deferredMediaView",b("error")),a.$el.attr("src",a.options.url),a.hasLoaded=!0}}})),A=Backbone.View.extend({events:{click:"handleDrain"},getDirection:function(a){if(this.offset&&this.dim){var b=a.pageOffset,c=b+a.height,d=this.offset.top+a.frameOffset.top,e=d+this.dim.height;return b>e?1:d>c?-1:0}},setCount:function(a){this.options.count=a},render:function(){var a=this;return 0===a.options.count?void a.$el.hide():(a.$el.html(DISQUS.renderBlock("realtimeCommentNotification",{comments:a.options.count})),a.listenTo(c.getLounge(),"domReflow",_.throttle(function(){0!==a.options.count&&(this.offset=a.$el.offset(),this.dim=a.$el.dim())},400)),a.$el.show(),void 0)},handleDrain:s(function(){this.model.queue.drain(),this.setCount(this.model.queue.counters.comments),this.render()})}),B=A.extend({events:{click:"handleDrain"},getDirection:function(a){if(this.options.postView.visible){this.offset=this.options.postView.offset,this.dim=this.options.postView.dim;var b=A.prototype.getDirection.call(this,a);return delete this.offset,delete this.dim,b}},render:function(){var a=this,b=a.options.postView;return 0===a.options.count?(a.$el.hide(),b.trackPosition=!1,void 0):(b.trackPosition=!0,a.$el.html(DISQUS.renderBlock("realtimeReplyNotification",{replies:a.options.count})),a.$el.show(),_.delay(function(){a.$el.addClass("reveal")},13),void 0)},handleDrain:s(function(){var a=this.model.id,b=this.options.postView,c=this.options.thread.queue;c.drain(a),this.setCount(c.counters.replies[a]),b.trackPosition=!1,this.render()})}),C=r.extend({tagName:"ul",className:"debug",initialize:function(a){this.values=a},render:function(){return this.$el.empty(),_.each(this.values,function(a,b){var c=document.createElement("li");c.innerHTML="<strong>"+b+"</strong>"+": "+a,this.$el.append(c)},this),this}}),D=Backbone.View.extend({events:{"click [data-nav]":"_navTo"},initialize:function(){this.prevDestination=this.activeNav()},_navTo:function(a){a.preventDefault();var b=$(a.target);b=b.is("[data-nav]")?b:b.closest("[data-nav]");var c=b.attr("data-nav");this.navTo(c)},navTo:function(a){if(this.prevDestination!==a){this.prevDestination=a;var b=this.$el.find("[data-nav="+a+"]").parent();b.siblings("li").removeClass("active"),b.addClass("active"),this.trigger("nav",a)}},activeNav:function(){return null!=this.prevDestination?this.prevDestination:this.$el.find(".active [data-nav]").attr("data-nav")},clear:function(){this.$el.find("li").removeClass("active"),this.prevDestination=null}}),E=Backbone.View.extend({events:{"click [rel=nofollow]":"sendLinkForInspection"},initialize:function(){this.link=null,this.busy=!1,this.timeoutId=null,this.timeout=1e3,this.token=1,this.listenTo(this,"option.timeout",function(a){this.timeout=a})},setLink:function(a){this.link=a,this.$link=$(this.link)},onAffiliatorResponse:function(a){a=a||{},a.token===this.token&&(h.off("affiliateLink",this.onAffilatorResponse),a.url&&(this.link.href=a.url),this.undelegateEvents(),this.$link.triggerClick())},sendLinkForInspection:function(a){if(a.currentTarget===this.link)return void a.preventDefault();if("_blank"!==a.currentTarget.getAttribute("target")){var b=a.ctrlKey||a.metaKey||a.altKey||a.shiftKey,c=a.which&&1===a.which||0===a.button;if(b||!c)return!0;this.busy&&(h.off("affiliateLink"),this.timeoutId&&window.clearTimeout&&(window.clearTimeout(this.timeoutId),this.timeoutId=null),this.token++),this.busy=!0,this.setLink(a.currentTarget),a.preventDefault(),this.listenTo(h,"affiliateLink",this.onAffiliatorResponse),h.sendHostMessage("affiliateLink",{token:this.token,url:this.link.href});var d=_.bind(function(a){this.onAffiliatorResponse({token:a})},this,this.token);this.timeoutId=_.delay(d,this.timeout)}}});return f.mixin(u,DISQUS.next.views.mixins.ProfileHtmlHelpers),{Lounge:u,UserMenuView:y,ThreadVotesView:w,ThreadSubscribeButton:x,DeferredMediaView:z,QueuedPostView:A,QueuedReplyView:B,OutboundLinkHandler:E,DebugInfoView:C}}),DISQUS.define("next.lounge.views.uploads",function(){"use strict";var a=DISQUS.use("next.lounge.common"),b=DISQUS.use("next.utils"),c=DISQUS.use("next.models"),d=DISQUS.strings.get,e=a.LoungeSubView,f=function(a){if(!a)throw new Error("Cannot instantinate MediaStore without a valid storageKey!");this._storageKey=a,this._store=Modernizr.localstorage?window.localStorage:DISQUS.next.utils.hashStorage};_.extend(f.prototype,{getItems:function(){var a=this._store.getItem(this._storageKey);return a&&JSON.parse(a)||{}},clear:function(){this._store.removeItem(this._storageKey)},getItem:function(a){return this.getItems()[a]},setItem:function(a,b){var c=this.getItems();return c[a]=b,this._store.setItem(this._storageKey,JSON.stringify(c)),b},removeItem:function(a){var b=this.getItems();return a in b?(delete b[a],this._store.setItem(this._storageKey,JSON.stringify(b)),!0):!1}});var g=e.extend({events:function(){var a={"click [data-action=attach]":"_attachMedia"};return window.FormData&&_.extend(a,{dragover:"_dragOn",dragenter:"_dragOn",dragleave:"_dragOff",dragexit:"_dragOff",drop:"_drop"}),a},initialize:function(a){this.parent=a.parent,this.urls=a.urls},setElement:function(){var a=e.prototype.setElement.apply(this,arguments);return this.$dragPlaceholder=this.$el.find("[data-role=drag-drop-placeholder]"),this.$mediaSelector&&this.$mediaSelector.off(),this.$mediaSelector=this.$el.find("input[type=file][data-role=media-upload]"),this.$mediaSelector.on("change",_.bind(this._selectorChange,this)),a},_toggleDragPlaceholder:_.throttle(function(a){a?this.$dragPlaceholder.show():this.$dragPlaceholder.hide()},50),_selectorChange:function(a){this.uploadMedia(a.target.files),a.target.files&&Modernizr.localstorage&&!window.localStorage.getItem("usedDragDrop")&&this.trigger("uploader:alert",d("Did you know you can drag and drop images too? Try it now: drag images below."),{},function(){window.localStorage.setItem("usedDragDrop","1")})},_dragOn:function(a){a.stop(),this._toggleDragPlaceholder(!0),this.trigger("uploader:dragEnter")},_dragOff:function(a){a.stop(),this._toggleDragPlaceholder(!1)},_drop:function(a){a.stop(),window.localStorage.setItem("usedDragDrop","1"),this._toggleDragPlaceholder(!1),this.uploadMedia(a.originalEvent.dataTransfer.files)},_attachMedia:function(a){a.stop(),this.$mediaSelector.click()},_uploadMediaModern:function(a){for(var c=this,e=new FormData,f=0,g=a[f];g;g=a[++f])g.type.match(/^image\//)&&e.append("attachment",g);e.append("json","true"),this.parent&&e.append("id",this.parent.id);var h=b.CORS.request("POST",this.urls.add,function(){if(void 0===h.readyState||4===h.readyState&&200===h.status){var a=JSON.parse(h.responseText);a.success?c.trigger("uploader:addMedia",a.media):c.trigger("uploader:alert",a.message,"error")}},function(){var a=d("Unfortunately your image upload failed. Please verify "+"that your image is under 2MB. If you continue seeing "+"this error, please try again later.");413===h.status&&(a=d("Sorry, but the file you submitted is larger than 2 MB. Please make it smaller and try again.")),c.trigger("uploader:alert",a,"error")});h.withCredentials=!0,h.send(e)},_uploadMediaLegacy:function(){var a=this,b=document.createElement("iframe"),c=document.createElement("form"),d=this.$mediaSelector[0];$(d).off();var e=$(d.cloneNode(!0));if(d.parentNode.replaceChild(e[0],d),e.on("change",_.bind(this._selectorChange,this)),this.$mediaSelector=e,b.style.display="none",b.name="uploadFrame"+ +new Date,c.style.display="none",c.target=b.name,c.action=this.urls.add,c.method="post",c.appendChild(b),c.appendChild(d),this.parent){var f=document.createElement("input");f.type="hidden",f.name="id",f.value=this.parent.id,c.appendChild(f)}c.enctype="multipart/form-data",c.encoding="multipart/form-data";var g=function(b){var d=b.originalEvent,e=JSON.parse(d.data);"upload"===e.name&&($(c).remove(),$(window).off("message",g),e.data.success?a.trigger("uploader:addMedia",e.data.media):a.trigger("uploader:alert",e.data.message,"error"))};$(window).on("message",g),this.updateDom(function(){this.$el.append(c),c.submit()},this)},uploadMedia:function(a){var b=window.FormData?"Modern":"Legacy";return this.uploadMedia=this["_uploadMedia"+b],this.uploadMedia(a)}}),h=e.extend({events:{"click [data-action=detach]":"onDetach"},initialize:function(){this.urls=this.options.urls;var a=this.options.mediaStorageKey;this.mediaStore=a&&new f(a),this.collection=new Backbone.Collection,this.mediaStore&&this.collection.reset(_.values(this.mediaStore.getItems())),this.listenTo(this.collection,{add:this.onAdd,remove:this.onRemove,reset:this.onReset})},setElement:function(){var a=e.prototype.setElement.apply(this,arguments);return this.collection&&this.collection.each(this._addElement,this),a},hasVisible:function(){return!!this.collection.length},onDetach:function(a){a.stop();var b=$(a.target).closest("li"),c=b.attr("data-media-id"),d=this.collection.where({location:c});this.collection.remove(d,{$el:b})},_addElement:function(a){var b=$(DISQUS.renderBlock("legacyMediaUpload",a.toJSON()));b.attr("data-media-id",a.get("location")),this.updateDom(function(){this.$el.append(b)},this)},onAdd:function(a){this.mediaStore&&this.mediaStore.setItem(a.get("location"),a),this._addElement(a)},onRemove:function(a,b,c){c.$el&&this.updateDom(function(){c.$el.remove()});var d=this.mediaStore&&this.mediaStore.getItem(a.get("location"));if(d){var e={media:JSON.stringify(d)};this.parent&&(e.id=this.parent.id);var f=new Image;f.src=DISQUS.serialize(this.urls.remove,e,!0),this.mediaStore.removeItem(d.location)}},onReset:function(){this.updateDom(function(){this.$el.empty()},this),this.mediaStore&&this.mediaStore.clear()}}),i=e.extend({initialize:function(){this._urlsCache={},this.collection=new Backbone.Collection([],{model:c.RichMedia,comparator:function(a){return a.get("index")}}),this.listenTo(this.collection,{add:this.onAdd,"change:id change:beingEdited":this.onAdd,remove:this.onRemove,reset:this.onReset,sort:this.onSort})},hasVisible:function(){return this.collection.any(function(a){return a.$el})},onAdd:function(a,b,d){if(!a.get("thumbnailUrl"))return!1;if(_.contains(c.Media.WEBPAGE_TYPES,a.get("mediaType")))return!1;if(!d.force){if(a.$el)return;if(a.get("beingEdited")&&!d.isPasteEvent)return}var e=$(DISQUS.renderBlock("mediaUpload",{media:a.toJSON(),backupUrl:d.backupUrl}));a.$el=e,this.updateDom(function(){this.$el.append(e)},this)},onRemove:function(a){a.$el&&this.updateDom(function(){a.$el.remove(),a.$el=null})},onReset:function(a,b){_.each(b.previousModels,this.onRemove,this),a.each(function(c){this.onAdd(c,a,_.extend(b,{force:!0}))},this)},onSort:function(a){var b=a.chain().filter(function(a){return!!a.$el}).pluck("$el").value();this.$el.empty(),this.$el.append(b)},addMedia:function(a,b){var d=this,e=a.url,f=d._urlsCache[e];return f?(f.set(a,b),b=_.extend({merge:!0,sort:!1,backupUrl:e},b),d.collection.add(f,b),d.collection.sort(),void 0):((!a.beingEdited||b.isPasteEvent)&&(f=new c.RichMedia(a),d.collection.add(f,_.extend({merge:!0,backupUrl:e},b)),d._urlsCache[e]=f,(!f.get("beingEdited")||b.isPasteEvent)&&DISQUS.api.call("media/details.json",{method:"POST",data:{url:e},success:function(a){d._urlsCache[e].set(a.response,_.extend({backupUrl:e,sort:!1},b)),d.collection.sort()}})),void 0)},updateFromText:function(a,c,d){if(!a)return void this.collection.reset();var e=b.bleachFindUrls(a);e=_.uniq(e,!1,function(a){return a.url});var f={};_.each(e,function(b){f[b.url]=!0,b.beingEdited=b.index<c&&c<=b.endIndex||"."===a[b.endIndex],this.addMedia(b,_.extend({backupUrl:b.url},d))},this);var g=this.collection.pluck("url");f=_.keys(f);var h=_.difference(g,f);this.collection.remove(this.collection.filter(function(a){return _.contains(h,a.get("url"))}))}}),j=e.extend({initialize:function(){var a=this.options;this.parent=a.parent,this.legacyView=new h({mediaStorageKey:a.mediaStorageKey,urls:a.urls,parent:this.parent}),this.legacy=this.legacyView.collection,this.richView=new i({}),this.rich=this.richView.collection,this.listenTo(this.legacy,"all",this._updateEmpty),this.listenTo(this.rich,"all",this._updateEmpty)},setElement:function(){var a=e.prototype.setElement.apply(this,arguments);return this.legacyView&&(this.legacyView.setElement(this.$el.find("[data-role=media-legacy-list]")[0]),this.richView.setElement(this.$el.find("[data-role=media-rich-list]")[0]),this.rich.reset()),a},clear:function(){this.legacy.reset(),this.rich.reset()},_updateEmpty:function(){this.updateDom(function(){this.legacyView.hasVisible()||this.richView.hasVisible()?this.$el.removeClass("empty"):this.$el.addClass("empty")},this)}});return{MediaStore:f,MediaUploaderView:g,MediaUploadsLegacySubView:h,MediaUploadsRichSubView:i,MediaUploadsView:j}}),DISQUS.define("next.lounge.views.cards",function(){"use strict";var a=DISQUS.use("next.lounge.common"),b=DISQUS.use("next.utils"),c=DISQUS.use("next.collections"),d=DISQUS.use("next.lounge.mixins"),e=DISQUS.use("Bus"),f=b.preventDefaultHandler,g=a.LoungeSubView.extend({events:{mouseenter:"enter",mouseleave:"leave"},initialize:function(){this._id=_.uniqueId(),this._rendered=!1,this._hoverState="out",this._visible=!1,this._enterTimeout=null,this._leaveTimeout=null,g.open={},this.events=this.events||{},this.events["click [data-action=profile]"]="handleShowProfile",this.listenTo(this,"authenticating",this.keepOpen)},render:function(){this.hide(),$("body").append(this.el)},target:function(a){a.on("mouseenter",_.bind(this.enter,this,a)),a.on("mouseleave",_.bind(this.leave,this))},enter:function(a){var b=this;a&&(b.$target=a),b._leaveTimeout&&clearTimeout(b._leaveTimeout),"in"!==b._hoverState&&(b._hoverState="in",b._enterTimeout=_.delay(function(){"in"===b._hoverState&&b.show(),b._enterTimeout=null},g.DELAY_ENTER),g.open[this.uid]=this)},leave:function(){var a=this;a._enterTimeout&&clearTimeout(a._enterTimeout),"out"!==a._hoverState&&(a._hoverState="out",a._leaveTimeout=_.delay(function(){"out"===a._hoverState&&a.hide(),a._leaveTimeout=null},g.DELAY_LEAVE),g.open[this.uid]&&delete g.open[this.uid])},show:function(){var a=this;a._rendered||(a._rendered=!0,a.render()),a.moveTo(a.$target),a.$el.show(),a._visible=!0},moveTo:function(b){if(b){var c=g.POSITION_OFFSET,d=b.offset(),e=this.$el,f=e.dim(),h=a.getLounge().getPosition();d.top-=c,d.top+f.height+h.frameOffset.top<=h.pageOffset+h.height?e.css("top",d.top):e.css("top",d.top-f.height+2*c),e.css("left",d.left+c)}},hide:function(){this._keepOpen||(this.$el.hide(),this._visible=!1)},keepOpen:function(){this._keepOpen=!0,this.setupKeepOpenCanceler()},setupKeepOpenCanceler:function(){var a=this,b=function(){"out"===a._hoverState&&(a.stopListening(e,"window.click",b),$("body").off("click",b),a._keepOpen=!1,a.hide())};_.delay(function(){a.listenTo(e,"window.click",b),$("body").on("click",b)},100)},isVisible:function(){return this._visible},handleShowProfile:f(function(b){var c=$(b.currentTarget).attr("data-user");a.getLounge().showProfile(c),this.hide()})},{open:{},instances:{},DELAY_ENTER:350,DELAY_LEAVE:175,POSITION_OFFSET:20,exitAll:function(){_.invoke(g.open,"leave")},create:function(a,b,c,d){var e=g.instances[c];e||(g.instances[c]=e={});var f=e[a];return f||(f=new d(b),e[a]=f),b.targetElement&&f.target(b.targetElement),f}});!function(){$(document).on("mouseout",_.debounce(function(a){var b=a.relatedTarget||a.toElement;b&&"HTML"!==b.nodeName||g.exitAll()},10))}();var h=g.extend({className:"tooltip-outer",events:_.defaults({"click [data-action=toggleFollow]":"toggleFollow"},g.prototype.events),initialize:function(a){var b=this;g.prototype.initialize.call(b,a),b.session=a.session,b.user=a.user,b._fetched=!1,b.listenTo(b.user,{"change:numPosts change:numLikesReceived":_.debounce(function(){b.updateCounters()}),"change:isFollowing":b.updateActions}),b.listenTo(b.session,"change:id",function(){this._rendered&&this.render()})},serialize:function(){return{user:this.user.toJSON({session:this.session}),showFollowButton:this.user.has("isFollowing")||this.session.isAnonymous()}},render:function(){this.$el.html(DISQUS.renderBlock("hovercard",this.serialize())),g.prototype.render.call(this)},updateCounters:function(){this.$el.find("[data-role=counters]").html(DISQUS.renderBlock("hovercardCounters",this.serialize()))},updateActions:function(){this.$el.find("[data-role=actions]").html(DISQUS.renderBlock("hovercardActions",this.serialize()))},show:function(){this._fetched||(this._fetched=!0,this.user.fetch()),g.prototype.show.call(this)
}},{create:function(a){var b=a.user;return g.create(b.id,a,"ProfileCard",h)}});_.extend(h.prototype,d.FollowButtonMixin);var i=g.extend({className:"context-card tooltip-outer",initialize:function(a){var b=this;g.prototype.initialize.call(b,a),b.post=a.post},render:function(){var a=this.post.toJSON();a.excerpt=_.truncate(_.escape(_.strip(a.message),40,"...")),this.$el.html(DISQUS.renderBlock("contextCard",{post:a})),g.prototype.render.call(this)}},{create:function(a){var b=a.post;return g.create(b.id,a,"ContextCard",i)}}),j=g.extend({className:"tooltip-outer upvoters-outer",initialize:function(a){var b=this;g.prototype.initialize.call(b,a),b._fetched=!1,b._loading=!1,b._rendered=!1;var d=a.model;b.model=d,b.session=a.session,b.likes=d.get("likes"),b.hadLikes=!!b.likes,b.users=new c.UpvotersUserCollection([],{postId:d.get("id"),threadId:d.get("thread")}),b.listenTo(b.users,"reset",b.show),b.listenTo(b.model,"change:userScore",b.updateUserSet)},updateUserSet:function(){var a=this.session.user,b=this.likes,c=!1;if(this.likes=this.model.get("likes"),this.model.get("userScore")>0)if(this.session.isAnonymous()||this.users.add(a),this.likes&&!b)this._rendered=!1,this.show();else{var d=this.likes-1-this.users.length;c=this.session.isAnonymous()?!!d:!0,this.addUser()}else this.users.remove(a),this.removeUser(),this.likes||this.hide();this.moveTo(this.$target,c)},addUser:function(){var a=this,b=a.session.user;a.session.isAnonymous()?a.updateGuestVotes():a.$listEl&&a.$listEl.length&&(a.$listEl.prepend(DISQUS.renderBlock("upvoter",_.extend({highlight:!0},b.toJSON()))),a.stopHighlightUsername())},removeUser:function(){var a=this,b=a.session.user;if(a.session.isAnonymous())a.updateGuestVotes();else{var c=a.$el.find("[data-user="+b.get("id")+"]");c.length&&c.remove()}},stopHighlightUsername:_.debounce(function(){var a=this.$el.find(".highlight");a.removeClass("highlight")},1100),updateGuestVotes:function(){var a=this,b=a.$el.find("[data-role=guest]"),c={guestCount:this.likes-this.users.length,guestAvatarUrl:DISQUS.urls.avatar.generic,highlight:b.length,users:{length:a.users.length}},d=DISQUS.renderBlock("guestUpvoter",c);b.length?(b.replaceWith(d),a.stopHighlightUsername()):a.$listEl&&a.$listEl.length&&a.$listEl.append(d)},render:function(){delete this.pointEl,this.$el.html(DISQUS.renderBlock("upvoters",{users:this.users.toJSON(),guestCount:this.likes-this.users.length,guestAvatarUrl:DISQUS.urls.avatar.generic,isLoading:this._loading,highlight:!1})),g.prototype.render.call(this),this.$listEl=this.$el.find(".upvoters ul")},show:function(){var b=a.getLounge(),c=this;if(c.likes&&!c.isVisible()&&(c.hadLikes||(c._fetched=!0,c._loading=!1),c._fetched?c._loading&&(c._rendered=!1,c._loading=!1,c.hide()):(c.users.fetch({reset:!0}),c._fetched=!0,c._loading=!0),c._fetched&&!c._loading)){var d=this.session.user;this.model.get("userScore")>0&&!this.session.isAnonymous()&&!this.users.contains(d)&&this.users.add(d),g.prototype.show.call(this),this.scrollMeasure&&this.scrollMeasure.dim().height>this.$el.dim().height&&this.$el.addClass("has-scroll"),b.trigger("uiAction:upvotersCardShow")}},showPoint:function(a){var b=["tl","bl"];this.pointEl||(this.pointEl=this.$el.find(".tooltip-point"),this.pointEl.removeClass("hidden")),_.each(b,function(a){this.pointEl.removeClass("point-position-"+a)},this),this.pointEl.addClass("point-position-"+a)},moveTo:function(b,c){if(b){var d=g.POSITION_OFFSET,e=b.offset(),f=this.$el,h=f.dim(),i=a.getLounge().getPosition(),j=i.frameOffset.height;c&&(h.height+=f.find("li.user").dim().height+10),e.top-h.height-d>=0&&e.top-h.height+i.frameOffset.top>=i.pageOffset?(f.css({bottom:j-e.top+d,top:"inherit"}),this.showPoint("bl")):(f.css({bottom:"inherit",top:e.top+2*d}),this.showPoint("tl")),f.css("left",e.left-d)}},handleShowProfile:f(function(b){g.prototype.handleShowProfile.call(this,b),a.getLounge().trigger("uiAction:showProfileFromUpvotes")})},{create:function(a){return g.create(a.postId,a,"UpvotersCard",j)}});return b.mixin(j,DISQUS.next.views.mixins.LocalScroll,{scrollMeasureSelector:"[data-role=content]"}),{HoverCard:g,ProfileCard:h,ContextCard:i,UpvotersCard:j}}),DISQUS.define("next.lounge.views.community",function(){"use strict";var a=DISQUS.use("next.lounge.common"),b=DISQUS.use("next.collections"),c=DISQUS.use("next.lounge.mixins"),d=a.LoungeSubView,e=d.extend({tagName:"ol",className:"loading",initialize:function(){this.listenTo(this.collection,"reset",this.render)},render:function(){return this.updateDom(function(){this.$el.removeClass("loading"),this.$el.empty(),this.collection.each(function(a){var b=DISQUS.time.assureTzOffset(a.get("createdAt")),c=DISQUS.renderBlock("topThread",{id:a.id,title:a.get("title"),url:a.get("link"),numPosts:a.get("posts"),numLikes:a.get("likes"),timeAgo:moment(b,DISQUS.time.ISO_8601).fromNow()});this.$el.append(c)},this),this.trigger("render")},this),this.attachPosts(),this},attachPosts:function(){this.collection.each(function(a){this.renderPost(a)},this)},renderPost:function(a){var b=a.get("topPost");if(b){var c=_.escape(_.strip(b.message));c=_.truncate(c,160,"&hellip;");var d=DISQUS.renderBlock("topThreadPost",{message:c,author:b.author});this.updateDom(function(){this.$el.find("[data-role=thread-"+a.id+"] [data-role=top-thread-post]").html(d)},this)}}}),f=d.extend({tagName:"ol",className:"loading",events:{"click [data-action=toggleFollow]":"toggleFollow"},initialize:function(){this.listenTo(this.collection,"reset",function(){a.getLounge().thread.users.add(this.collection.models,{merge:!0}),this.render()}),this.listenTo(this.collection,"change:isFollowing",this.render),this.listenTo(this,"render",this.manageHeight),this.session=a.getLounge().session,this.listenTo(this.session,"change:id",this.render),this.profileRowHeight=75},render:function(){return this.updateDom(function(){this.$el.removeClass("loading"),this.$el.empty(),this.collection.each(function(a){if(!a.get("isPrivate")){var b=DISQUS.renderBlock("topUser",{sessionId:this.session.user.id,buttonAsLink:!0,user:a.toJSON({session:this.session})});this.$el.append(b)}},this),this.trigger("render")},this),this},manageHeight:function(){this.el.scrollHeight-this.collapsedHeight>=this.profileRowHeight&&this.collapse()}});_.extend(f.prototype,c.FollowButtonMixin),c.asCollapsible.call(f.prototype,{collapsedHeight:297});var g=Backbone.View.extend({initialize:function(a){var c=this;c.forum=a.forum,c.session=a.session,c.listenTo(c.session,"change:canAdminister",c.renderCommunityNotification),c.topThreads=new e({id:"top-threads",collection:new b.TopThreadCollection(null,{forum:c.forum.id,limit:10})}),c.topUsers=new f({id:"top-users",collection:new b.TopUserCollection(null,{forum:c.forum.id,limit:20})});var d=when.defer(),g=when.defer();c.topUsers.once("render",d.resolver.resolve),c.topThreads.once("render",g.resolver.resolve),when.join(d.promise,g.promise).then(function(){c.isRendered=!0,c.trigger("render:all")}),c.fetched=!1,c.render()},renderCommunityNotification:function(){var a=this.$("[data-role=community-notification]");a.length&&this.session.get("canAdminister")&&a.html(DISQUS.renderBlock("communityNotification",{forum:this.forum.toJSON()}))},render:function(){return this.$el.html(DISQUS.renderBlock("community",{forum:this.forum.toJSON()})),this.renderCommunityNotification(),this.$el.find("[data-role=top-threads]").append(this.topThreads.el),this.$el.find("[data-role=top-users]").prepend(this.topUsers.el),this},show:function(){this.fetched||(this.topThreads.collection.fetch({reset:!0}),this.topUsers.collection.fetch({reset:!0}),this.fetched=!0)}});return{CommunityView:g,TopThreadCollectionView:e,TopUserCollectionView:f}}),DISQUS.define("next.lounge.views.dashboard",function(){"use strict";var a=DISQUS.use("next.lounge.common"),b=DISQUS.use("next.models"),c=DISQUS.use("next.collections"),d=DISQUS.use("next.utils"),e=a.LoungeSubView,f=d.preventDefaultHandler,g=e.extend({events:{"click [data-action=more]":f(function(){this.trigger("fire")})},setBusy:function(){this.$el.find("[data-action=more]").addClass("busy").removeAttr("disabled")},setReady:function(){this.$el.find("[data-action=more]").removeClass("busy").removeAttr("disabled"),this.updateDom(function(){var a=this.collection.cursor,b=a&&a.hasNext;b?this.$el.show():this.$el.hide()},this)}}),h=e.extend({initialize:function(a){this.notifications=a.notifications,this.listenTo(this.notifications,{reset:this.resetNotifications,"add:many":this.addNotifications,"reset add:many":this.markNotificationsAsRead}),this._fetched=!1,this.moreButton=new g({collection:this.notifications}),this.listenTo(this.moreButton,"fire",this.loadMore)},render:function(){return this.renderLayout()},renderLayout:function(){return this.updateDom(function(){this.$el.html(DISQUS.renderBlock("notifications")),this.moreButton.setElement(this.$el.find("[data-role=more-notifications]")),this.$el.addClass("loading")},this),this},resetNotifications:function(a){var b=this.$el.find("[data-role=no-notifications]");b.hide(),this.$el.removeClass("loading"),0===a.size()?b.show():(b.hide(),this.addNotifications.apply(this,arguments))},addNotifications:_.decorate(Backbone.collectionAddNormalizer(c.NotificationCollection,b.Notification),function(a){var b=_.map(a,function(a){var b=$(DISQUS.renderBlock("notification",{notification:a.toJSON()}));return b[0]});return this.updateDom(function(){this.$el.find("[data-role=entries]").append(b)},this),this.moreButton.setReady(),this.notifications.markRead(),this}),show:function(){this._fetched||(this.notifications.fetch({reset:!0}),this._fetched=!0)},loadMore:function(){this.moreButton.setBusy(),this.notifications.more()}}),i=e.extend({initialize:function(){this.posts=new c.PostActivityCollection,this.listenTo(this.posts,{reset:this.resetActivity,"add:many":this.addActivity}),this._fetched=!1,this.moreButton=new g({collection:this.posts}),this.listenTo(this.moreButton,"fire",this.loadMore)},render:function(){return this.renderLayout()},renderLayout:function(){return this.updateDom(function(){this.$el.html(DISQUS.renderBlock("networkActivity")),this.moreButton.setElement(this.$el.find("[data-role=more-activity]")),this.$el.addClass("loading")},this),this},resetActivity:function(a){var b=this.$el.find("[data-role=no-activity]");b.hide(),this.$el.removeClass("loading"),0===a.size()?b.show():(b.hide(),this.addActivity.apply(this,arguments))},addActivity:_.decorate(Backbone.collectionAddNormalizer(c.PostActivityCollection,b.Post),function(a){var c=new Backbone.Collection;_.each(a,function(a){var d=c.get(a.get("thread").id)||new b.Thread(_.extend(a.get("thread"),{forum:a.get("forum")}));d.posts.add(a),c.add(d)});var d=c.map(function(a){var b=$(DISQUS.renderBlock("networkActivityThreadEntry",{thread:a.toJSON()})),c=a.posts.map(function(a){return $(DISQUS.renderBlock("networkActivityPostEntry",{post:a.toJSON()}))[0]});return b.find("[data-role=posts]").append(c),b[0]});return this.updateDom(function(){this.$el.find("[data-role=entries]").append(d),this.trigger("render:activity")},this),this.moreButton.setReady(),this}),show:function(){this._fetched||(this.posts.fetch({reset:!0}),this._fetched=!0)},loadMore:function(){this.moreButton.setBusy(),this.posts.more()}}),j=e.extend({events:{"click [data-action=network]":"showNetwork","click [data-action=notifications]":"showNotifications"},initialize:function(b){var c=this;c.network=new i,c.notifications=new h({notifications:b.session.notifications}),c.notificationCount=new a.NotificationCountView({session:b.session,showZero:!0}),c._views={network:c.network,notifications:c.notifications},c.listenTo(c.network,"render:activity",_.bind(c.trigger,c,"render:all"))},render:function(){this.updateDom(function(){this.$el.html(DISQUS.renderBlock("dashboard"))},this),this._tabs={network:this.$el.find("[data-role=network-tab]"),notifications:this.$el.find("[data-role=notifications-tab]")},this.network.setElement(this.$el.find("[data-role=network]")),this.notifications.setElement(this.$el.find("[data-role=notifications]")),this.notificationCount.setElement(this.$el.find("[data-role=notification-count]")),this.network.render(),this.notifications.render(),this.notificationCount.render()},show:function(){this.setActiveTab("notifications")},setActiveTab:function(b){var c=a.getLounge();c.freeze(!0),_.chain(this._tabs).invoke("removeClass","active"),this._tabs[b].addClass("active"),_.chain(this._views).pluck("$el").invoke("hide");var d=this._views[b];this.updateDom(function(){d.$el.show(),c.freeze(!1)},this),d.show&&d.show()},showNetwork:f(function(){this.setActiveTab("network"),a.getLounge().trigger("uiAction:navigate","network")}),showNotifications:f(function(){this.setActiveTab("notifications"),a.getLounge().trigger("uiAction:navigate","dashboard")})});return{DashboardView:j,PaginateButtonView:g,NetworkActivityCollectionView:i,NotificationCollectionView:h}}),DISQUS.define("next.lounge.views.media",function(){"use strict";var a=DISQUS.use("next.lounge.common"),b=DISQUS.use("next.utils"),c=DISQUS.use("next.models"),d=DISQUS.strings.get,e=DISQUS.urls,f=b.preventDefaultHandler,g=a.LoungeSubView,h=300,i=function(a){var c=a.getItem("disqus.collapse-media");return c="true"===c?!0:"false"===c?!1:null,null===c&&(c=b.isMobile(window)?!0:!1),c},j=Modernizr.localstorage?window.localStorage:b.hashStorage,k=new Backbone.Model({collapsed:i(j)}).on("change:collapsed",function(a,b){j.setItem("disqus.collapse-media",b)}),l={settings:k},m=function(a){if(!a)return"";a="http://"+a.replace(/^([a-z+.-]+:)?\/+/i,"");var b=document.createElement("a");b.href=a;var c=b.hostname.replace(/^www\d*\./i,"");return c=c.toLowerCase()},n=function(a,b,c,d){a[b.get(c)?"addClass":"removeClass"](d)},o=g.extend({tagName:"span",events:{"click [data-action=expand-collapse-media]":"handleToggle"},initialize:function(a){this.media=this.options.media;var c=a.$link;this.linkText=c.text(),this.linkHref=c.attr("href"),this.linkDomain=m(this.linkHref);var d=this.isUserText(c);this.hasGenericMessage=!1,d?this.mediaLinkText=this.linkText:this.media.get("title")?this.mediaLinkText=b.niceTruncate(this.media.get("title"),60):(this.hasGenericMessage=!0,this.mediaLinkText=this.model.get("providerExpandMessage")),this.listenTo(this.model,"change:deferred",this.render),this.listenTo(this.model,"change:activated",this.onChangeActivated)},isUserText:function(a){if("A"!==a[0].nodeName)return!1;var b=(a.text()||"").toLowerCase();if(!b)return!1;if(0===b.indexOf("http")||0===b.indexOf("www"))return!1;b=b.replace(/\.\.\.$/,"");var c=(a.attr("href")||"").toLowerCase();return c.indexOf(b)===-1},render:function(){var a=this.mediaLinkText;this.hasGenericMessage&&this.model.get("activated")&&(a=this.model.get("providerCollapseMessage")),this.updateDom(function(){this.$el.html(DISQUS.renderBlock("postMediaInlineLink",{model:this.model.toJSON(),text:this.linkText,href:this.linkHref,mediaLinkText:a,domain:this.linkDomain}))},this)},onChangeActivated:function(){this.hasGenericMessage&&this.render()},handleToggle:function(a){this.model.get("deferred")||(this.model.set("activated",!this.model.get("activated")),a&&a.preventDefault&&a.preventDefault())}}),p=Backbone.Model.extend({defaults:{deferred:!0,showButtons:!0,activated:!1,kind:"image",postId:"",deferredHeight:0,providerExpandMessage:"",providerCollapseMessage:"",providerIcon:"icon-proceed"}}),q=g.extend(_.defaults({events:{"click [data-action=expand]":"handleExpand","click [data-action=contract]":"handleContract","click [data-action=force-load]":"handleForceLoad"},initialize:function(){this.media=this.options.media,this.$linkEl=null,this.setupMode(),this.listenTo(this.model,"change:activated",this.applyState),this.listenTo(this.model,"change:deferredHeight",this.onChangeDeferredHeight),this.listenTo(this.model,"change:showButtons",this.updateElementClass),this.listenTo(this.model,"change:deferred",this.render),this.listenTo(l.settings,"change:collapsed",this.setupMode)},topEdgeOffset:function(){return-a.getLounge().getPosition().height},getMediaDimensions:function(){return{width:null,height:null}},getAvailableWidth:function(){return this.$el.parent().width()||a.getLounge().loadedThumbnailWidth},updateDeferredHeight:function(){this.model.set("deferredHeight",this.calculateDeferredHeight())},calculateDeferredHeight:function(){var a=this.getMediaDimensions(),b=a.width,c=a.height;if(!b||!c)return c;var d=this.getAvailableWidth(),e=d*c/b;return e},convertToButton:function(a){this.model.set("showButtons",!1),this.linkSubview&&this.linkSubview.remove(),this.linkSubview=new o({model:this.model,media:this.media,$link:a}),a.replaceWith(this.linkSubview.$el),this.linkSubview.render()},applyContentNodeHeight:function(a){this.contentNode.height(a||"auto")},shouldAutoplay:function(){return!this.model.get("deferred")},generateContentHtml:function(){return this.media.get("html")},createContentNode:function(a){return $(a)},insertContentNode:function(a){this.contentNode.html(a)},bindUpdateDomToLoadError:function(){var a=_.bind(function(){this.off("load error",a),this.updateDom()},this);this.on("load error",a)},prepareElementEvents:function(){},displayContent:function(){this.updateDom(function(){this.bindUpdateDomToLoadError(),this.updateDeferredHeight();var a=this.generateContentHtml(),b=this.createContentNode(a);this.prepareElementEvents(b),this.insertContentNode(b),this.applyContentNodeHeight(null)},this)},configureDeferred:function(){this.model.get("deferred")&&!this.model.get("activated")&&(this.once("viewport:enter",this.enterViewport),a.getLounge().trackDeferredView(this)),this.listenToOnce(a.getLounge().postsView,"rendered",this.updateDeferredHeight)},configureContentFromActivated:function(){this.updateDom(function(){this.model.get("activated")?this.displayContent():this.displayPlaceholder()},this)},displayPlaceholder:function(){this.contentNode.html(DISQUS.renderBlock("postMediaPlaceholder",{model:this.model.toJSON()}))},updateElementClass:function(){var a=this.$el,b=this.model;n(a,b,"deferred","media-mode-deferred"),n(a,b,"activated","media-activated"),n(a,b,"showButtons","media-show-buttons")},applyState:function(){this.configureDeferred(),this.configureContentFromActivated(),this.updateElementClass()},render:function(){this.$el.html(DISQUS.renderBlock("postMedia",{model:this.model.toJSON(),media:this.media.toJSON()})),this.contentNode=this.$el.find("[data-role=content-placeholder]"),this.applyState(),this.updateDom()},remove:function(){this.linkSubview&&this.linkSubview.remove(),g.prototype.remove.apply(this,arguments)},enterViewport:function(){this.model.get("deferred")&&this.model.set("activated",!0)},setupMode:function(){this.model.set("activated",!1);var a=l.settings.get("collapsed");a?this.model.set("deferred",!1):this.model.set("deferred",!0)},onChangeDeferredHeight:function(){this.model.get("deferred")&&!this.model.get("activated")&&this.applyContentNodeHeight(this.model.get("deferredHeight"))},handleExpand:f(function(){this.model.set("activated",!0)}),handleContract:f(function(){this.model.set("activated",!1)}),handleForceLoad:f(function(){this.model.get("deferred")&&this.model.set("activated",!0)})},DISQUS.next.views.mixins.IsVisibleViewMixin)),r=q.extend({getMediaDimensions:function(){return{width:this.media.get("htmlWidth"),height:this.media.get("htmlHeight")}},_findIframe:function(a){return a.is("iframe")?a:a.find("iframe")},configureContentFromActivated:function(){q.prototype.configureContentFromActivated.apply(this,arguments),this.model.get("activated")||this.$el.removeClass("media-loading")},createContentNode:function(){var a=q.prototype.createContentNode.apply(this,arguments);return a.attr({width:"100%",height:this.model.get("deferredHeight"),"data-post":this.model.get("postId")}),a},insertContentNode:function(a){this.loaderNode=this.$el.find("[data-role=content-loader]"),this.loaderHeight=this.model.get("deferredHeight")||h,this.loaderNode.height(this.loaderHeight),this.$el.addClass("media-loading"),q.prototype.insertContentNode.call(this,a)},prepareElementEvents:function(a){var b=this._findIframe(a);b.one("load",_.bind(this.finishLoad,this,b))},finishLoad:function(a){this.updateDom(function(){this.$el.removeClass("media-loading"),a.height(this.loaderHeight),this.trigger("load")},this)}}),s=r.extend({getMediaDimensions:function(){return{width:null,height:this.media.get("htmlHeight")}},createContentNode:function(){var a=r.prototype.createContentNode.apply(this,arguments),b=a.attr("src");return this.shouldAutoplay()&&b&&(b=DISQUS.serialize(b,{auto_play:!0}),a.attr("src",b)),a}}),t=r.extend({createContentNode:function(){var a=r.prototype.createContentNode.apply(this,arguments),b=a.attr("src");return this.shouldAutoplay()&&b&&(b=DISQUS.serialize(b,{autoplay:1}),a.attr("src",b)),a}}),u=q.extend({createContentNode:function(a){return $("<iframe>").attr({frameBorder:0,scrolling:"no",width:"100%",height:this.model.get("deferredHeight"),"data-post":this.model.get("postId"),"data-src":a,src:'javascript:window.frameElement.getAttribute("data-src");'})},insertContentNode:function(a){q.prototype.insertContentNode.apply(this,arguments);var b=this.model.get("deferredHeight")||h;a.height(b)}}),v=q.extend({insertContentNode:function(){q.prototype.insertContentNode.apply(this,arguments),this.finishLoad()},finishLoad:function(){var a=this,b=0,c=150,d=20,e=function(){a.updateDom(),++b,d>b?_.delay(e,c):a.trigger("load")};e()}}),w=v.extend({generateContentHtml:function(){var c=a.getLounge(),d=document.documentElement.lang;d=d&&d.substring(0,2);var e=this.media.get("url");return this.media.get("resolvedUrl").indexOf("/status")!==-1&&(e=this.media.get("resolvedUrl")),DISQUS.renderBlock("postMediaTwitterContent",{url:e,theme:c.config.colorScheme,linkColor:b.escapeColor(c.config.anchorColor),language:d})}}),x=q.extend({getMediaDimensions:function(){return{width:this.media.get("thumbnailWidth"),height:this.media.get("thumbnailHeight")}},getImageUrl:function(){return this.media.get("resolvedUrl")||this.media.get("url")||this.media.get("thumbnailUrl")},getImageThumbnailUrl:function(){var b=this.media.get("thumbnailUrl");return m(b)===m(e.media)&&(b=DISQUS.serialize(b,{w:a.getLounge().loadedThumbnailWidth,h:this.model.get("deferredHeight")})),b},generateContentHtml:function(){return DISQUS.renderBlock("postMediaImage",{model:this.model.toJSON(),media:this.media.toJSON(),thumbnailUrl:this.getImageThumbnailUrl(),imageUrl:this.getImageUrl(),postId:this.model.get("postId")})},prepareElementEvents:function(a){var b=this,c=a.find("img"),d=function(a){return function(){b.trigger(a),c.off(".richMediaView")}};c.on("load.richMediaView",d("load")),c.on("error.richMediaView",d("error"))},calculateDeferredHeight:function(){var a=q.prototype.calculateDeferredHeight.apply(this,arguments),b=this.getMediaDimensions().height;return Math.min(b,a)||null}}),y=x.extend({getImageThumbnailUrl:function(){return this.media.get("metadata").imageUrl||x.prototype.getImageThumbnailUrl.call(this)}}),z=r.extend({topEdgeOffset:function(){return 0},createContentNode:function(){var a=r.prototype.createContentNode.apply(this,arguments),b=a.attr("src");return this.shouldAutoplay()&&b&&(b=DISQUS.serialize(b,{audio:1}),a.attr("src",b)),a}}),A=function(a,b){var e={PLAY_HIDE:{kind:"html",providerExpandMessage:d("Play"),providerCollapseMessage:d("Hide")},VIEW_HIDE:{kind:"html",providerExpandMessage:d("View"),providerCollapseMessage:d("Hide")},VIEW_IMAGE:{kind:"image",providerIcon:"icon-images",providerExpandMessage:d("View"),providerCollapseMessage:d("Hide")}},f=function(a,b){return _.extend(e[a],{providerIcon:b})},g=null,h=null,i=c.Media.MEDIA_TYPES;switch(a.get("mediaType")){case i.IMAGE:case i.IMAGE_UPLOAD:g=e.VIEW_IMAGE;break;case i.FACEBOOK_PHOTO:h=y,g=e.VIEW_IMAGE;break;case i.VIMEO_VIDEO:case i.YOUTUBE_VIDEO:h=t,g=f("PLAY_HIDE","icon-video");break;case i.TWITTER_STATUS:h=w,g=f("VIEW_HIDE","icon-twitter");break;case i.VINE_VIDEO:h=z,g=f("PLAY_HIDE","icon-video");break;case i.FACEBOOK_VIDEO:g=f("VIEW_HIDE","icon-video");break;case i.SOUNDCLOUD_SOUND:h=s,g=f("PLAY_HIDE","icon-music");break;case i.GOOGLE_MAP:g=f("VIEW_HIDE","icon-map");break;default:return null}if(null===h)switch(g.kind){case"webpage":return null;case"html":h=r;break;case"image":h=x}var j=new p(_.extend(g,{postId:b})),k=new h({model:j,media:a,relatedPost:b});return k};return _.extend(l,{getCollapseDefault:i,getDomain:m,RichMediaLinkView:o,RichMediaViewModel:p,RichMediaView:q,IframeRichMediaView:r,SoundCloudRichMediaView:s,AutoplayVideoRichMediaView:t,SourcelessIframeRichMediaView:u,DynamicHeightRichMediaView:v,TwitterRichMediaView:w,ImageRichMediaView:x,FacebookPhotoRichMediaView:y,VineRichMediaView:z,instantiateRichMediaView:A})}),DISQUS.define("next.lounge.views",function(){"use strict";var a=DISQUS.use("next.lounge.common"),b=a.LoungeSubView.extend({initialize:function(a){this.session=a.session},render:function(){var a=DISQUS.renderBlock("notificationMenu",{user:this.session.toJSON()});return this.updateDom(function(){this.$el.html(a)},this),this.applyReadState(),this},applyReadState:function(){var a=this.session.get("notificationCount")||0;a>0?this.$el.addClass("unread"):this.$el.removeClass("unread")}});return{NotificationMenuView:b}}),DISQUS.define("next.lounge.views.onboard",function(){"use strict";var a=DISQUS.use("next.utils"),b=Backbone.View.extend({switches:new DISQUS.next.collections.SwitchCollection(DISQUS.config.switches,{parse:!0}),events:{"click [data-action=close]":"handleClose"},initialize:function(a){this.session=a.session},render:function(){return this.session.isRegistered()&&this.shouldShow()&&(this.$el.html(DISQUS.renderBlock("onboard")),this.trigger("uiAction:onboardAlertShow")),this},shouldShow:function(){var a=this.getCookie();return a?this.switches.enabled("user_onboarding")?a===b.COOKIE_NEW_USER||a===b.COOKIE_POPUP:!1:!1},shouldPopup:function(){var a=this.getCookie();return a?this.switches.enabled("user_onboarding")?a===b.COOKIE_NEW_USER:!1:!1},getCookie:function(){return a.cookies.read(b.COOKIE_NAME)},setInitialCookie:function(){this.joinedRecently(this.session.user)&&a.cookies.create(b.COOKIE_NAME,b.COOKIE_NEW_USER,{expiresIn:30*24*60*60*1e3})},setPopupCookie:function(){this.shouldPopup()&&a.cookies.create(b.COOKIE_NAME,b.COOKIE_POPUP,{expiresIn:30*24*60*60*1e3})},joinedRecently:function(a){var b=a.get("joinedAt");if(!b)return!1;var c=DISQUS.time.assureTzOffset(a.get("joinedAt"));return moment().subtract(10,"seconds").isBefore(c)},eraseCookie:function(){a.cookies.erase(b.COOKIE_NAME)},handleClose:function(a){a.preventDefault(),this.remove(),this.trigger("uiAction:onboardAlertDismiss")},remove:function(){this.eraseCookie(),this.session=null,Backbone.View.prototype.remove.call(this)}},{COOKIE_NAME:"disqus.onboarding",COOKIE_NEW_USER:"newUser",COOKIE_POPUP:"popup"});return{OnboardAlert:b}}),DISQUS.define("next.lounge.views.posts",function(){"use strict";var a=DISQUS.use("next.lounge.common"),b=DISQUS.use("next.models"),c=DISQUS.use("next.collections"),d=DISQUS.use("next.utils"),e=DISQUS.strings.get,f=DISQUS.use("next.lounge.views.media"),g=DISQUS.use("next.lounge.mixins"),h=DISQUS.use("next.lounge.views.uploads"),i=DISQUS.use("next.lounge.views.cards"),j=DISQUS.use("Bus"),k=d.preventDefaultHandler,l=a.LoungeSubView,m=350,n=function(){var a=5,b=Modernizr.localstorage?window.localStorage:DISQUS.next.utils.hashStorage;return new QueuedStorage(b,a,"drafts.queue")}(),o=l.extend({tagName:"form",className:"reply",events:{"click input[name=author-guest]":"managePassword","click [data-action=cancel]":"hide",submit:"submitForm"},initialize:function(a){if(this.session=a.session,this.parent=a.parent,this.thread=a.thread,this.parentView=a.parentView,this.listenTo(this.session,{"change:id change:audienceSyncVerified":this.redraw}),this._isHidden=!1,this.parent&&(o.open[this.parent.cid]=this),this.thread.forum.get("settings").allowMedia){var b=this.storageKey("media"),c={add:this.thread.get("uploadAdd"),remove:this.thread.get("uploadRemove")};this.mediaUploads=new h.MediaUploadsView({mediaStorageKey:b,parent:this.parent,urls:c}),this.mediaUploader=new h.MediaUploaderView({parent:this.parent,urls:c}),this.listenTo(this.mediaUploader,{"uploader:alert":function(a,b,c){var d=this.alert(a,b);_.isFunction(c)&&this.listenToOnce(d,"dismiss",c)},"uploader:dragEnter":function(){this.$el.addClass("expanded")},"uploader:addMedia":_.bind(this.mediaUploads.legacy.add,this.mediaUploads.legacy)})}var d=_.throttle(this.updateLiveMedia,500),e=_.debounce(this.updateLiveMedia,1e3);this.updateLiveMediaRateLimited=this.canUseContentEditable?function(){d.apply(this,arguments),e.call(this,!0)}:function(){e.call(this,!0)}},storageKey:function(a){return this.thread.id?[a||"drafts","thread",this.thread.id,"parent",this.parent?this.parent.id:0].join(":"):null},updateLiveMedia:function(a){function b(){var b=c.textarea.get(),d=c.textarea.content&&c.textarea.content.selectedTextNodeOffset()||b.length;c.mediaUploads.richView.updateFromText(b,d,{isPasteEvent:a})}var c=this;c.mediaUploads&&(a?_.defer(b):b())},saveDraft:function(){null!==this.storageKey()&&n.setItem(this.storageKey(),JSON.stringify([this.textarea.get(),(new Date).getTime()]))},getDraft:function(){if(null===this.storageKey())return null;var a=n.getItem(this.storageKey());if(!a)return null;var b=JSON.parse(a);return b[1]+86400>(new Date).getTime()?b[0]:(n.removeItem(this.storageKey()),null)},restoreDraft:function(){var a=this.getDraft();a&&this.textarea.set(a)},updateAvatar:function(){this.$el.find("[data-role=user-avatar]").attr("src",this.session.user.get("avatar").cache)},expandGuestForm:function(){this.updateDom(function(){this.$el.find("[data-role=guest-details]").addClass("expanded")},this)},redraw:function(){var a=this.$el.hasClass("expanded"),b=this.el,c=this.$el.find("textarea").val();this.render(),this.$el.find("textarea").val(c),a&&this.$el.addClass("expanded"),0!==$(b).parent().length&&this.updateDom(function(){b.parentNode.replaceChild(this.el,b)},this)},getPlaceholderText:function(){return this.thread.get("posts")?e("Join the discussion"):e("Start the discussion")},render:function(){var b=this,c=b.$el,d=a.getLounge();return b.$el.html(DISQUS.renderBlock("form",{parent:b.parent?b.parent.toJSON():null,user:b.session.toJSON(),forumName:b.thread.forum.get("name"),audienceSyncRequired:b.session.needsAudienceSyncAuth(b.thread.forum),apiKey:d.config&&d.config.apiKey||"",allowAnonPost:b.thread.forum.get("settings").allowAnonPost,allowMedia:b.thread.forum.get("settings").allowMedia,sso:b.session.get("sso")})),b.parent?c.addClass("expanded"):c.removeClass("expanded"),b.session.user.id?c.addClass("authenticated"):c.removeClass("authenticated"),b.initTextarea(),b.mediaUploads&&(b.mediaUploads.setElement(c.find("[data-role=media-preview]")[0]),b.mediaUploader.setElement(c.find("[data-role=textarea]")[0])),c.find("input[name=author-name]").on("focus",function(){b.expandGuestForm()}),b.session.get("mustVerifyEmail")&&b._alertMustVerify(),b._isHidden&&c.addClass("hidden"),this},canUseContentEditable:function(){return Modernizr.contenteditable&&!DISQUS.browser.mobile&&!(window.opera&&window.opera.version)}(),initTextarea:function(){var b=this,c=b.getDraft()||"",d=this.canUseContentEditable?w:v,e=this.textarea=new d({value:c,placeholder:b.getPlaceholderText(),thread:this.thread});b.$("[data-role=textarea]").prepend(e.render().el),b.listenTo(e,{keychange:_.debounce(b.saveDraft,500),focus:function(){b.$el.addClass("expanded"),_.delay(_.bind(b.resize,b),200)}}),a.getLounge().switches.enabled("new_media")&&b.listenTo(e,{keychange:b.updateLiveMediaRateLimited,paste:function(a,c){c&&c.fake||b.updateLiveMedia(!0)}})},resize:function(){this.textarea.resize()},focus:function(){this.textarea.focus()},clear:function(){var a=this;a.textarea.clear(),a.$el.removeClass("expanded"),a.mediaUploads&&a.mediaUploads.clear(),_.delay(function(){a.resize()},200),a.parent?a.hide():a.setInactive(),this.storageKey()&&n.removeItem(this.storageKey())},setInactive:function(){this.$el.removeClass("expanded")},restore:function(a){var b=this;
b.textarea.set(a.get("raw_message")),_.delay(function(){b.resize()},200),b.parent&&b.show()},managePassword:function(){var a=this.$el,b=a.find("input[name=author-guest]"),c=a.find("input[name=author-password]");c&&(this.updateDom(function(){c[b.is(":checked")?"hide":"show"]()}),c.val(""))},_alertMustVerify:function(a){var b=DISQUS.interpolate(e("%(forumName)s requires you to %(verifyEmail)s before posting"),{forumName:this.thread.forum.get("name"),verifyEmail:'<a href="#" data-action="verify-email">'+e("verify your email address")+"</a>"});this.alert(b,{safe:!0,type:a?"error":"warn"})},getPassword:function(){var a=this.$el.find("input[name=author-password]");return a.length?a.val():null},submitForm:k(function(){return this.dismissAlert(),this.shouldRegisterUser()?void this.registerUser():this.createPost()}),shouldRegisterUser:function(){return this.session.isAnonymous()&&!this.$el.find("input[name=author-guest]").is(":checked")},registerUser:function(){function c(a){var b=a.response;/The e-mail address you specified is already in use./i.test(b)?d.alert(e("The e-mail address you specified is already in use. (Do you already have an account?)"),"error"):/Unable to create user/i.test(b)?d.alert(e("That email address is already registered with a Disqus account. Log in or enter another email."),"alert"):d.alert(b,"error")}var d=this,f=new b.User({display_name:d.$el.find("input[name=author-name]").val(),email:d.$el.find("input[name=author-email]").val(),password:d.getPassword()});return f.isValid()?(f.register({error:c,success:function(){d.session._setUser(f),j.trigger("onboardAlert.show"),a.getLounge().trigger("uiAction:finishRegistrationEmbed")}}),void 0):c({response:f.validationError})},createPost:function(){var c=this,d=a.getLounge(),e={thread:c.thread.id,depth:c.parent?c.parent.get("depth")+1:0,parent:c.parent?c.parent.id:null,raw_message:c.textarea.get()};c.session.isRegistered()?e.author_id=c.session.user.id:_.extend(e,{author_name:c.$el.find("input[name=author-name]").val(),author_email:c.$el.find("input[name=author-email]").val()});var f=new DISQUS.next.models.UniqueModel(DISQUS.next.models.Post),g=f.set(e,{validate:!0});if(!g)return void c.alert(f.validationError,"error");var h=null,i=function(a,b){if(19===b.code){if(h)return h.reload();h=new s,h.render();var e=d.postsView.getPostView(f.cid);return e.el.parentNode.insertBefore(h.el,e.el),h.start(),this.listenTo(h,"submitted",function(){f.save({recaptcha_challenge_field:h.getChallenge(),recaptcha_response_field:h.getResponse()},{success:function(){h.remove()}})}),void 0}if(12===b.code&&/not have permission to post on this thread/.test(b.response)){var g=DISQUS.renderBlock("blacklistErrorMessage",{forumName:c.thread.forum.get("name")});c.alert(g,{type:"error",safe:!0})}else 12===b.code&&/verify/.test(b.response)?c._alertMustVerify(!0):_.isString(b.response)&&c.alert(b.response,"error");c.thread.posts.remove(f),c.restore(f),c.thread.incrementPostCount(-1)},j=function k(){c.thread.trigger("create",f),d.trigger("uiCallback:postCreated",f),c.stopListening(f,"error",i),c.stopListening(f,"sync",k)};return c.listenTo(f,{error:i,sync:j}),f.save(e),f.author=c.session.isRegistered()?c.session.user:new b.UniqueModel(b.User,{id:md5(e.author_email),name:e.author_name,email:e.author_email}),c.thread.incrementPostCount(1),f.created=!0,c.thread.posts.add(f),c.clear(),d.trigger("uiAction:createPost",f),f},prependTo:function(a){a=a[0],a.insertBefore(this.el,a.firstChild)},remove:function(){this.updateDom(function(){this.$el.remove()},this),this.parent&&(delete o.open[this.parent.cid],this.typingStop()),Backbone.View.prototype.remove.call(this)},toggle:function(){this.isOpen()?this.hide():this.show()},show:function(){var a=this;a._isHidden=!1,a.updateDom(function(){a.$el.removeClass("hidden")}),a.typingStart()},hide:function(){var a=this;a._isHidden=!0,a.dismissAlert(),a.updateDom(function(){a.$el.addClass("hidden")}),a.typingStop()},isOpen:function(){return!this._isHidden},syncTyping:function(a){this.typingUser&&(void 0!==a&&this.typingUser.set("typing",a),this.typingUser.sync())},typingStart:function(){var c=this.parent;if(c){var d=a.getLounge();d.isRealtimeEnabled()&&(this.typingUser||(this.typingUser=b.TypingUser.make({user:this.session.user.id,post:c.id,thread:this.thread.id,forum:this.thread.forum.id}),c.usersTyping.add(this.typingUser)),this.syncTyping(!0))}},typingStop:function(){this.syncTyping(!1)}});_.extend(o.prototype,g.AlertMixin),o.open=o.open||{};var p=l.extend({tagName:"form",className:"edit",events:{submit:"submitForm","click [data-action=cancel]":"cancel"},initialize:function(a){this.post=a.post,this.session=a.session},show:function(){},hide:function(){},cancel:function(){this.trigger("cancel")},render:function(){var a=this.post.toJSON();this.$el.html(DISQUS.renderBlock("edit",{post:a,user:this.session.toJSON()}));var b=this.textarea=new v({value:a.raw_message});this.$("[data-role=textarea]").prepend(b.render().el)},prependTo:function(a){a=a[0],a.insertBefore(this.el,a.firstChild)},resize:function(){this.textarea.resize()},submitForm:function(a){a&&a.preventDefault()&&a.preventDefault();var b=this,c={raw_message:this.textarea.get()},d=b.post.validate(c);return void 0!==d?alert(d):(b.trigger("submitted"),b.post.save(c,{success:function(){}}),void 0)},remove:function(){this.updateDom(function(){this.$el.remove()},this)}}),q=l.extend(_.extend({initialize:function(){this.listenTo(this,"viewport:enter",this.logEnter)},logEnter:function(){DISQUS.juggler&&DISQUS.next.jester.client.emit(this.options.params)}},DISQUS.next.views.mixins.IsVisibleViewMixin)),r=l.extend({tagName:"li",className:"post",actions:{upvote:k(function(){this.handleVote(1)}),downvote:k(function(){this.handleVote(-1)}),reply:"handleReply",flag:"handleFlag",edit:"handleEdit","delete":"handleDelete",spam:"handleSpam",blacklist:"handleBlacklist",highlight:"handleHighlight",unhighlight:"handleUnhighlight",collapse:"handleCollapse",reveal:"handleReveal","share:twitter":"_onShare","share:facebook":"_onShare"},events:{"click > [data-role=post-content] [data-action]":function(a){var b=this,c=$(a.currentTarget).attr("data-action"),d=b.actions[c];return d?(_.isFunction(d)?d:b[d]).call(b,a):void 0}},initialize:function(b){this.thread=b.thread,this.session=b.session,this.created=!!b.created,this.model.get("isHighlighted")&&this.$el.addClass("highlighted"),this.listenTo(this.model,{"change:isDeleted spam":this.removeAsDeleted,"change:message":this.stopLoading,"change:points":this.updateVotePoints,"change:userScore":this.updateActiveUserVote,"change:isFlaggedByUser":this.updateUserFlagged,"change:isHighlighted":function(a,b){this.$el.toggleClass("highlighted",b),this.redraw()},change:function(){var a=this.model.changedAttributes();(a.id||a.message)&&this.redraw()}}),this.listenTo(this.model.usersTyping,"add remove reset change",this.updateTypingCount),this.listenTo(this.session,"change:id",this.updateFooter),this.listenTo(this.session,"change:id",this.updateMenu),this.reply=null,this.edit=null,this.parent=b.parent,this.trackPosition=!1,this.offset={top:-1,height:-1},this.dim={height:-1,width:-1},this.listenTo(a.getLounge(),"domReflow",function(){if(!this.trackPosition||!this.visible)return this.offset={top:-1,height:-1},this.dim={height:-1,width:-1},void 0;var a=this.contentNode;this.offset=a.offset(),this.dim=a.dim()}),this.isCollapseAllowed=!0,this.haveSubscribedToRichMediaEvents=!1},createTypingUserView:function(){var a=this.$el.find("[data-role=realtime-notification\\:"+this.model.id+"] .realtime-replies");this.typingUserView=new t({parentView:this,model:this.model,el:a})},updateTypingCount:function(){this.typingUserView||this.createTypingUserView(),this.typingUserView.render()},stopLoading:function(){this.contentNode.find(".loading").removeClass("loading")},updateRelativeTime:function(){this.contentNode.find("[data-role=relative-time]").text(this.model.getRelativeCreatedAt())},updateActiveUserVote:function(){var a=this.model,b=this.contentNode.find("[data-action=upvote]"),c=this.contentNode.find("[data-action=downvote]");c.removeClass("downvoted"),b.removeClass("upvoted"),a.get("userScore")>0?b.addClass("upvoted"):a.get("userScore")<0&&c.addClass("downvoted")},updateVotePoints:function(a){var b=this.contentNode.find("[data-role=likes], [data-role=dislikes]"),c=this.contentNode.find("[data-action=upvote], [data-action=downvote]"),d=function(a){_.delay(function(){a.addClass("update"),_.delay(function(){a.removeClass("update")},1e3)},500)};_.each(b,function(b,e){b=$(b);var f=b.html(),g=a.get(b.attr("data-role")).toString(),h=$(c[e]);f!==g&&(h.addClass("count-"+g),h.removeClass("count-"+f),b.html(g),d(b))})},updateFooter:function(){var b=this.contentNode.find("footer"),c=a.getLounge(),d=DISQUS.renderBlock("postFooter",{post:this.model.toJSON({session:this.session,thread:this.thread}),session:this.session.toJSON(),hideDownvoteNumber:c.switches.enabled("hide_downvote_number")});this.updateDom(function(){b.html(d),this.initUpvotersCard()},this)},updateMenu:function(){var a=this.contentNode.find("[data-role=menu]"),b=DISQUS.renderBlock("postMenu",{isHighlightingEnabled:this.isHighlightingEnabled(),session:this.session.toJSON(),post:this.model.toJSON()});this.updateDom(function(){a.replaceWith(b)})},updateUserFlagged:function(){this.model.get("isFlaggedByUser")?this.contentNode.addClass("user-reported"):this.contentNode.removeClass("user-reported")},getMessageContent:function(){return this.messageContent&&this.messageContent.length||(this.messageContent=this.contentNode.find("[data-role=message-content]")),this.messageContent},manageMessageHeight:function(a){var b=this,c=b.getMessageContent(),d=1.5*b.collapsedHeight,e=c&&c.length&&c.height()||0;e+=a||0,e>d&&!b.$el.hasClass("collapsed")?b.collapse():b.expand(!0)},preventCollapsing:function(a){a.get("deferred")||(this.expand(),this.isCollapseAllowed=!1)},markSeen:function(){function b(a){var e,f;return a?c.dim.height<=0||c.dim.width<=0?!1:(e=c.offset.top+a.frameOffset.top,f=e>a.pageOffset,(f=f&&e+c.dim.height<=a.pageOffset+a.height)?(c.contentNode.addClass("seen"),_.delay(function(){c.contentNode.removeClass("seen"),c.contentNode.removeClass("new")},1e4),c.trackPosition=!1,c.stopListening(d,"scroll",b),!0):!1):!1}var c=this,d=a.getLounge();b(d.position)||c.listenTo(d,"scroll",b)},renderLegacyMedia:function(b){var c=a.getLounge();b.append($(DISQUS.renderBlock("postMediaLegacyList",{post:this.model.toJSON(),thumbnailWidth:c.loadedThumbnailWidth,thumbnailHeight:c.MAX_MEDIA_HEIGHT})))},renderRichMedia:function(a,b){var c=this.$el.find("[data-role=message]"),e={};c.find("a").each(function(a,b){var c=b.href;e[c]||(e[c]=$(b))});var g=this.model.cid;this.richMediaViews=a.chain().map(function(a){return f.instantiateRichMediaView(a,g)}).without(null).map(function(a){this.listenTo(a.model,"change:activated",this.preventCollapsing),a.render();var c=a.media.get("url"),f=d.bleachFindUrls(c);f.length&&(c=f[0].url);var g=e[c];if(g){var h=r.getHighestAncestor(g);h.after(a.$el),a.convertToButton(g)}else $("<li>").append(a.$el).appendTo(b);return a},this).value(),!this.haveSubscribedToRichMediaEvents&&this.richMediaViews.length&&(this.listenTo(f.settings,"change:collapsed",function(a,b){if(b)this.manageMessageHeight();else{var c=_.reduce(this.richMediaViews,function(a,b){return a+(b.model.get("deferredHeight")||0)},0);this.manageMessageHeight(c)}}),this.haveSubscribedToRichMediaEvents=!0)},renderMedia:function(){var b=this.model.media;if(b&&b.length){var c=this.$el.find("[data-role=post-media-list]");a.getLounge().switches.enabled("new_media")?this.renderRichMedia(b,c):this.renderLegacyMedia(c)}},isHighlightingEnabled:function(){return a.getLounge().switches.enabled("highlightedcomments")},getTemplate:function(a){return a.isDeleted?"postDeleted":a.isMinimized?"postMinimized":"post"},render:function(){var b=this,c=b.$el,d=b.parent&&b.parent.model,e=b.model.toJSON({session:this.session,thread:this.thread}),f=a.getLounge(),g=b.thread.forum.get("avatar");return c.html(DISQUS.renderBlock(this.getTemplate(e),{isHighlightingEnabled:b.isHighlightingEnabled(),post:e,forumName:b.thread.forum.get("name"),session:b.session.toJSON(),thread:b.thread.toJSON(),loading:!b.model.id,created:b.created,parentAuthorName:d?d.author.get("name"):null,thumbnailWidth:f.loadedThumbnailWidth,thumbnailHeight:f.MAX_MEDIA_HEIGHT,defaultAvatarUrl:g?g.large.cache:DISQUS.urls.avatar.generic,hideDownvoteNumber:f.switches.enabled("hide_downvote_number")})),b.model.get("isDeleted")||b.model.get("isMinimized")?c.addClass("minimized"):c.removeClass("minimized"),b.model.id&&c.attr("id","post-"+b.model.id),b.contentNode=c.find("[data-role=post-content]"),b.childrenNode=c.find("[data-role=children]"),b.messageNode=b.contentNode.find("[data-role=message]"),b.highlightSyntax(),b.processMentions(),b.initCards(),b.renderMedia(),b.model.get("isRealtime")&&(b.trackPosition=!0,b.listenToOnce(f.postsView,"rendered",b.markSeen)),b.listenToOnce(f.postsView,"rendered",function(){b.markSeen(),b.manageMessageHeight()}),e.author&&e.author.badge&&this.attachBadgeViews(),b},attachBadgeViews:function(){var b=a.getLounge(),c={verb:"view",object_type:"verified_badge",object_id:this.model.author.id};this.$("[data-type=tracked-badge]").each(function(){var a=new q({el:this,params:c});b.trackDeferredView(a)})},highlightSyntax:function(){var a=this.contentNode.find("pre code");a.length&&a.each(function(){d.syntaxHighlighter.highlight(this)})},redraw:function(){var b=document.createDocumentFragment();this.childrenNode.children().appendTo(b),this.render(),this.updateDom(function(){this.childrenNode.append(b),a.getLounge().postsView.trigger("rendered")},this)},processMentions:function(){this.contentNode.find("[data-dsq-mention]").each(function(){$(this).addClass("mention")})},attachChild:function(a){var b=a.model;b.created||!b.id||b.get("isImmediateReply")?this.childrenNode.prepend(a.el):this.childrenNode.append(a.el)},toggleReply:function(){this.reply&&this.reply.isOpen()?this.hideReply():this.showReply()},showReply:function(){this.reply?this.updateDom(function(){this.reply.prependTo(this.$el.find("[data-role=reply-form]")),this.reply.show(),this.reply.focus()},this):this.getReplyView()},hideReply:function(){this.reply&&this.updateDom(function(){this.reply.hide()},this)},toggleEdit:function(){return this.edit?(this.edit.hide(),this.edit.remove(),this.edit=null,this.messageNode.show(),void 0):(this.showEdit(),void 0)},showEdit:function(){return this.session.isAnonymous()?(this.session.once("change:id",this.toggleEdit,this),void 0):(this.model.canBeEdited(this.session,this.thread)&&(this.edit||(this.edit=new p({post:this.model,session:this.session}),this.edit.render(),this.listenTo(this.edit,"submitted cancel",this.toggleEdit),this.expand(!0),this.edit.show(),this.updateDom(function(){var b=this.messageNode;this.edit.prependTo(b.parent()),b.hide(),this.edit.resize();var c=a.getLounge();c&&c.scrollToPost(this.model.id)},this))),void 0)},removeAsDeleted:function(){this.redraw()},initCards:function(){var a=this;a.initProfileCard(),a.initContextCard(),a.initUpvotersCard()},initProfileCard:function(){var a=this.$el.find(".hovercard");a.length&&(this.profileCard=i.ProfileCard.create({session:this.session,user:this.model.author,targetElement:a}))},initContextCard:function(){var a=this.parent&&this.parent.model;a&&!a.get("isDeleted")&&(this.contextCard=i.ContextCard.create({post:a,targetElement:this.$el.find("[data-role=parent-link]")}))},initUpvotersCard:function(){var a=this.$el.find("[data-action=upvote]");a.length&&(this.upvotersCard=i.UpvotersCard.create({session:this.session,model:this.model,postId:this.model.get("id"),targetElement:a}))},_onShare:k(function(b){var c=d.extractService(b.target,"share");c&&(a.getLounge().trigger("uiAction:postShare",this.model,c),this.share(c))}),_shareUrl:function(){return this.thread.url()+"#comment-"+this.model.id},handleBlacklist:k(function(){if(!this.blacklist){var a=this.blacklist=new u({model:this.model});a.render(),this.listenTo(a,"success cancel",function(){this.blacklist.remove(),this.blacklist=null}),this.updateDom(function(){this.contentNode.find("[data-role=blacklist-form]").first().append(a.el)},this)}}),toggleCollapse:function(a){this.updateDom(function(){this.$el.toggleClass("collapsed",a)},this)},handleCollapse:k(function(){this.updateDom(function(){this.toggleCollapse()},this)}),handleHighlight:k(function(){this.model.highlight(),this.alert(DISQUS.renderBlock("highlightedSuccessMessage"),{safe:!0,type:"success"}),this.thread.set("highlightedPost",this.model),this.$el.addClass("highlighted-active")}),handleUnhighlight:k(function(){this.model.unhighlight(),this.dismissAlert(),this.thread.unset("highlightedPost"),this.$el.removeClass("highlighted-active")}),handleVote:function(b){var c=a.getLounge(),d=this.model.get("userScore")===b;d?c.trigger("uiAction:postUnvote",this.model):1===b?c.trigger("uiAction:postUpvote",this.model):b===-1&&c.trigger("uiAction:postDownvote",this.model),this.model.vote(d?0:b)},remove:function(){this.model.off(null,null,this),this.session.off(null,null,this),Backbone.View.prototype.remove.call(this)},getReplyView:function(){return this.reply?this.reply:(this.reply=new o({parentView:this,parent:this.model,thread:this.thread,session:this.options.session}),this.reply.render(),this.showReply(),this.reply)},handleReply:k(function(){this.toggleReply()}),handleFlag:k(function(){if(!this.model.get("isFlaggedByUser")){var a=e("Are you sure you want to flag this comment?");window.confirm(a)&&(this.model.report(),this.model.set("isFlaggedByUser",!0))}}),handleEdit:k(function(){this.toggleEdit()}),handleDelete:k(function(){this.model._delete()}),handleSpam:k(function(){this.model.spam()}),handleReveal:k(function(){this.model.set("isMinimized",!1),this.redraw()}),handleExpandMessage:k(function(){return this.expand()})},{getHighestAncestor:function(a){return a.closest("[data-role=message] > *")}});_.extend(r.prototype,g.ShareMixin),_.extend(r.prototype,g.AlertMixin),g.asCollapsible.call(r.prototype,{collapsedHeight:374,collapseTargetSelector:"[data-role=message-container]",collapseScope:"contentNode"});var s=l.extend({tagName:"form",className:"hidden",events:{submit:function(a){a.preventDefault(),this.trigger("submitted")}},render:function(){return this.$el.html(DISQUS.renderBlock("captcha"))},start:function(){function a(){b.updateDom(function(){Recaptcha.create(DISQUS.keys.recaptcha,b.el,{theme:"custom",custom_theme_widget:"recaptcha_widget"}),b.$el.removeClass("hidden")})}var b=this;"undefined"==typeof Recaptcha?curl(["js!//www.google.com/recaptcha/api/js/recaptcha_ajax.js"]).then(a):a()},getChallenge:function(){return Recaptcha.get_challenge()},getResponse:function(){return Recaptcha.get_response()},reload:function(){Recaptcha.reload()}}),t=Backbone.View.extend({render:function(){var a,b=this.options.parentView.reply,c=b&&b.typingUser,d=this.model.usersTyping.count(c&&c.id);return 0>=d?void this.$el.hide():(1===d?a=e("One other person is typing"):(a=e("%(num)s other people are typing"),a=DISQUS.strings.interpolate(a,{num:d})),this.$el.text(a),this.$el.show(),void 0)}}),u=l.extend({tagName:"form",className:"moderate",events:{submit:function(a){a&&a.preventDefault()&&a.preventDefault(),this.submit()},"click [data-action=cancel]":"cancel"},initialize:function(){var a=this;a.loading=!1,a.model.get("ipAddress")||(a.loading=!0,a.listenToOnce(a.model,"change:ipAddress",function(){a.loading=!1,a.render(),a.updateDom()}),a.model.fetch())},render:function(){var a=this,b=a.$el;return b.html(DISQUS.renderBlock("blacklist",{post:a.model.toJSON()})),a.loading?b.addClass("loading"):b.removeClass("loading"),a},cancel:function(a){a&&a.preventDefault()&&a.preventDefault(),this.trigger("cancel")},submit:function(){var a={},b=this;b.$el.find("input").each(function(){this.checked&&(a[this.name]=this.value)}),_.isEmpty(a)||(a.forum=b.model.get("forum"),DISQUS.api.call("blacklists/add.json",{method:"POST",data:a,success:function(){b.trigger("success")}}))}}),v=l.extend({events:{"keyup    [data-role=editable]":"handleKeyUp","paste    [data-role=editable]":"handlePaste","focusin  [data-role=editable]":"handleFocusIn","resize   [data-role=editable]":"handleResize"},initialize:function(a){a=a||{},this.value=a.value,this.placeholder=a.placeholder,this.debouncedResize=_.debounce(_.bind(this.updateDom,this,function(){}),300)},render:function(){var a=this.$input=$("<textarea>").attr({"class":"textarea",placeholder:this.placeholder,"data-role":"editable"}).val(this.value).appendTo(this.el);return a.autoresize({maxHeight:m}),this},resize:function(){this.$input.trigger("paste",{fake:!0})},get:function(){return this.$input.val()},set:function(a){this.$input.val(a)},clear:function(){this.set("")},focus:function(){this.el.focus()},handleKeyUp:function(){this.trigger("keychange")},handlePaste:function(){this.trigger("paste keychange"),this.$input.trigger("resize")},handleFocusIn:function(){this.trigger("focus")},handleResize:function(){this.debouncedResize()}}),w=v.extend({events:function(){return _.extend({},v.prototype.events,{"keydown  [data-role=editable]":"handleKeyDown","focusout [data-role=editable]":"handleFocusOut","click .placeholder":"handlePlaceholderClick"})},initialize:function(a){v.prototype.initialize.call(this,a),a=a||{},this.thread=a.thread,this.mentionsCache=new c.UserCollection,this.suggestions=new x({thread:a.thread,mentions:this.mentionsCache}),this.listenTo(this.suggestions,"select",this.insertMention),this.reset(),this.$input=null},reset:function(){this.anchorNode=null,this.anchorOffset=null,this.anchorLength=0,this.suggestions.clear()},render:function(){var a=this.$input=$("<div>").attr({"class":"textarea",tabIndex:this.el.tabIndex,role:"textbox","aria-multiline":"true",contenteditable:"true","data-role":"editable"}).css({overflow:"auto","max-height":m+"px"}).appendTo(this.$el);this.$el.append(this.suggestions.el),this.content=new Editable(a[0],!0,{getHtmlElements:_.bind(this.getHtmlElements,this)}),this.set(this.value),this.suggestions.render();var b=this.placeholder;return b&&(a.attr("aria-label",b),this.$placeholder=$('<span class="placeholder">'+b+"</span>"),this.content.text()||this.setPlaceholder()),this},getHtmlElements:function(a){if(!a)return a;var b=[a],c=this.getMentionNodes(a);return _.each(c,function(a,c){for(var d=0;d<b.length;d++){var e,f=b[d],g=d;if(_.isString(f)){for(;(e=f.indexOf(c))>-1;)e>0&&b.splice(d++,0,f.substring(0,e)),b.splice(d++,0,a.cloneNode(!0)),f=f.substring(e+c.length);f&&f!==b[g]&&b.splice(d++,0,f),g!==d&&b.splice(d,1)}}}),b=_.map(b,function(a){return _.isString(a)?document.createTextNode(a):a})},getMentionNodes:function(a){var b=w.MENTIONS_RE_GROUPED,c={};b.lastIndex=0;for(var d=b.exec(a);d;){var e=d[1],f=this.thread.users.find(function(a){return a.get("username")===e});if(f){var g=w.getMentionDom(f),h=d[0];c[h]=g,this.updateCache(f,f.cid)}d=b.exec(a)}return c},setPlaceholder:function(){this.$el.prepend(this.$placeholder)},handleKeyDown:function(a){switch(a.keyCode){case 9:this.suggestions.active&&(this.suggestions.select(),a.preventDefault(),a.stopPropagation());break;case 10:case 13:case 38:case 40:this.suggestions.active&&(a.preventDefault(),a.stopPropagation())}},handleKeyUp:function(a){switch(v.prototype.handleKeyUp.call(this),a.preventDefault(),a.stopPropagation(),this.checkExistingMentions(),a.keyCode){case 50:if(!a.shiftKey)return;this.start(a);break;case 10:case 13:this.suggestions.select();break;case 27:this.reset(a);break;case 38:this.suggestions.move("up");break;case 40:this.suggestions.move("down");break;default:this.throttledSuggest(a)}},handlePlaceholderClick:function(){this.$input.focus()},handleFocusIn:function(){v.prototype.handleFocusIn.call(this),this.$placeholder.remove()},handleFocusOut:function(){""===this.content.text()&&this.setPlaceholder()},start:function(){this.reset(),this.suggest()},suggest:function(){var a=this.parseSearchTerms();this.suggestions.suggest(a)},throttledSuggest:_.throttle(function(){this.suggest()},250),insertMention:function(a){var b=this.thread.users.get(a);this.selectSearchString(b),this.updateCache(b,a);var c=w.getMentionDom(b);this.content.insertNode(c);var d=this.$el.find("span[data-cid]");_.each(d,function(a){a.contentEditable!==!1&&(a.contentEditable=!1)})},updateCache:function(a,b){this.mentionsCache.get(b)||this.mentionsCache.add(a)},selectSearchString:function(){this.content.selectNodeText(this.anchorNode,this.anchorOffset-1,this.anchorOffset+this.anchorLength)},get:function(){function a(a){return c(a,!0)?b.mentionToText(a):null}var b=this,c=w.isMention;return this.content.text(a)},set:function(a){this.content.setText(a),this.resize()},clear:function(){v.prototype.clear.call(this),this.setPlaceholder(),_.defer(function(a){a.updateDom(function(){a.$input.blur()})},this)},parseSearchTerms:function(){var a=this.content.selectedTextNode(),b=a?a.nodeValue:"",c=Editable.normalizeSpace;if(b){var d=this.content.selectedTextNodeOffset(a),e=Editable.normalizeSpace(b.slice(0,d).split("").reverse().join("")),f=e.indexOf("@");if(f===-1)return null;this.anchorNode=a,this.anchorOffset=d-f,this.anchorLength=f;var g=c(b.slice(this.anchorOffset-1,d)).match(w.MENTIONS_RE);return g?g[0].slice(1).split(" "):0===f?[""]:void 0}},checkExistingMentions:function(){var a=Editable.normalizeSpace,b=this.$el.find("span"),c=_.filter(b,w.isMention),d=this.mentionsCache,e={};_.each(c,function(b){var c=$(b).attr("data-cid"),f=_.reduce(this.content.getTextNodes(b),function(b,c){return b+a(c.nodeValue)},""),g=d.get(c);g&&g.get("name")!==f?(this.mentionsCache.remove(g),this.content.removeNode(b),this.content.insertHTML(" "),this.reset()):e[c]=b},this),d.each(function(a){e[a.cid]||d.remove(a)})},mentionToText:function(a){var b=$(a).attr("data-cid"),c=this.mentionsCache.get(b),d=a.innerText||a.textContent;return c&&c.get("username")&&(d=c.get("username")),["@",d,":","disqus"].join("")}},{MENTIONS_RE:new RegExp("@\\w+\\s?(?:\\w+\\s?){0,5}(?:\\w+)?$"),MENTIONS_RE_GROUPED:/@([\d\w]+)\s?(\:\s?(\w+))?/gi,isMention:function(a,b){var c;do{if(c=$(a),c.hasClass("mention")&&c.attr("data-cid"))return!0;a=a.parentElement}while(b&&a);return!1},getMentionDom:function(a){var b=document.createDocumentFragment(),c=document.createElement("span"),d=document.createElement("span"),e=document.createTextNode(a.get("name")||a.get("username"));return c.setAttribute("contenteditable",!0),d.setAttribute("contenteditable",!1),d.setAttribute("data-cid",a.cid),d.className="mention",d.appendChild(e),c.appendChild(d),b.appendChild(c),b.appendChild(document.createTextNode(" ")),b}}),x=Backbone.View.extend({events:{"click li":"handleClick"},initialize:function(a){this.active=!1,this.thread=a.thread,this.mentionsCache=a.mentions,this.userHtmlCache={}},suggest:function(a){var b=this.findMatches(a);return b&&b.length?(this.renderUsers(b),this.active=!0,this.$el.show(),void 0):void this.clear()},render:function(){this.$el.html(DISQUS.renderBlock("suggestions")),this.active||this.$el.hide()},renderUsers:function(a){var b=_.reduce(a,function(a,b){var c=this.userHtmlCache[b.cid];return void 0===c&&(this.userHtmlCache[b.cid]=c=$(this.renderSingleUser(b))),a.appendChild(c[0]),a},document.createDocumentFragment(),this);this.$(".header").siblings().remove().end().after(b).siblings().removeClass("active").first().addClass("active")},renderSingleUser:function(a){var b=a.toJSON();return b.cid=a.cid,DISQUS.renderBlock("suggestedUser",b)},clear:function(){this.active=!1,this.$el.hide()},handleClick:function(a){var b=$(a.currentTarget);this.select(b.attr("data-cid"))},findMatches:function(a){if(a&&a.length){var b,c=new RegExp(a.join(" ").replace(/[^\w\s]/,""),"i"),d=x.MAX_SUGGESTIONS,e=this.thread.users,f=[],g=0,h=1===a.length&&""===a[0]?function(){return!0}:function(a){return c.test(a.get("name"))||c.test(b.get("username"))};for(g=0;g<e.models.length&&f.length<d;g++)b=e.models[g],b.get("isAnonymous")||this.mentionsCache.get(b.cid)||h(b)&&f.push(b);return f}},select:function(a){this.active&&(a||(a=this.$el.find(".active").attr("data-cid")),this.trigger("select",a),this.clear())},move:function(a){if(this.active){var b=this.$el.find(".active"),c="up"===a?"prev":"next",d=b[c]();d.length&&d.attr("data-cid")&&(b.removeClass("active"),d.addClass("active"))}}},{MAX_SUGGESTIONS:5});return{PostView:r,PostReplyView:o,PostEditView:p,TypingUserView:t,CaptchaView:s,BlacklistView:u,TextareaView:v,ContentEditableView:w,SuggestionView:x}}),DISQUS.define("next.lounge.views.posts.collection",function(){"use strict";var a=DISQUS.use("next.lounge.common"),b=DISQUS.use("next.models"),c=DISQUS.use("Bus"),d=DISQUS.use("next.lounge.views.posts.mobile"),e=DISQUS.use("next.lounge.views.posts"),f=a.LoungeSubView,g=f.extend({STREAMING_MAX_VISIBLE:250,events:{"click [data-action=more-posts]":"handleLoadMore"},initialize:function(a){this.lounge=a.lounge,this.thread=a.thread,this.posts=a.posts,this.postsToAppend=[],this.postsToPrepend=[],this.session=a.session,this.subViews={},this.state={nextPassTimeoutId:null,renderedPosts:[],clearDomAfterRender:!1,totalPostsProcessed:0,totalElapsedTime:0},this.listenTo(this.posts,{reset:this.redrawPosts,add:this.addPosts,remove:this.removePost}),this.listenTo(this.thread,"change:highlightedPost",this.handleHasHighlightedState),this.listenTo(this.posts,"reset add",this.toggleNoPosts),this.listenTo(this.posts,"reset add",this.enableTimestampUpdates),this.listenTo(this,"rendered",this.toggleLoadMorePosts),this.listenTo(this,"rendered",this.handleHasHighlightedState)},handleHasHighlightedState:function(){this.$el.toggleClass("hide-highlighting",this.thread.has("highlightedPost"))},getPostView:function(a){return this.subViews[a]},bootstrap:function(a,b){this.permalinkOptions=b,this.posts.reset(a.posts),_.invoke(this.subViews,"manageMessageHeight")},bindUIUpdateHandlers:function(){var a=this,b=$(window),c=$(document.body),d=c.width(),e=_.debounce(function(){var b=c.width();d!==b&&a.subViews&&(d=b,_.each(a.subViews,function(a){a.manageMessageHeight()}))},50);b.on("resize",e)},updateTimestamps:function(){return!this.subViews||_.size(this.subViews)<1?!1:(_.invoke(this.subViews,"updateRelativeTime"),!0)},enableTimestampUpdates:function(){var a=this,b=1e3*60;if(!a.timestampUpdateTimer){var c=function(){return a.updateTimestamps()?(a.timestampUpdateTimer=_.delay(c,b),void 0):(a.timestampUpdateTimer=null,void 0)};a.timestampUpdateTimer=_.delay(c,b)}},openReply:function(a){var b=this.posts.get(a);if(b){var c=this.subViews[b.cid];c.showReply()}},openEdit:function(a){var b=this.posts.get(a);if(b){var c=this.subViews[b.cid];c.showEdit()}},toggleLoadMorePosts:function(){var a=this.$el.find("#posts [data-role=more]");this.updateDom(function(){var b=this.posts.hasNext();b?a.show():a.hide()},this)},handleLoadMore:function(a){a.preventDefault();var b=this,d=$(a.currentTarget);d.addClass("busy"),b.posts.more({success:function(){b.once("rendered",function(){d.removeClass("busy")})},error:function(){d.removeClass("busy")}}),this.lounge.trigger("uiAction:seeMore"),c.sendHostMessage("posts.paginate")},renderLayout:$.noop,toggleNoPosts:function(){this.updateDom(function(){var a=this.posts.models;a.length?$("#no-posts").hide():$("#no-posts").show()},this)},handleSort:function(){$("#posts [data-role=more]").hide(),$("#no-posts").hide(),$("#post-list").addClass("loading").empty()},redrawPosts:function(){var a=this;a.subViews={},a.once("rendered",function(){_.each(e.PostReplyView.open,function(b,c){var d=a.subViews[c];if(d){var e=d.getReplyView();e.textarea.set(b.textarea.get()),b.isOpen()?e.show():e.hide()}})}),a.posts.setPageFor&&a.permalinkOptions&&a.permalinkOptions.postId&&a.posts.setPageFor(a.permalinkOptions.postId,{silent:!0}),a.addPosts(a.posts,{clearDom:!0})},postsShouldBePrepended:function(a){var b=a.length&&a[0];return!!b&&(b.created||!b.id||b.get("isRealtime")||b.requestedByPermalink)},hasQueuedPosts:function(){return this.postsToAppend.length||this.postsToPrepend.length},addPosts:_.decorate(Backbone.collectionAddNormalizer(Backbone.Collection,b.Post),function(a,b,c){var d=this;
if(c.clearDom&&(d.postsToAppend=[],d.postsToPrepend=[],d.postsShouldClearDom=!0),d.postsShouldBePrepended(a)){var e=[];_.each(a,function(a){var b=a.get("parent");b&&d.posts.get(b)?d.postsToPrepend.push(a):e.push(a)}),d.postsToPrepend=e.concat(d.postsToPrepend)}else d.postsToAppend=d.postsToAppend.concat(a);d.state.nextPassTimeoutId||(d.state.nextPassTimeoutId=window.requestAnimationFrame(_.bind(d.addPostsIncremental,d,null)))}),onDeferredViewReady:function(a){var b=this.subViews;b.hasOwnProperty(a)&&b[a].manageMessageHeight(),this.updateDom()},removePost:function(a){if(this.hasQueuedPosts())return this.once("rendered",_.bind(this.removePost,this,a)),void 0;var b=this.subViews[a.cid];b&&(b.remove(),delete this.subViews[a.cid])},addPostsIncremental:function(a){this.state.nextPassTimeoutId=null,this.$postList=$("#post-list"),this.discardRenderProgressIfClearDomRequested();var b=this.getPostModelsForThePass();b.length&&this.renderPass(b,a),this.finishPass(b),this.scheduleNextPass()},discardRenderProgressIfClearDomRequested:function(){this.postsShouldClearDom&&(this.state.clearDomAfterRender=!0,this.postsShouldClearDom=!1,this.state.renderedPosts=[])},getPostModelsForThePass:function(){return this.postsToAppend.length?this.postsToAppend:this.postsToPrepend},renderPass:function(a,b){for(var c=g.TARGET_PROCESS_TIME,d=b||this.calculatePostsForNextRun(c)||g.MINIMUM_POSTS_PER_RUN;d>0;){var e=a.splice(0,d),f=this.timedRenderPosts(e);if(null===f)break;c-=f,d=this.calculatePostsForNextRun(c)}},timedRenderPosts:function(a){if(!a.length)return null;var b=+new Date;Array.prototype.push.apply(this.state.renderedPosts,_.map(a,this.createPostView,this));var c=+new Date-b;return 0>c&&(c=0),this.state.totalElapsedTime+=c,this.state.totalPostsProcessed+=a.length,c||null},createPostView:function(a){var b,c=a.get("parent");c&&(c=this.posts.get(c),b=c&&this.getPostView(c.cid));var d=this.getPostViewClass(),e=new d({parent:b,model:a,thread:this.thread,session:this.session,created:a.created});return this.subViews[a.cid]=e,e.render(),e},getPostViewClass:function(){return a.getLounge().isMobile?d.MobilePostView:e.PostView},calculatePostsForNextRun:function(a){return 0>=a?0:this.state.totalElapsedTime<=0?this.state.totalPostsProcessed:Math.floor(a*this.state.totalPostsProcessed/this.state.totalElapsedTime)},finishPass:function(a){a.length||this.updateDom(function(){if(this.state.clearDomAfterRender&&(this.$postList.empty(),this.state.clearDomAfterRender=!1),this.state.renderedPosts.length){this.removeOldPostsIfRealtime(),this.enablePostTracking(this.state.renderedPosts);var b=a===this.postsToAppend;this.insertPostElements(this.state.renderedPosts,b),this.state.renderedPosts=[]}this.$postList.removeClass("loading"),this.postsToPrepend.length||this.postsToAppend.length||this.trigger("rendered")},this)},removeOldPostsIfRealtime:function(){var a=_.any(this.state.renderedPosts,function(a){return a.model.get("isRealtime")});a&&this.removeOldPosts()},removeOldPosts:function(){if(this.lounge.switches&&this.lounge.switches.enabled("next_realtime_cap")){var a=_.size(this.subViews)-this.STREAMING_MAX_VISIBLE;if(!(0>=a))for(var b,c=this.posts.sortBy(function(a){return moment(a.get("createdAt")).valueOf()}),d=0,e=0;d<c.length&&a>=e;d++)b=this.getPostView(c[d].cid),b&&0===b.childrenNode.children().length&&(this.posts.remove(c[d]),e+=1)}},enablePostTracking:function(a){_.each(a,function(a){a.visible=!0})},insertPostElements:function(a,b){var c=_.groupBy(a,function(a){return!!a.parent});_.each(c[!0],function(a){a.parent.attachChild(a)});var d=_.pluck(c[!1],"$el");b?this.$postList.append(d):this.$postList.prepend(d)},scheduleNextPass:function(){if(this.postsToPrepend.length||this.postsToAppend.length){var a=this.calculatePostsForNextRun(g.TARGET_FIRST_ATTEMPT_TIME);a=Math.max(a,g.MINIMUM_POSTS_PER_RUN),this.state.nextPassTimeoutId=window.requestAnimationFrame(_.bind(this.addPostsIncremental,this,a))}}});return g.TARGET_PROCESS_TIME=30,g.TARGET_FIRST_ATTEMPT_TIME=Math.floor(.8*g.TARGET_PROCESS_TIME),g.MINIMUM_POSTS_PER_RUN=2,{PostCollectionView:g}}),DISQUS.define("next.lounge.views.posts.mobile",function(){"use strict";var a=DISQUS.use("next.lounge.views.posts"),b=function(){},c=a.PostView,d=c.extend({initialize:function(){c.prototype.initialize.apply(this,arguments),this.listenTo(this.session,"change:id",this.updateSessionClass)},updateSessionClass:function(){var a="authored-by-session-user";this.session.user.id===this.model.author.id?this.contentNode.addClass(a):this.contentNode.removeClass(a)},initProfileCard:b,initContextCard:b,initUpvotersCard:b});return{MobilePostView:d}}),this.Handlebars=this.Handlebars||{},this.Handlebars.lounge=this.Handlebars.lounge||{},this.Handlebars.lounge.templates=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n"+"\n",d=c["if"].call(a,a.sessionUserId,{hash:{},inverse:Ne.noop,fn:Ne.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function g(a,b){var d,e,f="";return f+='\n<div class="follow-btn-wrap">\n',e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isSession),{hash:{},inverse:Ne.program(6,j,b),fn:Ne.program(3,h,b),data:b}),(e||0===e)&&(f+=e),f+="\n</div>\n"}function h(a,b){var d,e,f="";return f+="\n",e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isEditable),{hash:{},inverse:Ne.noop,fn:Ne.program(4,i,b),data:b}),(e||0===e)&&(f+=e),f+="\n\n"+"\n"}function i(a,b){var d="";return d+='\n<a href="'+Me(c.g.call(a,"urls.editProfile",{hash:{},data:b}))+'" target="_blank" class="btn follow-btn edit-profile">'+Me(c.t.call(a,gettext("Edit profile"),{hash:{},data:b}))+"</a>\n"}function j(a,b){var d,e,f="";return f+="\n",e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isPrivate),{hash:{},inverse:Ne.program(9,l,b),fn:Ne.program(7,k,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function k(a,b){var d="";return d+='\n<span class="btn follow-btn private">\n<i aria-hidden="true" class="icon-lock"></i>\n<span class="btn-text">'+Me(c.t.call(a,gettext("Private"),{hash:{},data:b}))+"</span>\n</span>\n"}function l(a,b){var d,e,f="";return f+='\n<a href="'+Me((d=a.user,d=null==d||d===!1?d:d.profileUrl,typeof d===Oe?d.apply(a):d))+'" class="btn follow-btn ',e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isFollowing),{hash:{},inverse:Ne.noop,fn:Ne.program(10,m,b),data:b}),(e||0===e)&&(f+=e),f+='" data-action="follow-user" data-user="'+Me((d=a.user,d=null==d||d===!1?d:d.id,typeof d===Oe?d.apply(a):d))+'">\n<span class="btn-text following-text">'+Me(c.t.call(a,gettext("Following"),{hash:{},data:b}))+'</span>\n<span class="btn-text follow-text">'+Me(c.t.call(a,gettext("Follow"),{hash:{},data:b}))+'</span>\n<i aria-hidden="true" class="icon-plus"></i> '+'\n<i aria-hidden="true" class="icon-checkmark"></i>\n</a>\n'}function m(){return"following"}function n(a,b){var d,e="";return e+='\n<a class="close" data-action="dismiss"></a>\n',d=c["if"].call(a,a.safe,{hash:{},inverse:Ne.program(15,p,b),fn:Ne.program(13,o,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function o(a,b){var d="";return d+="\n<span>"+Me(c.html.call(a,a.message,{hash:{},data:b}))+"</span>\n"}function p(a){var b,c="";return c+="\n<span>"+Me((b=a.message,typeof b===Oe?b.apply(a):b))+"</span>\n"}function q(a,b){var d,e,f="";return f+="\n<h5>"+Me(c.t.call(a,gettext("Add to blacklist"),{hash:{},data:b}))+"</h5>\n\n",e=c["if"].call(a,(d=a.post,d=null==d||d===!1?d:d.author,null==d||d===!1?d:d.isRegistered),{hash:{},inverse:Ne.noop,fn:Ne.program(18,r,b),data:b}),(e||0===e)&&(f+=e),f+='\n\n<label><input type="checkbox" name="email" value="'+Me((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.email,typeof d===Oe?d.apply(a):d))+'"> '+Me(c.t.call(a,gettext("Email"),{hash:{},data:b}))+": "+Me((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.email,typeof d===Oe?d.apply(a):d))+'</label>\n\n<label><input type="checkbox" name="ip" value="'+Me((d=a.post,d=null==d||d===!1?d:d.ipAddress,typeof d===Oe?d.apply(a):d))+'"> '+Me(c.t.call(a,gettext("IP Address"),{hash:{},data:b}))+": "+Me((d=a.post,d=null==d||d===!1?d:d.ipAddress,typeof d===Oe?d.apply(a):d))+'</label>\n\n<label><input type="checkbox" name="retroactive" value="1"/> '+Me(c.t.call(a,gettext("Apply retroactively"),{hash:{},data:b}))+'</label>\n\n<div class="actions">\n<button class="btn btn-small" type="submit">'+Me(c.t.call(a,gettext("Save"),{hash:{},data:b}))+'</button>\n<button class="btn btn-small" data-action="cancel">'+Me(c.t.call(a,gettext("Cancel"),{hash:{},data:b}))+"</button>\n</div>\n"}function r(a,b){var d,e="";return e+='\n<label><input type="checkbox" name="user" value="'+Me((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.id,typeof d===Oe?d.apply(a):d))+'" checked="checked"/> '+Me(c.t.call(a,gettext("User"),{hash:{},data:b}))+": "+Me((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.username,typeof d===Oe?d.apply(a):d))+"</label>\n"}function s(a,b){var d="";return d+="\n"+Me(c.t.call(a,gettext("We are unable to post your comment because you have been blocked by %(forumName)s."),{hash:{forumName:a.forumName},data:b}))+'\n<a target="_blank" href="http://help.disqus.com/customer/portal/articles/466223-who-deleted-or-removed-my-comment-">'+Me(c.t.call(a,gettext("Find out more."),{hash:{},data:b}))+"</a>\n"}function t(a,b){var d="";return d+='\n<div id="recaptcha_widget" style="" class="captcha">\n<div class="primary">\n<div class="captcha-image">\n<div id="recaptcha_image"></div>\n</div>\n\n<div class="recaptcha_only_if_incorrect_sol" style="display:none">'+Me(c.t.call(a,gettext("Incorrect please try again"),{hash:{},data:b}))+'</div>\n\n<div class="inputs">\n<button class="btn" type="submit">'+Me(c.t.call(a,gettext("Submit"),{hash:{},data:b}))+'</button>\n<p class="input-wrapper">\n<input type="text" id="recaptcha_response_field" name="recaptcha_response_field" placeholder="'+Me(c.t.call(a,gettext("Enter the words above"),{hash:{},data:b}))+'"/>\n</p>\n</div>\n</div>\n<div class="secondary">\n<p><a href="javascript:Recaptcha.reload()">'+Me(c.t.call(a,gettext("Get another CAPTCHA"),{hash:{},data:b}))+'</a></p>\n<p class="recaptcha_only_if_image"><a href="javascript:Recaptcha.switch_type(\'audio\')">'+Me(c.t.call(a,gettext("Get an audio CAPTCHA"),{hash:{},data:b}))+'</a></p>\n<p class="recaptcha_only_if_audio"><a href="javascript:Recaptcha.switch_type(\'image\')">'+Me(c.t.call(a,gettext("Get an image CAPTCHA"),{hash:{},data:b}))+'</a></p>\n</div>\n\n<div class="actions">\n'+"\n</div>\n</div>\n"}function u(a){var b,c="";return c+="\n<strong>"+Me((b=a.name,typeof b===Oe?b.apply(a):b))+"</strong>\n"}function v(a,b){var d,e="";return e+='\n<a href="'+Me(c.g.call(a,"urls.root",{hash:{},data:b}))+"/forums/"+Me((d=a.forum,d=null==d||d===!1?d:d.id,typeof d===Oe?d.apply(a):d))+'/admin/settings/general/#site-identity-settings">\n'+Me(c.t.call(a,gettext("change your website name"),{hash:{},data:b}))+"</a>"}function w(a,b){var d="";return d+='\n<div class="alert">\n<p>\n'+Me(c.t.call(a,gettext("On Disqus, your site's name is: %(forum)s"),{hash:{forum:{partial:"communityForum",context:a.forum,executePartial:!0}},data:b}))+"\n<br>\n"+Me(c.t.call(a,gettext("Do you want to %(changeYourWebsiteName)s?"),{hash:{changeYourWebsiteName:{partial:"changeYourWebsiteName",context:a,executePartial:!0}},data:b}))+"\n</p>\n</div>\n"}function x(a,b){var d="";return d+='\n<div>\n<div data-role="community-notification">\n'+'\n</div>\n\n<div class="row">\n<h3>'+Me(c.t.call(a,gettext("Top Commenters on %(forum)s"),{hash:{forum:{partial:"communityForum",context:a.forum,executePartial:!0}},data:b}))+'</h3>\n\n<div data-role="top-users">\n'+'\n<a class="see-more hidden" title="'+Me(c.t.call(a,gettext("see more"),{hash:{},data:b}))+'" data-action="see-more">'+Me(c.t.call(a,gettext("see more"),{hash:{},data:b}))+'</a>\n</div>\n\n</div>\n\n<div class="row">\n<h3>'+Me(c.t.call(a,gettext("Top Discussions on %(forum)s"),{hash:{forum:{partial:"communityForum",context:a.forum,executePartial:!0}},data:b}))+'</h3>\n<div data-role="top-threads"></div>\n</div>\n</div>\n'}function y(a,b){var d,e,f="";return f+='\n<div class="tooltip">\n<div class="notch"></div>\n\n',e=c["if"].call(a,(d=a.post,d=null==d||d===!1?d:d.author,null==d||d===!1?d:d.isAnonymous),{hash:{},inverse:Ne.program(35,A,b),fn:Ne.program(33,z,b),data:b}),(e||0===e)&&(f+=e),f+='\n\n<img src="'+Me((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.avatar,d=null==d||d===!1?d:d.cache,typeof d===Oe?d.apply(a):d))+'" class="user" alt="'+Me(c.t.call(a,gettext("Avatar"),{hash:{},data:b}))+'" />\n\n',e=c["if"].call(a,(d=a.post,d=null==d||d===!1?d:d.author,null==d||d===!1?d:d.isAnonymous),{hash:{},inverse:Ne.program(39,C,b),fn:Ne.program(37,B,b),data:b}),(e||0===e)&&(f+=e),f+='\n\n<div class="content">\n<h3>\n',e=c.unless.call(a,(d=a.post,d=null==d||d===!1?d:d.author,null==d||d===!1?d:d.isAnonymous),{hash:{},inverse:Ne.noop,fn:Ne.program(41,D,b),data:b}),(e||0===e)&&(f+=e),f+="\n\n<h3>"+Me((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.name,typeof d===Oe?d.apply(a):d))+"</h3>\n\n",e=c.unless.call(a,(d=a.post,d=null==d||d===!1?d:d.author,null==d||d===!1?d:d.isAnonymous),{hash:{},inverse:Ne.noop,fn:Ne.program(39,C,b),data:b}),(e||0===e)&&(f+=e),f+="\n</h3>\n\n<p>"+Me(c.html.call(a,(d=a.post,null==d||d===!1?d:d.excerpt),{hash:{},data:b}))+"</p>\n</div>\n</div>\n"}function z(){return'\n<div class="avatar">\n'}function A(a){var b,c="";return c+='\n<a href="'+Me((b=a.post,b=null==b||b===!1?b:b.author,b=null==b||b===!1?b:b.profileUrl,typeof b===Oe?b.apply(a):b))+'" class="avatar" data-action="profile" data-user="'+Me((b=a.post,b=null==b||b===!1?b:b.author,b=null==b||b===!1?b:b.id,typeof b===Oe?b.apply(a):b))+'">\n'}function B(){return"\n</div>\n"}function C(){return"\n</a>\n"}function D(a){var b,c="";return c+='\n<a href="'+Me((b=a.post,b=null==b||b===!1?b:b.author,b=null==b||b===!1?b:b.profileUrl,typeof b===Oe?b.apply(a):b))+'" data-action="profile" data-user="'+Me((b=a.post,b=null==b||b===!1?b:b.author,b=null==b||b===!1?b:b.id,typeof b===Oe?b.apply(a):b))+'">\n'}function E(a,b){var d="";return d+='\n<div>\n<ul class="my-disqus-nav">\n<li class="user-vote-count" data-role="notifications-tab">\n<a href="#" title="notifications" data-action="notifications">\n<span class="count"><span data-role="notification-count"></span> '+Me(c.t.call(a,gettext("new"),{hash:{},data:b}))+'</span>\n<span class="label">'+Me(c.t.call(a,gettext("Notifications"),{hash:{},data:b}))+'</span>\n</a>\n</li>\n<li class="user-comment-count active" data-role="network-tab">\n<a href="#" title="network" data-action="network">\n<span class="count">'+Me(c.t.call(a,gettext("Now"),{hash:{},data:b}))+'</span>\n<span class="label">'+Me(c.t.call(a,gettext("in your network"),{hash:{},data:b}))+"</span>\n</a>\n</li>\n</ul>\n\n"+'\n<div data-role="network" data-zone="my-activity-feed"></div>\n\n'+'\n<div data-role="notifications" data-zone="my-notifications"></div>\n</div>\n'}function F(a,b){var d="";return d+='\n<div class="textarea-wrapper" data-role="textarea">\n</div>\n<button class="btn btn-small" type="submit">'+Me(c.t.call(a,gettext("Save Edit"),{hash:{},data:b}))+"</button>\n"}function G(a,b){var d,e,f="";return f+="\n",e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isSession),{hash:{},inverse:Ne.program(54,L,b),fn:Ne.program(48,H,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function H(a,b){var d,e,f="";return f+="\n",e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isEditable),{hash:{},inverse:Ne.noop,fn:Ne.program(49,I,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function I(a,b){var d,e="";return e+='\n<a href="'+Me(c.g.call(a,"urls.editProfile",{hash:{},data:b}))+'"\ntarget="_blank"\nclass="\n',d=c["if"].call(a,a.buttonAsLink,{hash:{},inverse:Ne.program(52,K,b),fn:Ne.program(50,J,b),data:b}),(d||0===d)&&(e+=d),e+='">\n'+Me(c.t.call(a,gettext("Edit profile"),{hash:{},data:b}))+"\n</a>\n"}function J(){return"\npublisher-anchor-color follow-link\n"}function K(){return"\nbtn btn-small\n"}function L(a,b){var d,e,f="";return f+="\n",e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isPrivate),{hash:{},inverse:Ne.program(57,N,b),fn:Ne.program(55,M,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function M(a,b){var d,e="";return e+='\n<span\nclass="btn btn-small follow-btn private">\n<i aria-hidden="true" class="icon-lock"></i>\n<span class="btn-text">\n',d=c.t.call(a,gettext("Private"),{hash:{},data:b}),(d||0===d)&&(e+=d),e+="\n</span>\n</span>\n"}function N(a,b){var d,e,f="";return f+='\n<a href="#" class="\n',d=c["if"].call(a,a.buttonAsLink,{hash:{},inverse:Ne.program(58,O,b),fn:Ne.program(50,J,b),data:b}),(d||0===d)&&(f+=d),f+="\n",e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isFollowing),{hash:{},inverse:Ne.noop,fn:Ne.program(10,m,b),data:b}),(e||0===e)&&(f+=e),f+='"\ndata-action="toggleFollow"\ndata-user="'+Me((d=a.user,d=null==d||d===!1?d:d.id,typeof d===Oe?d.apply(a):d))+'">\n<span class="btn-text following-text">'+Me(c.t.call(a,gettext("Following"),{hash:{},data:b}))+'</span>\n<span class="btn-text follow-text">'+Me(c.t.call(a,gettext("Follow"),{hash:{},data:b}))+'</span>\n<i aria-hidden="true" class="icon-checkmark"></i>\n</a>\n'}function O(){return"\nbtn btn-small follow-btn\n"}function P(a){var b,c="";return c+='\n<span data-user="'+Me((b=a.id,typeof b===Oe?b.apply(a):b))+'" data-role="username">'+Me((b=a.name,typeof b===Oe?b.apply(a):b))+"</span>\n"}function Q(a,b){var d,e,f="";return f+='\n<div class="alert error" style="display:none" role="alert">\n<a class="close" data-action="dismiss-alert" title="'+Me(c.t.call(a,gettext("Dismiss"),{hash:{},data:b}))+'"></a>\n<span>'+'</span>\n</div>\n\n<div class="postbox">\n<div class="avatar">\n',e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isRegistered),{hash:{},inverse:Ne.program(65,S,b),fn:Ne.program(63,R,b),data:b}),(e||0===e)&&(f+=e),f+='\n</div>\n\n<div class="textarea-wrapper" data-role="textarea" dir="auto">\n<div data-role="drag-drop-placeholder" class="media-drag-hover" style="display: none">\n<div class="drag-text">\n&#11015; '+Me(c.t.call(a,gettext("Drag and drop your images here to upload them."),{hash:{},data:b}))+"\n</div>\n</div>\n",e=c["if"].call(a,a.allowMedia,{hash:{},inverse:Ne.noop,fn:Ne.program(67,T,b),data:b}),(e||0===e)&&(f+=e),f+='\n<div class="post-actions">\n<ul class="wysiwyg">\n',e=c["if"].call(a,a.allowMedia,{hash:{},inverse:Ne.noop,fn:Ne.program(69,U,b),data:b}),(e||0===e)&&(f+=e),f+="\n"+"\n</ul>\n"+"\n",e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isRegistered),{hash:{},inverse:Ne.noop,fn:Ne.program(75,Y,b),data:b}),(e||0===e)&&(f+=e),f+='\n</div>\n</div>\n\n<section data-role="auth-or-ident" class="auth-section ',e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isAnonymous),{hash:{},inverse:Ne.noop,fn:Ne.program(78,$,b),data:b}),(e||0===e)&&(f+=e),f+='">\n',e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isAnonymous),{hash:{},inverse:Ne.noop,fn:Ne.program(80,_,b),data:b}),(e||0===e)&&(f+=e),f+="\n",e=c["if"].call(a,a.audienceSyncRequired,{hash:{},inverse:Ne.noop,fn:Ne.program(82,ab,b),data:b}),(e||0===e)&&(f+=e),f+="\n</section>\n</div>\n"}function R(a){var b,c="";return c+='\n<a href="'+Me((b=a.user,b=null==b||b===!1?b:b.profileUrl,typeof b===Oe?b.apply(a):b))+'" class="user" data-action="profile" data-user="'+Me((b=a.user,b=null==b||b===!1?b:b.id,typeof b===Oe?b.apply(a):b))+'">\n<img data-role="user-avatar" data-user="'+Me((b=a.user,b=null==b||b===!1?b:b.id,typeof b===Oe?b.apply(a):b))+'" src="'+Me((b=a.user,b=null==b||b===!1?b:b.avatar,b=null==b||b===!1?b:b.cache,typeof b===Oe?b.apply(a):b))+'"/>\n</a>\n'}function S(a){var b,c="";return c+='\n<span class="user">\n<img data-role="user-avatar" src="'+Me((b=a.user,b=null==b||b===!1?b:b.avatar,b=null==b||b===!1?b:b.cache,typeof b===Oe?b.apply(a):b))+'"/>\n</span>\n'}function T(){var a="";return a+='\n<div class="media-preview empty" data-role="media-preview">\n<ul data-role="media-legacy-list"></ul>\n<ul data-role="media-rich-list"></ul>\n<div class="media-expanded empty" data-role="media-preview-expanded">\n'+'\n<img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="\ndata-role="media-preview-expanded-image">\n</div>\n</div>\n'}function U(a,b){var d,e="";return e+='\n<li>\n<a href="#" tabindex="-1" data-action="attach" class="attach" title="'+Me(c.t.call(a,gettext("Upload Images"),{hash:{},data:b}))+'"><span>'+Me(c.t.call(a,gettext("Attach"),{hash:{},data:b}))+'</span></a>\n<input type="file" data-role="media-upload"\ntabindex="-1"\n',d=c["with"].call(a,"_window_",{hash:{},inverse:Ne.noop,fn:Ne.program(70,V,b),data:b}),(d||0===d)&&(e+=d),e+="\n>\n</li>\n"}function V(a,b){var d,e="";return e+="\n",d=c["if"].call(a,"undefined"==typeof a.FormData,{hash:{},inverse:Ne.program(73,X,b),fn:Ne.program(71,W,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function W(){var a="";return a+="\n"+'\nclass="ie"\nname="attachment"\n'}function X(){return'\nclass="regular"\naccept="image/*"\n'}function Y(a,b){var d,e="";return e+="\n",d=c.unless.call(a,a.audienceSyncRequired,{hash:{},inverse:Ne.noop,fn:Ne.program(76,Z,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function Z(a,b){var d="";return d+='\n<div class="logged-in">\n<section>\n<div class="temp-post" style="text-align: right">\n<button class="btn">\n'+Me(c.t.call(a,gettext("Post as %(name)s"),{hash:{name:{partial:"formUser",context:a.user,executePartial:!0}},data:b}))+"\n</button>\n</div>\n</section>\n</div>\n"}function $(){return"logged-out"}function _(a,b){var e,f="";return f+='\n<div class="connect">\n<h6>'+Me(c.t.call(a,gettext("Sign in with"),{hash:{},data:b}))+"</h6>\n",e=Ne.invokePartial(d.loginButtons,"loginButtons",a,c,d,b),(e||0===e)&&(f+=e),f+="\n</div>\n",e=Ne.invokePartial(d.guestForm,"guestForm",a,c,d,b),(e||0===e)&&(f+=e),f+="\n"}function ab(a,b){var e,f="";return f+="\n",e=Ne.invokePartial(d.audienceSync,"audienceSync",a,c,d,b),(e||0===e)&&(f+=e),f+="\n"}function bb(a,b){var d,e,f="";return f+='\n<ul data-role="login-menu" class="services login-buttons">\n\n',e=c["if"].call(a,a.sso&&(d=a.sso,null==d||d===!1?d:d.url),{hash:{},inverse:Ne.noop,fn:Ne.program(85,cb,b),data:b}),(e||0===e)&&(f+=e),f+='\n\n<li class="auth-disqus">\n<button type="button" data-action="auth:disqus" title="Disqus"><i class="icon-disqus"></i></button>\n</li>\n<li class="auth-facebook">\n<button type="button" data-action="auth:facebook" title="Facebook"><i class="icon-facebook-circle"></i></button>\n</li>\n<li class="auth-twitter">\n<button type="button" data-action="auth:twitter" title="Twitter"><i class="icon-twitter-circle"></i></button>\n</li>\n<li class="auth-google">\n<button type="button" data-action="auth:google" title="Google"><i class="icon-google-plus-circle"></i></button>\n</li>\n<li class="auth-signup">\n<button type="button" data-action="auth:disqus" title="Disqus">Sign up for Disqus</button>\n</li>\n</ul>\n'}function cb(a,b){var d,e,f="";return f+='\n<li class="sso">\n<button type="button" data-action="auth:sso"\ntitle="'+Me((d=a.sso,d=null==d||d===!1?d:d.name,typeof d===Oe?d.apply(a):d))+'"\nclass="',e=c["if"].call(a,(d=a.sso,null==d||d===!1?d:d.button),{hash:{},inverse:Ne.program(88,eb,b),fn:Ne.program(86,db,b),data:b}),(e||0===e)&&(f+=e),f+='">\n',e=c["if"].call(a,(d=a.sso,null==d||d===!1?d:d.button),{hash:{},inverse:Ne.program(92,gb,b),fn:Ne.program(90,fb,b),data:b}),(e||0===e)&&(f+=e),f+="\n</button>\n</li>\n"}function db(){return"image"}function eb(){return"no-image"}function fb(a){var b,c="";return c+='\n<img alt="'+Me((b=a.sso,b=null==b||b===!1?b:b.name,typeof b===Oe?b.apply(a):b))+'" src="'+Me((b=a.sso,b=null==b||b===!1?b:b.button,typeof b===Oe?b.apply(a):b))+'"/>\n'}function gb(a){var b,c="";return c+="\n"+Me((b=a.sso,b=null==b||b===!1?b:b.name,typeof b===Oe?b.apply(a):b))+"\n"}function hb(a,b){var d,e,f="";return f+='\n<div class="guest">\n<h6 class="guest-form-title">\n',d=c["if"].call(a,a.allowAnonPost,{hash:{},inverse:Ne.program(97,jb,b),fn:Ne.program(95,ib,b),data:b}),(d||0===d)&&(f+=d),f+='\n</h6>\n\n<div class="what-is-disqus help-icon">\n<div id="rules" class="tooltip show">\n<h3>'+Me(c.t.call(a,gettext("Disqus is a conversation network"),{hash:{},data:b}))+"</h3>\n<ul>\n<li><span>"+Me(c.t.call(a,gettext("Disqus never moderates or censors. The rules on this community are its own."),{hash:{},data:b}))+"</span></li>\n<li><span>"+Me(c.t.call(a,gettext("Your email is safe with us. It's only used for moderation and optional notifications."),{hash:{},data:b}))+"</span></li>\n<li><span>"+Me(c.t.call(a,gettext("Don't be a jerk or do anything illegal. Everything is easier that way."),{hash:{},data:b}))+'</span></li>\n</ul>\n<p class="clearfix"><a href="http://docs.disqus.com/kb/terms-and-policies/" class="btn btn-small" target="_blank">'+Me(c.t.call(a,gettext("Read full terms and conditions"),{hash:{},data:b}))+'</a></p>\n</div>\n</div>\n\n<p class="input-wrapper">\n<input dir="auto" type="text" placeholder="'+Me(c.t.call(a,gettext("Name"),{hash:{},data:b}))+'" name="author-name" maxlength="30" />\n</p>\n\n<div class="guest-details ',e=c["if"].call(a,a.sso&&(d=a.sso,null==d||d===!1?d:d.url),{hash:{},inverse:Ne.noop,fn:Ne.program(99,kb,b),data:b}),(e||0===e)&&(f+=e),f+='" data-role="guest-details">\n<p class="input-wrapper">\n<input dir="auto" type="email" placeholder="'+Me(c.t.call(a,gettext("Email"),{hash:{},data:b}))+'" name="author-email"/>\n</p>\n\n<p class="input-wrapper">\n<input dir="auto" type="password" placeholder="'+Me(c.t.call(a,gettext("Password"),{hash:{},data:b}))+'" name="author-password"/>\n</p>\n',e=c["if"].call(a,a.allowAnonPost,{hash:{},inverse:Ne.program(103,mb,b),fn:Ne.program(101,lb,b),data:b}),(e||0===e)&&(f+=e),f+='\n\n</div>\n</div>\n<div class="proceed">\n',e=c["if"].call(a,a.allowAnonPost,{hash:{},inverse:Ne.program(107,ob,b),fn:Ne.program(105,nb,b),data:b}),(e||0===e)&&(f+=e),f+="\n</div>\n"}function ib(a,b){var d="";return d+="\n"+Me(c.t.call(a,gettext("or pick a name"),{hash:{},data:b}))+"\n"}function jb(a,b){var d="";return d+="\n"+Me(c.t.call(a,gettext("or register with Disqus"),{hash:{},data:b}))+"\n"}function kb(){return"expanded"}function lb(a,b){var d="";return d+='\n<div class="guest-checkbox">\n<label>\n<input type="checkbox" name="author-guest"/>\n'+Me(c.t.call(a,gettext("I'd rather post as guest"),{hash:{},data:b}))+"\n</label>\n</div>\n"}function mb(){return'\n<input type="checkbox" name="author-guest" style="display:none"/>\n'}function nb(a,b){var d="";return d+='\n<button type="submit" class="btn submit" aria-label="'+Me(c.t.call(a,gettext("Post"),{hash:{},data:b}))+'"><span class="icon-proceed"></span></button>\n<button type="submit" class="btn next" aria-label="'+Me(c.t.call(a,gettext("Next"),{hash:{},data:b}))+'"><span class="icon-proceed"></span></button>\n'}function ob(a,b){var d="";return d+='\n<button type="submit" class="btn submit" aria-label="'+Me(c.t.call(a,gettext("Next"),{hash:{},data:b}))+'"><span class="icon-proceed"></span></button>\n'}function pb(a,b){var d,e="";return e+='\n<div class="audiencesync">\n<h6>'+Me(c.t.call(a,gettext("Connect with %(forumName)s"),{hash:{forumName:a.forumName},data:b}))+'</h6>\n<div class="services">\n<div class="icons-container">\n<img class="icon" alt="Disqus"\nsrc="'+Me("//a.disquscdn.com/next/assets/img/sync-icon.a97d408756a74d139b9d78160ddda973.png")+'">\n<img class="icon" alt="arrow to"\nsrc="'+Me("//a.disquscdn.com/next/assets/img/sync-arrow.f870280459c2d762e3b56d6a8b81aff6.png")+'">\n<img class="icon" alt="'+Me((d=a.forumName,typeof d===Oe?d.apply(a):d))+'"\nsrc="'+Me(c.g.call(a,"urls.root",{hash:{},data:b}))+"/api/applications/icons/"+Me((d=a.apiKey,typeof d===Oe?d.apply(a):d))+'.png">\n</div>\n<p>\n'+Me(c.t.call(a,gettext("%(forumName)s needs permission to access your account."),{hash:{forumName:a.forumName},data:b}))+'\n</p>\n</div>\n<button type="button" data-action="audiencesync"\nclass="proceed btn submit">'+Me(c.t.call(a,gettext("Next"),{hash:{},data:b}))+"</button>\n</div>\n"}function qb(a,b){var d,e,f="";return f+='\n<li class="publisher-border-color">\n<div class="media-box">\n<div class="media-ct">\n<div class="media-surface">\n<a href="'+Me((d=a.media,d=null==d||d===!1?d:d.url,typeof d===Oe?d.apply(a):d))+'" target="_blank">\n<img src="'+Me((d=a.media,d=null==d||d===!1?d:d.thumbnailUrl,typeof d===Oe?d.apply(a):d))+'" alt="',e=c["if"].call(a,(d=a.media,null==d||d===!1?d:d.title),{hash:{},inverse:Ne.program(114,sb,b),fn:Ne.program(112,rb,b),data:b}),(e||0===e)&&(f+=e),f+='">\n</a>\n</div>\n</div>\n</div>\n</li>\n'}function rb(a){var b;return Me((b=a.media,b=null==b||b===!1?b:b.title,typeof b===Oe?b.apply(a):b))}function sb(a,b){return Me(c.t.call(a,gettext("Media attachment"),{hash:{},data:b}))}function tb(a,b){var d,e="";return e+='\n<li class="publisher-border-color" data-media-id="'+Me((d=a.location,typeof d===Oe?d.apply(a):d))+'">\n<div class="media-box">\n<div class="media-ct">\n<div class="media-surface">\n<img src="'+Me((d=a.location,typeof d===Oe?d.apply(a):d))+'?w=128&h=128" alt="'+Me(c.t.call(a,gettext("Media attachment"),{hash:{},data:b}))+'">\n<a href="#" class="media-delete" data-action="detach">&#10005;</a>\n</div>\n</div>\n</div>\n</li>\n'}function ub(a,b){var e,f,g="";return g+='\n<div class="tooltip">\n<div class="notch"></div>\n<a href="'+Me((e=a.user,e=null==e||e===!1?e:e.profileUrl,typeof e===Oe?e.apply(a):e))+'" class="avatar" data-action="profile" data-user="'+Me((e=a.user,e=null==e||e===!1?e:e.id,typeof e===Oe?e.apply(a):e))+'">\n<img data-user="'+Me((e=a.user,e=null==e||e===!1?e:e.id,typeof e===Oe?e.apply(a):e))+'" data-role="user-avatar" src="'+Me((e=a.user,e=null==e||e===!1?e:e.avatar,e=null==e||e===!1?e:e.cache,typeof e===Oe?e.apply(a):e))+'" class="user" alt="'+Me(c.t.call(a,gettext("Avatar"),{hash:{},data:b}))+'" />\n</a>\n<div class="content">\n<h3>\n<a href="'+Me((e=a.user,e=null==e||e===!1?e:e.profileUrl,typeof e===Oe?e.apply(a):e))+'" data-action="profile" data-role="username" data-user="'+Me((e=a.user,e=null==e||e===!1?e:e.id,typeof e===Oe?e.apply(a):e))+'">'+Me((e=a.user,e=null==e||e===!1?e:e.name,typeof e===Oe?e.apply(a):e))+"</a>\n",f=c["if"].call(a,(e=a.user,e=null==e||e===!1?e:e.thread,null==e||e===!1?e:e.canModerate),{hash:{},inverse:Ne.noop,fn:Ne.program(119,vb,b),data:b}),(f||0===f)&&(g+=f),g+="\n</h3>\n\n",f=c["if"].call(a,(e=a.user,null==e||e===!1?e:e.about),{hash:{},inverse:Ne.noop,fn:Ne.program(121,wb,b),data:b}),(f||0===f)&&(g+=f),g+='\n\n\n<p class="stats" data-role="counters">\n',f=c["if"].call(a,null!==(e=a.user,null==e||e===!1?e:e.numPosts)&&null!==(e=a.user,null==e||e===!1?e:e.numLikesReceived),{hash:{},inverse:Ne.noop,fn:Ne.program(123,xb,b),data:b}),(f||0===f)&&(g+=f),g+='\n</p>\n</div>\n<footer data-role="actions">\n',f=Ne.invokePartial(d.hovercardActions,"hovercardActions",a,c,d,b),(f||0===f)&&(g+=f),g+="\n</footer>\n</div>\n"}function vb(a,b){var d="";return d+='<span class="badge moderator">'+Me(c.t.call(a,gettext("MOD"),{hash:{},data:b}))+"</span>"}function wb(a,b){var d,e="";return e+='\n<p class="bio">'+Me(c.truncate.call(a,(d=a.user,null==d||d===!1?d:d.about),80,{hash:{},data:b}))+"</p>\n"}function xb(a,b){var e,f="";return f+="\n",e=Ne.invokePartial(d.hovercardCounters,"hovercardCounters",a,c,d,b),(e||0===e)&&(f+=e),f+="\n"}function yb(a,b){var d,e,f="";return f+="\n",e=c["if"].call(a,1===(d=a.user,null==d||d===!1?d:d.numPosts),{hash:{},inverse:Ne.program(128,Ab,b),fn:Ne.program(126,zb,b),data:b}),(e||0===e)&&(f+=e),f+='\n<span class="bullet"></span>\n',e=c["if"].call(a,1===(d=a.user,null==d||d===!1?d:d.numLikesReceived),{hash:{},inverse:Ne.program(132,Cb,b),fn:Ne.program(130,Bb,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function zb(a,b){var d="";return d+="\n"+Me(c.t.call(a,gettext("1 comment"),{hash:{},data:b}))+"\n"}function Ab(a,b){var d,e="";return e+="\n"+Me(c.t.call(a,gettext("%(numPosts)s comments"),{hash:{numPosts:(d=a.user,null==d||d===!1?d:d.numPosts)},data:b}))+"\n"}function Bb(a,b){var d="";return d+="\n"+Me(c.t.call(a,gettext("1 vote"),{hash:{},data:b}))+"\n"}function Cb(a,b){var d,e="";return e+="\n"+Me(c.t.call(a,gettext("%(numLikesReceived)s votes"),{hash:{numLikesReceived:(d=a.user,null==d||d===!1?d:d.numLikesReceived)},data:b}))+"\n"
}function Db(a,b){var d,e,f="";return f+='\n<a href="'+Me((d=a.user,d=null==d||d===!1?d:d.profileUrl,typeof d===Oe?d.apply(a):d))+'" class="full-profile" data-action="profile" data-user="'+Me((d=a.user,d=null==d||d===!1?d:d.id,typeof d===Oe?d.apply(a):d))+'">'+Me(c.t.call(a,gettext("Full profile"),{hash:{},data:b}))+"</a>\n\n",e=c["if"].call(a,a.showFollowButton,{hash:{},inverse:Ne.noop,fn:Ne.program(135,Eb,b),data:b}),(e||0===e)&&(f+=e),f+="\n\n&nbsp;\n"}function Eb(a,b){var e,f="";return f+="\n"+"\n",e=Ne.invokePartial(d.followButtonSmall,"followButtonSmall",a,c,d,b),(e||0===e)&&(f+=e),f+="\n"}function Fb(a,b){var e,f="";return f+='\n<div id="layout">\n<header id="main-nav">\n',e=Ne.invokePartial(d.topNavigation,"topNavigation",a,c,d,b),(e||0===e)&&(f+=e),f+="\n</header>\n\n"+'\n<section id="conversation" data-role="main" data-zone="thread">\n',e=Ne.invokePartial(d.mainNavigation,"mainNavigation",a,c,d,b),(e||0===e)&&(f+=e),f+='\n\n<div id="posts">\n'+'\n<div id="form"></div>\n\n'+'\n<ul id="highlighted-post" class="post-list"></ul>\n\n<button class="alert realtime" style="display: none" data-role="realtime-notification">\n'+"\n</button>\n\n"+'\n<div id="no-posts" style="display:none">'+Me(c.t.call(a,gettext("Be the first to comment."),{hash:{},data:b}))+'</div>\n\n<ul id="post-list" class="post-list loading">\n</ul>\n\n<div class="load-more" data-role="more" style="display:none">\n<a href="#" data-action="more-posts" class="btn">'+Me(c.t.call(a,gettext("Load more comments"),{hash:{},data:b}))+'</a>\n</div>\n</div>\n\n</section>\n\n<section id="community" style="display:none" data-role="main" data-outbound-link="embed:community">\n'+'\n</section>\n\n<section id="dashboard" style="display:none" data-role="main">\n'+"\n"+'\n<p style="line-height: 1.4">'+Me(c.t.call(a,gettext("Nothing for you here ... yet. But as you comment with Disqus and follow\nother Disqus users, you will start to receive notifications here, as well as a personalized\nfeed of activity by you and the people you follow. So get out there and participate in\nsome discussions!"),{hash:{},data:b}))+'</p>\n</section>\n\n<section id="profile" style="display:none" data-role="main">\n</section>\n\n<div id="discovery"></div>\n\n<div id="footer">\n<ul>\n<li class="logo"><a href="http://disqus.com" title="'+Me(c.t.call(a,gettext("Powered by Disqus"),{hash:{},data:b}))+'">'+Me(c.t.call(a,gettext("Powered by Disqus"),{hash:{},data:b}))+'</a></li>\n<li id="thread-subscribe-button" class="email"> '+'\n<div class="default">\n<a href="#" data-action="subscribe" title="'+Me(c.t.call(a,gettext("Subscribe and get email updates from this discussion"),{hash:{},data:b}))+'"><i aria-hidden="true" class="icon-mail"></i><span class="clip">'+Me(c.t.call(a,gettext("Subscribe"),{hash:{},data:b}))+'</span> <i aria-hidden="true" class="icon-checkmark"></i></a>\n</div>\n<div class="form">\n<div class="input-wrapper"><input id="thread-subscribe-email" type="email" placeholder="'+Me(c.t.call(a,gettext("yourname@email.com"),{hash:{},data:b}))+'"/></div>\n</div>\n</li>\n<li class="install">\n<a href="https://disqus.com/websites/?utm_source='+Me((e=a.forum,e=null==e||e===!1?e:e.id,typeof e===Oe?e.apply(a):e))+'&utm_medium=Disqus-Footer" target="_blank">\n<i aria-hidden="true" class="icon-disqus"></i>\n<span class="clip">'+Me(c.t.call(a,gettext("Add Disqus to your site"),{hash:{},data:b}))+"</span>\n</a>\n</li>\n</ul>\n</div>\n</div>\n"}function Gb(a,b){var d,e="";return e+='\n<li data-role="post-sort" class="dropdown sorting">\n<a href="#" class="dropdown-toggle" data-nav="conversation" data-toggle="dropdown">\n',d=c["if"].call(a,"popular"===a.order,{hash:{},inverse:Ne.noop,fn:Ne.program(140,Hb,b),data:b}),(d||0===d)&&(e+=d),e+="\n",d=c["if"].call(a,"desc"===a.order,{hash:{},inverse:Ne.noop,fn:Ne.program(142,Ib,b),data:b}),(d||0===d)&&(e+=d),e+="\n",d=c["if"].call(a,"asc"===a.order,{hash:{},inverse:Ne.noop,fn:Ne.program(144,Jb,b),data:b}),(d||0===d)&&(e+=d),e+='\n<span class="caret"></span>\n</a>\n<ul class="dropdown-menu">\n<li ',d=c["if"].call(a,"popular"===a.order,{hash:{},inverse:Ne.noop,fn:Ne.program(146,Kb,b),data:b}),(d||0===d)&&(e+=d),e+='>\n<a href="#" data-action="sort" data-sort="popular">'+Me(c.t.call(a,gettext("Best"),{hash:{},data:b}))+"</a>\n</li>\n\n<li ",d=c["if"].call(a,"desc"===a.order,{hash:{},inverse:Ne.noop,fn:Ne.program(146,Kb,b),data:b}),(d||0===d)&&(e+=d),e+='>\n<a href="#" data-action="sort" data-sort="desc">'+Me(c.t.call(a,gettext("Newest"),{hash:{},data:b}))+"</a>\n</li>\n\n<li ",d=c["if"].call(a,"asc"===a.order,{hash:{},inverse:Ne.noop,fn:Ne.program(146,Kb,b),data:b}),(d||0===d)&&(e+=d),e+='>\n<a href="#" data-action="sort" data-sort="asc">'+Me(c.t.call(a,gettext("Oldest"),{hash:{},data:b}))+"</a>\n</li>\n</ul>\n</li>\n"}function Hb(a,b){return Me(c.t.call(a,gettext("Sort by Best"),{hash:{},data:b}))}function Ib(a,b){return Me(c.t.call(a,gettext("Sort by Newest"),{hash:{},data:b}))}function Jb(a,b){return Me(c.t.call(a,gettext("Sort by Oldest"),{hash:{},data:b}))}function Kb(){return'class="selected"'}function Lb(a,b){var d,e="";return e+="\n",d=c["if"].call(a,1===a.count,{hash:{},inverse:Ne.program(149,Mb,b),fn:Ne.program(126,zb,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function Mb(a,b){var d="";return d+="\n"+Me(c.t.call(a,gettext("%(numPosts)s comments"),{hash:{numPosts:a.count},data:b}))+"\n"}function Nb(a,b){var d,e,f="";return f+='\n<div id="discovery-top"></div>\n\n<div id="onboard"></div>\n\n<nav class="nav nav-primary">\n<ul>\n<li class="tab-conversation active">\n'+'\n<a href="#" data-role="post-count" class="publisher-nav-color" data-nav="conversation">\n',e=c["with"].call(a,"count",(d=a.thread,null==d||d===!1?d:d.posts),{hash:{},inverse:Ne.noop,fn:Ne.program(152,Ob,b),data:b}),(e||0===e)&&(f+=e),f+='\n</a>\n</li>\n<li class="tab-community">\n<a href="#" class="publisher-nav-color" data-nav="community" id="community-tab">\n',e=c["with"].call(a,a.forum,{hash:{},inverse:Ne.noop,fn:Ne.program(154,Pb,b),data:b}),(e||0===e)&&(f+=e),f+='\n</a>\n</li>\n<li class="dropdown user-menu" data-role="logout">\n<!-- rendered dynamically -->\n</li>\n<li class="notification-menu" data-role="notification-menu">\n<!-- rendered dynamically -->\n</li>\n</ul>\n</nav>\n'}function Ob(a,b){var e,f="";return f+="\n",e=Ne.invokePartial(d.postCount,"postCount",a,c,d,b),(e||0===e)&&(f+=e),f+="\n"}function Pb(a,b){var e;return e=Ne.invokePartial(d.communityForum,"communityForum",a,c,d,b),e||0===e?e:""}function Qb(a,b){var d="";return d+='\n<a href="#" data-action="upvote" title="'+Me(c.t.call(a,gettext("Favorite this discussion"),{hash:{},data:b}))+'">\n<span class="label">'+Me(c.t.call(a,gettext("Favorite"),{hash:{},data:b}))+'</span>\n<span class="icon-star"></span>\n<span class="icon-check"></span>\n</a>\n'}function Rb(a,b){var e,f="";return f+='\n<div class="nav nav-secondary">\n<ul>\n',e=Ne.invokePartial(d.postSort,"postSort",a,c,d,b),(e||0===e)&&(f+=e),f+='\n\n<li id="thread-votes" class="favorite pull-right">\n<!-- rendered dynamically -->\n</li>\n\n<li id="thread-share-menu" class="dropdown share-menu">\n<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="'+Me(c.t.call(a,gettext("Share"),{hash:{},data:b}))+'">\n<span class="label">'+Me(c.t.call(a,gettext("Share"),{hash:{},data:b}))+'</span> <span class="icon-export"></span>\n</a>\n<ul class="share-menu dropdown-menu pull-right">\n<li class="share">'+Me(c.t.call(a,gettext("Share this discussion on"),{hash:{},data:b}))+'\n<ul>\n<li class="twitter">\n<a data-action="share:twitter"\nhref="#">Twitter</a>\n</li>\n<li class="facebook">\n<a data-action="share:facebook" href="#">Facebook</a>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n'}function Sb(a,b){var d="";return d+='\n<div>\n<ul class="network-activity" data-role="entries"></ul>\n\n<div data-role="no-activity" style="display:none">\n'+Me(c.t.call(a,gettext("You have no activity."),{hash:{},data:b}))+'\n</div>\n\n<div class="load-more" data-role="more-activity" style="display:none">\n<a href="#" data-action="more" class="btn">'+Me(c.t.call(a,gettext("Load more activity"),{hash:{},data:b}))+"</a>\n</div>\n</div>\n"}function Tb(a,b){var d,e="";return e+='\n<li class="network-activity-group">\n<h5>'+Me(c.t.call(a,gettext("Discussion on %(forum)s"),{hash:{forum:{partial:"networkForumLink",context:a.thread,executePartial:!0}},data:b}))+"</h5>\n\n"+'\n\n<h4><a href="'+Me((d=a.thread,d=null==d||d===!1?d:d.link,typeof d===Oe?d.apply(a):d))+'">'+Me(c.html.call(a,(d=a.thread,null==d||d===!1?d:d.title),{hash:{},data:b}))+'</a></h4>\n\n<ul data-role="posts" class="post-list"/>\n</li>\n'}function Ub(a,b){var d,e,f="";return f+='\n<li class="post">\n<div class="post-content ',e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.parent),{hash:{},inverse:Ne.noop,fn:Ne.program(165,Vb,b),data:b}),(e||0===e)&&(f+=e),f+='">\n<div class="avatar">\n<img src="'+Me((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.avatar,d=null==d||d===!1?d:d.cache,typeof d===Oe?d.apply(a):d))+'" class="source-avatar"/>\n',e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.parent),{hash:{},inverse:Ne.noop,fn:Ne.program(167,Wb,b),data:b}),(e||0===e)&&(f+=e),f+='\n</div>\n<div class="post-body">\n<header>\n',e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.parent),{hash:{},inverse:Ne.program(171,Yb,b),fn:Ne.program(169,Xb,b),data:b}),(e||0===e)&&(f+=e),f+='\n\n<span class="bullet" aria-hidden="true"></span>\n<a href="'+Me((d=a.post,d=null==d||d===!1?d:d.url,typeof d===Oe?d.apply(a):d))+'" class="time-ago" title="'+Me((d=a.post,d=null==d||d===!1?d:d.formattedCreatedAt,typeof d===Oe?d.apply(a):d))+'">'+Me((d=a.post,d=null==d||d===!1?d:d.relativeCreatedAt,typeof d===Oe?d.apply(a):d))+'</a>\n</header>\n<div class="post-message publisher-anchor-color">\n'+Me(c.html.call(a,(d=a.post,null==d||d===!1?d:d.message),{hash:{},data:b}))+"\n</div>\n</div>\n</div>\n</li>\n"}function Vb(){return"post-reply"}function Wb(a){var b,c="";return c+='\n<img src="'+Me((b=a.post,b=null==b||b===!1?b:b.parent,b=null==b||b===!1?b:b.author,b=null==b||b===!1?b:b.avatar,b=null==b||b===!1?b:b.cache,typeof b===Oe?b.apply(a):b))+'" class="target-avatar"/>\n'}function Xb(a,b){var d,e="";return e+="\n"+Me(c.t.call(a,gettext("%(user)s replied to %(author)s"),{hash:{user:{partial:"profileLink",context:(d=a.post,null==d||d===!1?d:d.author),executePartial:!0},author:{partial:"profileLink",context:(d=a.post,d=null==d||d===!1?d:d.parent,null==d||d===!1?d:d.author),executePartial:!0}},data:b}))+"\n"}function Yb(a,b){var d,e,f="";return f+="\n"+"\n",e=c["with"].call(a,(d=a.post,null==d||d===!1?d:d.author),{hash:{},inverse:Ne.noop,fn:Ne.program(172,Zb,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function Zb(a,b){var e,f="";return f+="\n",e=Ne.invokePartial(d.profileLink,"profileLink",a,c,d,b),(e||0===e)&&(f+=e),f+="\n"}function $b(a){var b,c="";return c+='\n<strong><a href="'+Me((b=a.forum,b=null==b||b===!1?b:b.url,typeof b===Oe?b.apply(a):b))+'">'+Me((b=a.forum,b=null==b||b===!1?b:b.name,typeof b===Oe?b.apply(a):b))+"</a></strong>\n"}function _b(a,b){var d,e="";return e+='\n<span class="publisher-anchor-color">\n',d=c["if"].call(a,a.isRegistered,{hash:{},inverse:Ne.program(179,bc,b),fn:Ne.program(177,ac,b),data:b}),(d||0===d)&&(e+=d),e+="\n</span>\n"}function ac(a){var b,c="";return c+='\n<a href="'+Me((b=a.profileUrl,typeof b===Oe?b.apply(a):b))+'" data-action="profile" data-user="'+Me((b=a.id,typeof b===Oe?b.apply(a):b))+'">'+Me((b=a.name,typeof b===Oe?b.apply(a):b))+"</a>\n"}function bc(a){var b,c="";return c+="\n"+Me((b=a.name,typeof b===Oe?b.apply(a):b))+"\n"}function cc(a,b){var d,e,f="";return f+="\n",e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isRegistered),{hash:{},inverse:Ne.program(184,ec,b),fn:Ne.program(182,dc,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function dc(){return'\n<a href="#" class="notification-container" data-nav="dashboard">\n<span class="notification-icon icon-comment"></span>\n<span class="notification-count" data-role="notification-count" style="display:none"></span>\n</a>\n'}function ec(a,b){var d,e,f="";return f+="\n",e=c["if"].call(a,(d=a.user,d=null==d||d===!1?d:d.thread,null==d||d===!1?d:d.canReply),{hash:{},inverse:Ne.noop,fn:Ne.program(185,fc,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function fc(){var a="";return a+="\n"+'\n<a href="#" class="notification-container" data-action="auth:disqus">\n<span class="notification-icon icon-disqus"></span>\n'}function gc(a,b){var d="";return d+='\n<div>\n<ul class="notifications" data-role="entries"></ul>\n\n<div data-role="no-notifications" style="display:none">\n'+Me(c.t.call(a,gettext("You have no notifications."),{hash:{},data:b}))+'\n</div>\n\n<div class="load-more" data-role="more-notifications" style="display:none">\n<a href="#" data-action="more" class="btn">'+Me(c.t.call(a,gettext("Load more notifications"),{hash:{},data:b}))+"</a>\n</div>\n</div>\n"}function hc(a,b){var d,e,f="";return f+='\n<li class="notification ',e=c.unless.call(a,(d=a.notification,null==d||d===!1?d:d.isRead),{hash:{},inverse:Ne.noop,fn:Ne.program(190,ic,b),data:b}),(e||0===e)&&(f+=e),f+='">\n<div class="indicator"></div>\n\n',e=c["if"].call(a,(d=a.notification,null==d||d===!1?d:d.post),{hash:{},inverse:Ne.program(194,kc,b),fn:Ne.program(192,jc,b),data:b}),(e||0===e)&&(f+=e),f+="\n</li>\n"}function ic(){return"unseen"}function jc(a,b){var d,e="";return e+="\n"+'\n\n<div class="avatar">\n<img src="'+Me((d=a.notification,d=null==d||d===!1?d:d.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.avatar,d=null==d||d===!1?d:d.cache,typeof d===Oe?d.apply(a):d))+'" />\n</div>\n<p>\n'+Me(c.t.call(a,gettext("%(user)s has replied to you on %(article)s"),{hash:{user:{partial:"profileLink",context:(d=a.notification,d=null==d||d===!1?d:d.post,null==d||d===!1?d:d.author),executePartial:!0},article:{partial:"postLink",context:(d=a.notification,null==d||d===!1?d:d.post),executePartial:!0}},data:b}))+'\n<p class="notification-meta">'+Me((d=a.notification,d=null==d||d===!1?d:d.relativeCreatedAt,typeof d===Oe?d.apply(a):d))+'\n<span class="bullet" aria-hidden="true"></span> <a href="'+Me((d=a.notification,d=null==d||d===!1?d:d.post,d=null==d||d===!1?d:d.forum,d=null==d||d===!1?d:d.url,typeof d===Oe?d.apply(a):d))+'">'+Me((d=a.notification,d=null==d||d===!1?d:d.post,d=null==d||d===!1?d:d.forum,d=null==d||d===!1?d:d.name,typeof d===Oe?d.apply(a):d))+"</a>\n</p>\n"}function kc(a,b){var d,e="";return e+="\n"+'\n<div class="avatar">\n<img src="https://twimg0-a.akamaihd.net/profile_images/2305121474/zcrps8sb7b8zk6ezamf5.png"/>\n</div>\n<p class="publisher-anchor-color">'+Me(c.html.call(a,(d=a.notification,d=null==d||d===!1?d:d.formatted,null==d||d===!1?d:d.text),{hash:{},data:b}))+'</p>\n<p class="notification-meta">\n'+Me((d=a.notification,d=null==d||d===!1?d:d.relativeCreatedAt,typeof d===Oe?d.apply(a):d))+"\n</p>\n"}function lc(a,b){var d,e="";return e+="\n",d=c["if"].call(a,"undefined"==typeof a.url,{hash:{},inverse:Ne.program(199,nc,b),fn:Ne.program(197,mc,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function mc(a,b){var d,e="";return e+="\n"+Me(c.html.call(a,(d=a.thread,null==d||d===!1?d:d.title),{hash:{},data:b}))+"\n"}function nc(a,b){var d,e="";return e+='\n<a class="publisher-anchor-color" href="'+Me((d=a.url,typeof d===Oe?d.apply(a):d))+'">'+Me(c.html.call(a,(d=a.thread,null==d||d===!1?d:d.title),{hash:{},data:b}))+"</a>\n"}function oc(a,b){var d="";return d+='\n<div class="notice">\n<div class="notice-wrapper">\n<span class="icon icon-disqus"></span>\n<a data-action="onboard" href="#" class="message">'+Me(c.t.call(a,gettext("Your Disqus account has been created! Learn more about using Disqus on your favorite communities."),{hash:{},data:b}))+'</a>\n<a data-action="onboard" href="#" class="btn btn-primary">'+Me(c.t.call(a,gettext("Get Started"),{hash:{},data:b}))+'</a>\n</div>\n</div>\n<a class="dismiss" data-action="close" href="#" title=\''+Me(c.t.call(a,gettext("Dismiss"),{hash:{},data:b}))+'\'>Dismiss <span aria-label="Dismiss" class="cross"></span></a>\n'}function pc(a,b){var e,f,g="";return g+="\n",e=Ne.invokePartial(d.postWrapperTop,"postWrapperTop",a,c,d,b),(e||0===e)&&(g+=e),g+="\n\n",e=Ne.invokePartial(d.postUserAvatar,"postUserAvatar",a,c,d,b),(e||0===e)&&(g+=e),g+='\n<div class="post-body">\n<header>\n<span class="post-byline">\n',f=c["if"].call(a,(e=a.post,e=null==e||e===!1?e:e.author,null==e||e===!1?e:e.isRegistered),{hash:{},inverse:Ne.program(210,uc,b),fn:Ne.program(204,qc,b),data:b}),(f||0===f)&&(g+=f),g+="\n\n",f=c["if"].call(a,(e=a.post,null==e||e===!1?e:e.parent),{hash:{},inverse:Ne.noop,fn:Ne.program(212,vc,b),data:b}),(f||0===f)&&(g+=f),g+='\n</span>\n\n<div class="post-meta">\n<span class="bullet time-ago-bullet" aria-hidden="true"></span>\n\n',f=c["if"].call(a,(e=a.post,null==e||e===!1?e:e.id),{hash:{},inverse:Ne.program(216,xc,b),fn:Ne.program(214,wc,b),data:b}),(f||0===f)&&(g+=f),g+="\n</div>\n\n",f=c["if"].call(a,(e=a.post,null==e||e===!1?e:e.isHighlighted),{hash:{},inverse:Ne.noop,fn:Ne.program(218,yc,b),data:b}),(f||0===f)&&(g+=f),g+="\n\n",f=Ne.invokePartial(d.postMenu,"postMenu",a,c,d,b),(f||0===f)&&(g+=f),g+="\n</header>\n\n"+'\n<div class="post-body-inner">\n'+'\n<div class="post-message-container" data-role="message-container">\n'+'\n<div class="publisher-anchor-color" data-role="message-content">\n<div class="post-message ',f=c["if"].call(a,a.loading,{hash:{},inverse:Ne.noop,fn:Ne.program(220,zc,b),data:b}),(f||0===f)&&(g+=f),g+='"\ndata-role="message" dir="auto">\n',f=c["if"].call(a,""===(e=a.post,null==e||e===!1?e:e.message),{hash:{},inverse:Ne.program(224,Bc,b),fn:Ne.program(222,Ac,b),data:b}),(f||0===f)&&(g+=f),g+='\n</div>\n\n<div class="post-media"><ul data-role="post-media-list"></ul></div>\n</div>\n</div>\n<a class="see-more hidden" title="'+Me(c.t.call(a,gettext("see more"),{hash:{},data:b}))+'" data-action="see-more">'+Me(c.t.call(a,gettext("see more"),{hash:{},data:b}))+"</a>\n</div>\n\n<footer>\n",f=Ne.invokePartial(d.postFooter,"postFooter",a,c,d,b),(f||0===f)&&(g+=f),g+="\n</footer>\n</div>\n\n",f=Ne.invokePartial(d.postWrapperBottom,"postWrapperBottom",a,c,d,b),(f||0===f)&&(g+=f),g+="\n\n"}function qc(a,b){var d,e,f="";return f+='\n<span class="author publisher-anchor-color"><a href="#" data-action="profile" data-user="'+Me((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.id,typeof d===Oe?d.apply(a):d))+'" data-role="username">'+Me((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.name,typeof d===Oe?d.apply(a):d))+"</a></span>\n",e=c["if"].call(a,(d=a.post,d=null==d||d===!1?d:d.author,null==d||d===!1?d:d.badge),{hash:{},inverse:Ne.program(207,sc,b),fn:Ne.program(205,rc,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function rc(a){var b,c="";return c+='\n<span class="badge" data-type="tracked-badge">'+Me((b=a.post,b=null==b||b===!1?b:b.author,b=null==b||b===!1?b:b.badge,typeof b===Oe?b.apply(a):b))+"</span>\n"}function sc(a,b){var d,e,f="";return f+="\n",e=c["if"].call(a,(d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.thread,null==d||d===!1?d:d.canModerate),{hash:{},inverse:Ne.noop,fn:Ne.program(208,tc,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function tc(a,b){var d="";return d+='\n<span class="badge moderator">'+Me(c.t.call(a,gettext("Mod"),{hash:{},data:b}))+"</span>\n"}function uc(a){var b,c="";return c+='\n<span class="author">'+Me((b=a.post,b=null==b||b===!1?b:b.author,b=null==b||b===!1?b:b.name,typeof b===Oe?b.apply(a):b))+"</span>\n"}function vc(a){var b,c="";return c+='\n<span><a href="#comment-'+Me((b=a.post,b=null==b||b===!1?b:b.parent,typeof b===Oe?b.apply(a):b))+'" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> '+Me((b=a.parentAuthorName,typeof b===Oe?b.apply(a):b))+"</a></span>\n"}function wc(a){var b,c="";return c+='\n<a href="#comment-'+Me((b=a.post,b=null==b||b===!1?b:b.id,typeof b===Oe?b.apply(a):b))+'" data-role="relative-time" class="time-ago" title="'+Me((b=a.post,b=null==b||b===!1?b:b.formattedCreatedAt,typeof b===Oe?b.apply(a):b))+'">\n'+Me((b=a.post,b=null==b||b===!1?b:b.relativeCreatedAt,typeof b===Oe?b.apply(a):b))+"\n</a>\n"}function xc(a){var b,c="";return c+='\n<span class="time-ago" data-role="relative-time" title="'+Me((b=a.post,b=null==b||b===!1?b:b.formattedCreatedAt,typeof b===Oe?b.apply(a):b))+'">\n'+Me((b=a.post,b=null==b||b===!1?b:b.relativeCreatedAt,typeof b===Oe?b.apply(a):b))+"\n</span>\n"}function yc(a,b){var d="";return d+='\n<div class="highlighted-byline">\n<i aria-hidden="true" class="icon icon-mobile icon-highlight"></i>\n<span class="text">'+Me(c.t.call(a,gettext("Highlighted by %(forum)s"),{hash:{forum:a.forumName},data:b}))+"</span>\n</div>\n"}function zc(){return"loading"}function Ac(a,b){var d="";return d+="\n<p><i>"+Me(c.t.call(a,gettext("This comment has no content."),{hash:{},data:b}))+"</i></p>\n"}function Bc(a,b){var d,e="";return e+="\n"+Me(c.html.call(a,(d=a.post,null==d||d===!1?d:d.message),{hash:{},data:b}))+"\n"}function Cc(a,b){var d,e,f="";return f+='\n<div data-role="post-content" class="post-content\n',e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.isRealtime),{hash:{},inverse:Ne.noop,fn:Ne.program(227,Dc,b),data:b}),(e||0===e)&&(f+=e),f+="\n",e=c["if"].call(a,(d=a.session,(null==d||d===!1?d:d.isRegistered)&&(d=a.post,d=null==d||d===!1?d:d.author,(null==d||d===!1?d:d.id)===(d=a.session,null==d||d===!1?d:d.id))),{hash:{},inverse:Ne.noop,fn:Ne.program(229,Ec,b),data:b}),(e||0===e)&&(f+=e),f+="\n",e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.isFlaggedByUser),{hash:{},inverse:Ne.noop,fn:Ne.program(231,Fc,b),data:b}),(e||0===e)&&(f+=e),f+='\n">\n<div class="indicator"></div>\n'}function Dc(){return"new"}function Ec(){return"authored-by-session-user"}function Fc(){return"user-reported"}function Gc(){var a="";return a+='\n<div data-role="blacklist-form"></div>\n<div class="reply-form-container" data-role="reply-form"></div>\n</div>\n\n'+'\n<ul data-role="children" class="children"/>\n'}function Hc(a,b){var d,e,f="";return f+="\n"+'\n<div data-role="post-media">\n'+'\n<a class="media-button media-button-expand publisher-color publisher-border-color" href="'+Me((d=a.media,d=null==d||d===!1?d:d.url,typeof d===Oe?d.apply(a):d))+'" rel="nofollow" target="_blank" data-action="expand"\ntitle="',e=c["if"].call(a,(d=a.media,null==d||d===!1?d:d.title),{hash:{},inverse:Ne.noop,fn:Ne.program(236,Ic,b),data:b}),(e||0===e)&&(f+=e),f+='">\n',e=c["if"].call(a,(d=a.model,null==d||d===!1?d:d.providerIcon),{hash:{},inverse:Ne.noop,fn:Ne.program(239,Kc,b),data:b}),(e||0===e)&&(f+=e),f+="\n"+Me((d=a.model,d=null==d||d===!1?d:d.providerExpandMessage,typeof d===Oe?d.apply(a):d))+'\n</a>\n<a class="media-button media-button-contract publisher-color publisher-border-color" href="#" target="_blank" data-action="contract">\n<i class="icon-cancel publisher-background-color"></i> '+Me((d=a.model,d=null==d||d===!1?d:d.providerCollapseMessage,typeof d===Oe?d.apply(a):d))+"\n</a>\n"+'\n<div class="media-content-loader" data-role="content-loader"></div>\n'+'\n<div data-role="content-placeholder" class="media-content-placeholder"></div>\n</div>\n'}function Ic(a,b){var d,e,f="";return e=c["if"].call(a,(d=a.media,null==d||d===!1?d:d.providerName),{hash:{},inverse:Ne.noop,fn:Ne.program(237,Jc,b),data:b}),(e||0===e)&&(f+=e),f+=Me((d=a.media,d=null==d||d===!1?d:d.title,typeof d===Oe?d.apply(a):d))}function Jc(a){var b,c="";return c+=Me((b=a.media,b=null==b||b===!1?b:b.providerName,typeof b===Oe?b.apply(a):b))+" &ndash; "}function Kc(a){var b,c="";return c+='<i class="'+Me((b=a.model,b=null==b||b===!1?b:b.providerIcon,typeof b===Oe?b.apply(a):b))+' publisher-background-color"></i>'}function Lc(a){var b,c="";return c+='\n<a href="#" class="media-force-load" data-action="force-load"><i class="'+Me((b=a.model,b=null==b||b===!1?b:b.providerIcon,typeof b===Oe?b.apply(a):b))+'"></i></a>\n'}function Mc(a,b){var d,e,f="";return f+='\n<a href="'+Me((d=a.imageUrl,typeof d===Oe?d.apply(a):d))+'" target="_blank" rel="nofollow">\n'+'\n<img src="'+Me((d=a.thumbnailUrl,typeof d===Oe?d.apply(a):d))+'" data-post="'+Me((d=a.postId,typeof d===Oe?d.apply(a):d))+'" ',e=c["if"].call(a,(d=a.model,null==d||d===!1?d:d.deferredHeight),{hash:{},inverse:Ne.noop,fn:Ne.program(244,Nc,b),data:b}),(e||0===e)&&(f+=e),f+="/>\n</a>\n"}function Nc(a){var b,c="";return c+=' height="'+Me((b=a.model,b=null==b||b===!1?b:b.deferredHeight,typeof b===Oe?b.apply(a):b))+'" '}function Oc(a,b){var d,e,f="";return f+="\n",e=c["if"].call(a,(d=a.model,null==d||d===!1?d:d.deferred),{hash:{},inverse:Ne.program(249,Qc,b),fn:Ne.program(247,Pc,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function Pc(a){var b,c="";return c+="\n"+'\n<a href="'+Me((b=a.href,typeof b===Oe?b.apply(a):b))+'" rel="nofollow">'+Me((b=a.text,typeof b===Oe?b.apply(a):b))+"</a>\n"}function Qc(a,b){var d,e,f="";return f+="\n"+'\n<a href="'+Me((d=a.href,typeof d===Oe?d.apply(a):d))+'" class="post-media-link" data-action="expand-collapse-media" rel="nofollow">',e=c["if"].call(a,(d=a.model,null==d||d===!1?d:d.providerIcon),{hash:{},inverse:Ne.noop,fn:Ne.program(250,Rc,b),data:b}),(e||0===e)&&(f+=e),f+=Me((d=a.mediaLinkText,typeof d===Oe?d.apply(a):d)),e=c["if"].call(a,a.domain,{hash:{},inverse:Ne.noop,fn:Ne.program(252,Sc,b),data:b}),(e||0===e)&&(f+=e),f+="</a>\n"}function Rc(a){var b,c="";return c+='<i class="'+Me((b=a.model,b=null==b||b===!1?b:b.providerIcon,typeof b===Oe?b.apply(a):b))+'"></i>'}function Sc(a){var b,c="";return c+='<span class="post-media-link-domain"> &mdash; '+Me((b=a.domain,typeof b===Oe?b.apply(a):b))+"</span>"}function Tc(a){var b,c="";return c+='\n<meta name="twitter:widgets:csp" content="on">\n<blockquote class="twitter-tweet" data-theme="'+Me((b=a.theme,typeof b===Oe?b.apply(a):b))+'" data-link-color="'+Me((b=a.linkColor,typeof b===Oe?b.apply(a):b))+'" lang="'+Me((b=a.language,typeof b===Oe?b.apply(a):b))+'">\n<a href="'+Me((b=a.url,typeof b===Oe?b.apply(a):b))+'"></a>\n</blockquote>\n<script src="//platform.twitter.com/widgets.js"></script>\n'}function Uc(a,b){var d,e,f="";return f+="\n",e=c.each.call(a,(d=a.post,null==d||d===!1?d:d.media),{hash:{},inverse:Ne.noop,fn:Ne.programWithDepth(Vc,b,a),data:b}),(e||0===e)&&(f+=e),f+="\n"}function Vc(a,b,d){var e,f="";return f+="\n",e=c["if"].call(a,"1"===a.type||"5"===a.type,{hash:{},inverse:Ne.noop,fn:Ne.programWithDepth(Wc,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n",e=c["if"].call(a,"2"===a.type,{hash:{},inverse:Ne.noop,fn:Ne.programWithDepth(Xc,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n",e=c["if"].call(a,"4"===a.type,{hash:{},inverse:Ne.noop,fn:Ne.programWithDepth(Yc,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n"}function Wc(a,b,c){var d,e="";return e+="\n"+'\n<li><a href="'+Me((d=a.location,typeof d===Oe?d.apply(a):d))+'" target="_blank"><img data-src="'+Me((d=a.location,typeof d===Oe?d.apply(a):d))+"?w="+Me((d=c.thumbnailWidth,typeof d===Oe?d.apply(a):d))+"&h="+Me((d=c.thumbnailHeight,typeof d===Oe?d.apply(a):d))+'" data-post="'+Me((d=c.post,d=null==d||d===!1?d:d.cid,typeof d===Oe?d.apply(a):d))+'" /></a></li>\n'}function Xc(a,b,c){var d,e="";return e+="\n"+'\n<li><a href="http://www.youtube.com/v/'+Me((d=a.location,typeof d===Oe?d.apply(a):d))+'&hl=en_US&fs=1&" target="_blank"><img data-src="'+Me((d=a.thumbnailURL,typeof d===Oe?d.apply(a):d))+'" data-post="'+Me((d=c.post,d=null==d||d===!1?d:d.cid,typeof d===Oe?d.apply(a):d))+'" /></a></li>\n'}function Yc(a,b,c){var d,e="";return e+="\n"+'\n<li><a href="'+Me((d=a.metadata,d=null==d||d===!1?d:d.url,typeof d===Oe?d.apply(a):d))+'" target="_blank"><img data-src="'+Me((d=a.metadata,d=null==d||d===!1?d:d.medium,typeof d===Oe?d.apply(a):d))+'" data-post="'+Me((d=c.post,d=null==d||d===!1?d:d.cid,typeof d===Oe?d.apply(a):d))+'" /></a></li>\n'}function Zc(a,b){var d,e,f="";return f+='\n<a href="#" class="vote-up ',e=c["if"].call(a,(d=a.post,(null==d||d===!1?d:d.userScore)>0),{hash:{},inverse:Ne.noop,fn:Ne.program(265,$c,b),data:b}),(e||0===e)&&(f+=e),f+=" count-"+Me((d=a.post,d=null==d||d===!1?d:d.likes,typeof d===Oe?d.apply(a):d))+'" data-action="upvote" title="',e=c.unless.call(a,(d=a.post,null==d||d===!1?d:d.likes),{hash:{},inverse:Ne.noop,fn:Ne.program(267,_c,b),data:b}),(e||0===e)&&(f+=e),f+='">\n<span class="updatable count" data-role="likes">'+Me((d=a.post,d=null==d||d===!1?d:d.likes,typeof d===Oe?d.apply(a):d))+'</span>\n<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>\n</a>\n<a class="vote-down ',e=c["if"].call(a,(d=a.post,(null==d||d===!1?d:d.userScore)<0),{hash:{},inverse:Ne.noop,fn:Ne.program(269,ad,b),data:b}),(e||0===e)&&(f+=e),f+=" count-"+Me((d=a.post,d=null==d||d===!1?d:d.dislikes,typeof d===Oe?d.apply(a):d))+'" ',e=c["if"].call(a,(d=a.session,null==d||d===!1?d:d.isRegistered),{hash:{},inverse:Ne.noop,fn:Ne.program(271,bd,b),data:b}),(e||0===e)&&(f+=e),f+=' title="'+Me(c.t.call(a,gettext("Vote down"),{hash:{},data:b}))+'">\n',e=c.unless.call(a,a.hideDownvoteNumber,{hash:{},inverse:Ne.noop,fn:Ne.program(273,cd,b),data:b}),(e||0===e)&&(f+=e),f+='\n<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>\n',e=c["if"].call(a,(d=a.session,null==d||d===!1?d:d.isAnonymous),{hash:{},inverse:Ne.noop,fn:Ne.program(275,dd,b),data:b}),(e||0===e)&&(f+=e),f+="\n</a>\n"}function $c(){return"upvoted"}function _c(a,b){return Me(c.t.call(a,gettext("Vote up"),{hash:{},data:b}))}function ad(){return"downvoted"}function bd(){return'href="#" data-action="downvote"'}function cd(a){var b,c="";return c+='\n<span class="updatable count" data-role="dislikes">'+Me((b=a.post,b=null==b||b===!1?b:b.dislikes,typeof b===Oe?b.apply(a):b))+"</span>\n"}function dd(a,b){var d="";return d+='<span class="tooltip">'+Me(c.t.call(a,gettext("You must sign in to down-vote this post."),{hash:{},data:b}))+"</span>"}function ed(a,b){var d,e,f="";return f+='\n<ul class="post-menu dropdown" data-role="menu">\n<li class="collapse">\n<a href="#" data-action="collapse" title="'+Me(c.t.call(a,gettext("Collapse"),{hash:{},data:b}))+'"><span></span></a>\n</li>\n<li class="expand">\n<a href="#" data-action="collapse" title="'+Me(c.t.call(a,gettext("Expand"),{hash:{},data:b}))+'"><span>+</span></a>\n</li>\n\n',e=c["if"].call(a,(d=a.post,(null==d||d===!1?d:d.id)&&(d=a.post,(null==d||d===!1?d:d.isMinimized)!==!0)&&(d=a.post,(null==d||d===!1?d:d.isDeleted)!==!0)),{hash:{},inverse:Ne.noop,fn:Ne.program(278,fd,b),data:b}),(e||0===e)&&(f+=e),f+="\n</ul>\n"}function fd(a,b){var d,e,f="";return f+='\n<li class="',e=c["if"].call(a,(d=a.session,d=null==d||d===!1?d:d.thread,null==d||d===!1?d:d.canModerate),{hash:{},inverse:Ne.noop,fn:Ne.program(279,gd,b),data:b}),(e||0===e)&&(f+=e),f+='"\nrole="menu">\n',e=c["if"].call(a,(d=a.session,d=null==d||d===!1?d:d.thread,null==d||d===!1?d:d.canModerate),{hash:{},inverse:Ne.program(291,nd,b),fn:Ne.program(281,hd,b),data:b}),(e||0===e)&&(f+=e),f+="\n</li>\n"}function gd(){return"moderator-menu-options"}function hd(a,b){var d,e,f="";return f+='\n<a class="dropdown-toggle" data-toggle="dropdown" href="#"><b\nclass="caret moderator-menu-options"></b></a>\n<ul class="dropdown-menu">\n<li><a href="#" data-action="spam">'+Me(c.t.call(a,gettext("Mark as Spam"),{hash:{},data:b}))+'</a></li>\n<li><a href="#" data-action="delete">'+Me(c.t.call(a,gettext("Delete"),{hash:{},data:b}))+'</a> </li>\n<li><a href="#" data-action="blacklist">'+Me(c.t.call(a,gettext("Blacklist"),{hash:{},data:b}))+'</a> </li>\n<li>\n<a href="'+Me(c.g.call(a,"urls.moderate",{hash:{},data:b}))+"#/approved/search/id:"+Me((d=a.post,d=null==d||d===!1?d:d.id,typeof d===Oe?d.apply(a):d))+'"\ntarget="_blank">'+Me(c.t.call(a,gettext("Moderate"),{hash:{},data:b}))+"</a>\n</li>\n\n",e=c["if"].call(a,a.isHighlightingEnabled,{hash:{},inverse:Ne.noop,fn:Ne.program(282,id,b),data:b}),(e||0===e)&&(f+=e),f+="\n</ul>\n"}function id(a,b){var d,e,f="";return f+='\n<li class="highlight-toggle">\n<a href="#"\ndata-action="',e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.isHighlighted),{hash:{},inverse:Ne.program(285,kd,b),fn:Ne.program(283,jd,b),data:b}),(e||0===e)&&(f+=e),f+='">\n',e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.isHighlighted),{hash:{},inverse:Ne.program(289,md,b),fn:Ne.program(287,ld,b),data:b}),(e||0===e)&&(f+=e),f+="\n</a>\n</li>\n"
}function jd(){return"unhighlight"}function kd(){return"highlight"}function ld(a,b){var d="";return d+="\n"+Me(c.t.call(a,gettext("Stop featuring"),{hash:{},data:b}))+"\n"}function md(a,b){var d="";return d+="\n"+Me(c.t.call(a,gettext("Feature this comment"),{hash:{},data:b}))+"\n"}function nd(a,b){var d,e,f="";return f+="\n",e=c["if"].call(a,(d=a.session,(null==d||d===!1?d:d.isRegistered)&&(d=a.post,null==d||d===!1?d:d.author)&&(d=a.post,d=null==d||d===!1?d:d.author,(null==d||d===!1?d:d.id)===(d=a.session,null==d||d===!1?d:d.id))),{hash:{},inverse:Ne.program(294,pd,b),fn:Ne.program(292,od,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function od(a,b){var d="";return d+='\n<a class="dropdown-toggle" data-toggle="dropdown"\nhref="#"><b class="caret"></b></a>\n<ul class="dropdown-menu">\n<li><a href="#" data-action="delete">'+Me(c.t.call(a,gettext("Delete"),{hash:{},data:b}))+'</a></li>\n<li><a href="#" data-action="flag">'+Me(c.t.call(a,gettext("Flag as inappropriate"),{hash:{},data:b}))+"</a></li>\n</ul>\n"}function pd(a,b){var d="";return d+='\n<a class="dropdown-toggle" href="#" data-action="flag"\ndata-role="flag" title="'+Me(c.t.call(a,gettext("Flag as inappropriate"),{hash:{},data:b}))+'">\n<i aria-hidden="true" class="icon icon-flag"></i>\n</a>\n'}function qd(a,b){var d,e,f="";return f+="\n",e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.id),{hash:{},inverse:Ne.noop,fn:Ne.program(297,rd,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function rd(a,b){var e,f,g="";return g+='\n<menu>\n<li class="realtime" data-role="realtime-notification:'+Me((e=a.post,e=null==e||e===!1?e:e.id,typeof e===Oe?e.apply(a):e))+'">\n<span style="display:none;" class="realtime-replies"></span>\n<a style="display:none;" href="#" class="btn btn-small"></a>\n'+'\n</li>\n\n<li class="voting" data-role="voting">\n',f=Ne.invokePartial(d.postVotes,"postVotes",a,c,d,b),(f||0===f)&&(g+=f),g+='\n</li>\n<li class="bullet" aria-hidden="true"></li>\n\n',f=c["if"].call(a,(e=a.post,null==e||e===!1?e:e.canBeEdited),{hash:{},inverse:Ne.noop,fn:Ne.program(298,sd,b),data:b}),(f||0===f)&&(g+=f),g+="\n\n",f=c["if"].call(a,(e=a.post,null==e||e===!1?e:e.canBeRepliedTo),{hash:{},inverse:Ne.noop,fn:Ne.program(300,td,b),data:b}),(f||0===f)&&(g+=f),g+='\n\n<li class="share">\n<a class="toggle"><i class="icon icon-mobile icon-share"></i><span class="text">'+Me(c.t.call(a,gettext("Share"),{hash:{},data:b}))+' </span></a>\n<ul>\n<li class="twitter"><a href="#" data-action="share:twitter">Twitter</a></li>\n<li class="facebook"><a href="#" data-action="share:facebook">Facebook</a></li>\n<li class="link"><a href="#comment-'+Me((e=a.post,e=null==e||e===!1?e:e.id,typeof e===Oe?e.apply(a):e))+'">'+Me(c.t.call(a,gettext("Link"),{hash:{},data:b}))+"</a></li>\n</ul>\n</li>\n</menu>\n"}function sd(a,b){var d="";return d+='\n<li class="edit">\n<a href="#" data-action="edit">\n<i class="icon icon-mobile icon-pencil"></i><span class="text">'+Me(c.t.call(a,gettext("Edit"),{hash:{},data:b}))+'</span></a></li>\n<li class="bullet" aria-hidden="true"></li>\n'}function td(a,b){var d="";return d+='\n<li class="reply">\n<a href="#" data-action="reply">\n<i class="icon icon-mobile icon-reply"></i><span class="text">'+Me(c.t.call(a,gettext("Reply"),{hash:{},data:b}))+'</span></a></li>\n<li class="bullet" aria-hidden="true"></li>\n'}function ud(a,b){var d,e,f="";return f+="\n",e=c["if"].call(a,(d=a.post,d=null==d||d===!1?d:d.author,(null==d||d===!1?d:d.isRegistered)&&(d=a.post,(null==d||d===!1?d:d.isMinimized)!==!0)),{hash:{},inverse:Ne.program(305,wd,b),fn:Ne.program(303,vd,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function vd(a,b){var d,e="";return e+='\n<div class="avatar hovercard">\n<a href="'+Me((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.profileUrl,typeof d===Oe?d.apply(a):d))+'" class="user"\ndata-action="profile" data-user="'+Me((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.id,typeof d===Oe?d.apply(a):d))+'">\n<img data-role="user-avatar" data-user="'+Me((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.id,typeof d===Oe?d.apply(a):d))+'" src="'+Me((d=a.defaultAvatarUrl,typeof d===Oe?d.apply(a):d))+'" data-src="'+Me((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.avatar,d=null==d||d===!1?d:d.cache,typeof d===Oe?d.apply(a):d))+'"\nalt="'+Me(c.t.call(a,gettext("Avatar"),{hash:{},data:b}))+'"/>\n</a>\n</div>\n'}function wd(a,b){var d,e="";return e+='\n<div class="avatar">\n'+'\n<div class="user"><img src="'+Me((d=a.defaultAvatarUrl,typeof d===Oe?d.apply(a):d))+'"\nclass="user" alt="'+Me(c.t.call(a,gettext("Avatar"),{hash:{},data:b}))+'"/></div>\n</div>\n'}function xd(a,b){var d="";return d+="\n"+"\n"+Me(c.t.call(a,gettext("Success! This comment will now be featured above the thread. (Refresh in a few minutes to see it.)"),{hash:{},data:b}))+"\n"}function yd(a,b){var e,f="";return f+="\n",e=Ne.invokePartial(d.postWrapperTop,"postWrapperTop",a,c,d,b),(e||0===e)&&(f+=e),f+='\n\n<div class="avatar">\n<img data-src="'+Me(c.g.call(a,"urls.avatar.generic",{hash:{},data:b}))+'" class="user" alt="'+Me(c.t.call(a,gettext("Avatar"),{hash:{},data:b}))+'" />\n</div>\n<div class="post-body">\n<div class="post-message">\n<p>'+Me(c.t.call(a,gettext("This comment was deleted."),{hash:{},data:b}))+'</p>\n</div>\n\n<header>\n<div class="post-meta">\n'+"\n"+Me(c.t.call(a,gettext("This comment was deleted."),{hash:{},data:b}))+"\n</div>\n\n",e=Ne.invokePartial(d.postMenu,"postMenu",a,c,d,b),(e||0===e)&&(f+=e),f+="\n</header>\n</div>\n\n",e=Ne.invokePartial(d.postWrapperBottom,"postWrapperBottom",a,c,d,b),(e||0===e)&&(f+=e),f+="\n"}function zd(a,b){var e,f,g="";return g+="\n",e=Ne.invokePartial(d.postWrapperTop,"postWrapperTop",a,c,d,b),(e||0===e)&&(g+=e),g+="\n\n",e=Ne.invokePartial(d.postUserAvatar,"postUserAvatar",a,c,d,b),(e||0===e)&&(g+=e),g+='\n<div class="post-body">\n<div class="post-message publisher-anchor-color">\n',f=c.unless.call(a,a.created||(e=a.post,null==e||e===!1?e:e.isApproved),{hash:{},inverse:Ne.program(314,Bd,b),fn:Ne.program(312,Ad,b),data:b}),(f||0===f)&&(g+=f),g+='\n</div>\n\n<header>\n<div class="post-meta">\n'+"\n"+Me(c.t.call(a,gettext("This comment is awaiting moderation."),{hash:{},data:b}))+"\n</div>\n\n",f=Ne.invokePartial(d.postMenu,"postMenu",a,c,d,b),(f||0===f)&&(g+=f),g+="\n</header>\n</div>\n\n",f=Ne.invokePartial(d.postWrapperBottom,"postWrapperBottom",a,c,d,b),(f||0===f)&&(g+=f),g+="\n"}function Ad(a,b){var d="";return d+="\n<p>"+Me(c.t.call(a,gettext("This comment is awaiting moderation."),{hash:{},data:b}))+' <a href="#" data-action="reveal">'+Me(c.t.call(a,gettext("Show comment."),{hash:{},data:b}))+"</a></p>\n"}function Bd(a,b){var d,e,f="";return f+="\n",e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.isApproved),{hash:{},inverse:Ne.program(317,Dd,b),fn:Ne.program(315,Cd,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function Cd(a,b){var d="";return d+="\n<p>"+Me(c.t.call(a,gettext("Comment score below threshold."),{hash:{},data:b}))+' <a href="#" data-action="reveal">'+Me(c.t.call(a,gettext("Show comment."),{hash:{},data:b}))+"</a></p>\n"}function Dd(a,b){var d="";return d+="\n<p>"+Me(c.t.call(a,gettext("Your comment is awaiting moderation."),{hash:{},data:b}))+' <a href="#" data-action="reveal">'+Me(c.t.call(a,gettext("See your comment."),{hash:{},data:b}))+'</a>  <a href="http://help.disqus.com/customer/portal/articles/466223" class="help-icon" title="'+Me(c.t.call(a,gettext("Why?"),{hash:{},data:b}))+'" target="_blank"></a> </p>\n'}function Ed(a,b){var d="";return d+='\n<a href="#" class="btn btn-small play pause" data-action="realtime:toggle"><span></span>'+Me(c.t.call(a,gettext("Realtime"),{hash:{},data:b}))+"</a>\n"}function Fd(a,b){var d,e="";return e+="\n",d=c["if"].call(a,1===a.comments,{hash:{},inverse:Ne.program(324,Hd,b),fn:Ne.program(322,Gd,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function Gd(a,b){var d="";return d+="\n"+Me(c.t.call(a,gettext("Show One New Comment"),{hash:{},data:b}))+"\n"}function Hd(a,b){var d="";return d+="\n"+Me(c.t.call(a,gettext("Show %(comments)s New Comments"),{hash:{comments:a.comments},data:b}))+"\n"}function Id(a,b){var d,e="";return e+="\n",d=c["if"].call(a,1===a.replies,{hash:{},inverse:Ne.program(329,Kd,b),fn:Ne.program(327,Jd,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function Jd(a,b){var d="";return d+='\n<span class="indicator"></span>'+Me(c.t.call(a,gettext("Show 1 new reply"),{hash:{},data:b}))+"\n"}function Kd(a,b){var d="";return d+='\n<span class="indicator"></span>'+Me(c.t.call(a,gettext("Show %(replies)s new replies"),{hash:{replies:a.replies},data:b}))+"\n"}function Ld(a,b){var d,e="";return e+="\n<!doctype html>\n\n<html>\n<style>\nhtml * {\nmargin: 0;\npadding: 0;\ncursor: pointer;\n}\n\ndiv {\ntext-align: center;\nfont-family: \"Helvetica Neue\", Helvetica, sans-serif;\nborder: 2px solid #ccc;\nbackground: #f4f4f4;\nbackground-color: rgba(248, 248, 248, 0.98);\nbackground-repeat: repeat-x;\nbackground-image: -khtml-gradient(linear, left top, left bottom, from(rgba(253, 253, 253, 0.8)), to(rgba(248, 248, 248, 0.98)));\nbackground-image: -moz-linear-gradient(top, rgba(253, 253, 253, 0.8), rgba(248, 248, 248, 0.98));\nbackground-image: -ms-linear-gradient(top, rgba(253, 253, 253, 0.8), rgba(248, 248, 248, 0.98));\nbackground-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(253, 253, 253, 0.8)), color-stop(100%, rgba(248, 248, 248, 0.98)));\nbackground-image: -webkit-linear-gradient(top, rgba(253, 253, 253, 0.8), rgba(248, 248, 248, 0.98));\nbackground-image: -o-linear-gradient(top, rgba(253, 253, 253, 0.8), rgba(248, 248, 248, 0.98));\nbackground-image: linear-gradient(top, rgba(253, 253, 253, 0.8), rgba(248, 248, 248, 0.98));\nfilter: progid:DXImageTransform.Microsoft.gradient(startColorstr='rgba(253, 253, 253, 0.8)', endColorstr='rgba(248, 248, 248, 0.98)', GradientType=0);\n-webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\n-moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\nbox-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\ncolor: #777;\npadding: 7px 0;\nmargin: 0;\nfilter: alpha(opacity=90);\n-khtml-opacity: 0.9;\n-moz-opacity: 0.9;\nopacity: 0.9;\ncursor: pointer;\nfont-size: 13px;\nline-height: 1;\nz-index: 1000;\n}\n\ndiv.north {\nborder-top: 0;\n-webkit-border-radius: 0 0 4px 4px;\n-moz-border-radius: 0 0 4px 4px;\nborder-radius: 0 0 4px 4px;\n}\n\ndiv.south {\nborder-bottom: 0;\n-webkit-border-radius: 4px 4px 0 0;\n-moz-border-radius: 4px 4px 0 0;\nborder-radius: 4px 4px 0 0;\n}\n</style>\n\n<div class=\""+Me((d=a.orientation,typeof d===Oe?d.apply(a):d))+'" id="message">'+Me(c.t.call(a,gettext("This text should be here."),{hash:{},data:b}))+"</div>\n</html>\n"}function Md(a,b){var d,e="";return e+="\n",d=c["if"].call(a,"north"===a.orientation,{hash:{},inverse:Ne.program(339,Qd,b),fn:Ne.program(334,Nd,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function Nd(a,b){var d,e="";return e+="\n",d=c["if"].call(a,1===a.num,{hash:{},inverse:Ne.program(337,Pd,b),fn:Ne.program(335,Od,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function Od(a,b){var d="";return d+="\n<p>"+Me(c.t.call(a,gettext("One new comment above."),{hash:{},data:b}))+"</p>\n"}function Pd(a,b){var d="";return d+="\n<p>"+Me(c.t.call(a,gettext("%(num)s new comments above."),{hash:{num:a.num},data:b}))+"</p>\n"}function Qd(a,b){var d,e="";return e+="\n",d=c["if"].call(a,1===a.num,{hash:{},inverse:Ne.program(342,Sd,b),fn:Ne.program(340,Rd,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function Rd(a,b){var d="";return d+="\n<p>"+Me(c.t.call(a,gettext("One new comment below."),{hash:{},data:b}))+"</p>\n"}function Sd(a,b){var d="";return d+="\n<p>"+Me(c.t.call(a,gettext("%(num)s new comments below."),{hash:{num:a.num},data:b}))+"</p>\n"}function Td(a,b){var d="";return d+='\n<ul class="suggestions">\n<li class="header">\n<h5>'+Me(c.t.call(a,gettext("in this conversation"),{hash:{},data:b}))+"</h5>\n</li>\n</ul>\n"}function Ud(a,b){var d,e="";return e+='\n<li data-cid="'+Me((d=a.cid,typeof d===Oe?d.apply(a):d))+'">\n<img src="'+Me((d=a.avatar,d=null==d||d===!1?d:d.cache,typeof d===Oe?d.apply(a):d))+'" class="avatar">\n<span>'+Me(c.any.call(a,a.name,a.username,{hash:{},data:b}))+"</span>\n</li>\n"}function Vd(a,b){var d,e,f="";return f+='\n<div>\n<div class="avatar">\n',e=c["if"].call(a,(d=a.author,null==d||d===!1?d:d.isRegistered),{hash:{},inverse:Ne.program(351,Xd,b),fn:Ne.program(349,Wd,b),data:b}),(e||0===e)&&(f+=e),f+="\n</div>\n\n<div>\n<p>\n<strong>\n",e=c["if"].call(a,(d=a.author,null==d||d===!1?d:d.isRegistered),{hash:{},inverse:Ne.program(355,Zd,b),fn:Ne.program(353,Yd,b),data:b}),(e||0===e)&&(f+=e),f+="\n</strong>\n&mdash; "+Me(c.html.call(a,a.message,{hash:{},data:b}))+"\n</p>\n</div>\n</div>\n"}function Wd(a,b){var d,e="";return e+='\n<a href="'+Me((d=a.author,d=null==d||d===!1?d:d.profileUrl,typeof d===Oe?d.apply(a):d))+'" class="user" data-action="profile" data-user="'+Me((d=a.author,d=null==d||d===!1?d:d.id,typeof d===Oe?d.apply(a):d))+'">\n<img data-src="'+Me((d=a.author,d=null==d||d===!1?d:d.avatar,d=null==d||d===!1?d:d.cache,typeof d===Oe?d.apply(a):d))+'" alt="'+Me(c.t.call(a,gettext("Avatar"),{hash:{},data:b}))+'"/>\n</a>\n'}function Xd(a,b){var d,e="";return e+='\n<div class="user">\n<img data-src="'+Me((d=a.author,d=null==d||d===!1?d:d.avatar,d=null==d||d===!1?d:d.cache,typeof d===Oe?d.apply(a):d))+'" class="user" alt="'+Me(c.t.call(a,gettext("Avatar"),{hash:{},data:b}))+'"/>\n</div>\n'}function Yd(a,b){var d,e="";return e+='\n<a href="'+Me((d=a.author,d=null==d||d===!1?d:d.profileUrl,typeof d===Oe?d.apply(a):d))+'" class="user" data-action="profile" data-user="'+Me((d=a.author,d=null==d||d===!1?d:d.id,typeof d===Oe?d.apply(a):d))+'">\n'+Me(c.any.call(a,(d=a.author,null==d||d===!1?d:d.name),(d=a.author,null==d||d===!1?d:d.username),{hash:{},data:b}))+"</a>\n"}function Zd(a,b){var d,e="";return e+='\n<span class="user">'+Me(c.any.call(a,(d=a.author,null==d||d===!1?d:d.name),(d=a.author,null==d||d===!1?d:d.username),{hash:{},data:b}))+"</span>\n"}function $d(a,b){var e,f,g="";return g+='\n<li class="top-user">\n<div class="avatar">\n',f=c["if"].call(a,(e=a.user,null==e||e===!1?e:e.isRegistered),{hash:{},inverse:Ne.program(360,ae,b),fn:Ne.program(358,_d,b),data:b}),(f||0===f)&&(g+=f),g+='\n</div>\n\n<div class="profile-card-text">\n<h5>\n<span>\n',f=c["if"].call(a,(e=a.user,null==e||e===!1?e:e.isRegistered),{hash:{},inverse:Ne.program(364,ce,b),fn:Ne.program(362,be,b),data:b}),(f||0===f)&&(g+=f),g+='\n</span>\n</h5>\n\n<span class="post-count">\n',f=c["if"].call(a,1===(e=a.user,null==e||e===!1?e:e.numPosts),{hash:{},inverse:Ne.noop,fn:Ne.program(126,zb,b),data:b}),(f||0===f)&&(g+=f),g+="\n\n",f=c["if"].call(a,(e=a.user,(null==e||e===!1?e:e.numPosts)>=2),{hash:{},inverse:Ne.noop,fn:Ne.program(128,Ab,b),data:b}),(f||0===f)&&(g+=f),g+="\n</span>\n\n",f=Ne.invokePartial(d.followButtonSmall,"followButtonSmall",a,c,d,b),(f||0===f)&&(g+=f),g+="\n\n</div>\n</li>\n"}function _d(a,b){var d,e="";return e+='\n<a href="#" class="user" data-action="profile" data-user="'+Me((d=a.user,d=null==d||d===!1?d:d.id,typeof d===Oe?d.apply(a):d))+'">\n<img data-role="user-avatar" data-user="'+Me((d=a.user,d=null==d||d===!1?d:d.id,typeof d===Oe?d.apply(a):d))+'" data-src="'+Me((d=a.user,d=null==d||d===!1?d:d.avatar,d=null==d||d===!1?d:d.cache,typeof d===Oe?d.apply(a):d))+'" alt="'+Me(c.t.call(a,gettext("Avatar"),{hash:{},data:b}))+'"/>\n</a>\n'}function ae(a,b){var d,e="";return e+='\n<div class="user">\n<img data-src="'+Me((d=a.user,d=null==d||d===!1?d:d.avatar,d=null==d||d===!1?d:d.cache,typeof d===Oe?d.apply(a):d))+'" class="user" alt="'+Me(c.t.call(a,gettext("Avatar"),{hash:{},data:b}))+'"/>\n</div>\n'}function be(a,b){var d,e="";return e+='\n<a href="'+Me((d=a.user,d=null==d||d===!1?d:d.profileUrl,typeof d===Oe?d.apply(a):d))+'" data-action="profile" data-user="'+Me((d=a.user,d=null==d||d===!1?d:d.id,typeof d===Oe?d.apply(a):d))+'" data-role="username">\n'+Me(c.any.call(a,(d=a.user,null==d||d===!1?d:d.name),(d=a.user,null==d||d===!1?d:d.username),{hash:{},data:b}))+"</a>\n"}function ce(a,b){var d,e="";return e+="\n"+Me(c.any.call(a,(d=a.author,null==d||d===!1?d:d.name),(d=a.author,null==d||d===!1?d:d.username),{hash:{},data:b}))+"\n"}function de(a,b){var d,e,f="";return f+='\n<li data-role="thread-'+Me((d=a.id,typeof d===Oe?d.apply(a):d))+'">\n\n'+'\n\n<h4><span class="publisher-anchor-color"><a href="'+Me((d=a.url,typeof d===Oe?d.apply(a):d))+'">'+Me(c.html.call(a,a.title,{hash:{},data:b}))+'</a></span></h4>\n\n<ul class="meta">\n<li class="likes">\n<a href="'+Me((d=a.url,typeof d===Oe?d.apply(a):d))+'">\n<span class="icon-star"></span>\n'+Me(c.t.call(a,gettext("%(numLikes)s starred this"),{hash:{numLikes:a.numLikes},data:b}))+"\n</a>\n</li>\n\n",e=c["if"].call(a,a.numPosts>0,{hash:{},inverse:Ne.noop,fn:Ne.program(367,ee,b),data:b}),(e||0===e)&&(f+=e),f+='\n\n<li class="bullet"></li>\n\n<li class="time">'+Me((d=a.timeAgo,typeof d===Oe?d.apply(a):d))+'</li>\n</ul>\n\n<div class="top-thread-post" data-role="top-thread-post">\n'+"\n</div>\n</li>\n"}function ee(a,b){var d,e,f="";return f+='\n<li class="bullet"></li>\n\n<li class="comments">\n<a href="'+Me((d=a.url,typeof d===Oe?d.apply(a):d))+'">\n',e=c["if"].call(a,1===a.numPosts,{hash:{},inverse:Ne.program(368,fe,b),fn:Ne.program(126,zb,b),data:b}),(e||0===e)&&(f+=e),f+="\n</a>\n</li>\n"}function fe(a,b){var d="";return d+="\n"+Me(c.t.call(a,gettext("%(numPosts)s comments"),{hash:{numPosts:a.numPosts},data:b}))+"\n"}function ge(a,b){var d,e,f="";return f+='\n<div class="tooltip upvoters ',e=c.unless.call(a,(d=a.users,null==d||d===!1?d:d.length),{hash:{},inverse:Ne.noop,fn:Ne.program(371,he,b),data:b}),(e||0===e)&&(f+=e),f+='">\n<ul class="scroll-measure" data-role="content">\n',e=c["if"].call(a,(d=a.users,null==d||d===!1?d:d.length),{hash:{},inverse:Ne.program(376,ke,b),fn:Ne.program(373,ie,b),data:b}),(e||0===e)&&(f+=e),f+="\n"+"\n",e=c["if"].call(a,a.guestCount,{hash:{},inverse:Ne.noop,fn:Ne.program(379,me,b),data:b}),(e||0===e)&&(f+=e),f+='\n</ul>\n</div>\n<div class="tooltip-point hidden"></div>\n'}function he(){return"guests-only"}function ie(a,b){var d,e="";return e+="\n",d=c.each.call(a,a.users,{hash:{},inverse:Ne.noop,fn:Ne.program(374,je,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function je(a,b){var e,f="";return f+="\n",e=Ne.invokePartial(d.upvoter,"upvoter",a,c,d,b),(e||0===e)&&(f+=e),f+="\n"}function ke(a,b){var d,e="";return e+="\n",d=c["if"].call(a,a.isLoading,{hash:{},inverse:Ne.noop,fn:Ne.program(377,le,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function le(){return'\n<li class="loading"></li>\n'}function me(a,b){var e,f="";return f+="\n",e=Ne.invokePartial(d.guestUpvoter,"guestUpvoter",a,c,d,b),(e||0===e)&&(f+=e),f+="\n"}function ne(a,b){var d,e="";return e+='\n<li class="user ',d=c["if"].call(a,a.highlight,{hash:{},inverse:Ne.noop,fn:Ne.program(285,kd,b),data:b}),(d||0===d)&&(e+=d),e+='" data-action="profile" data-user="'+Me((d=a.id,typeof d===Oe?d.apply(a):d))+'">\n'+'\n<a class="avatar" href="#" title="'+Me((d=a.name,typeof d===Oe?d.apply(a):d))+'">\n<img src="'+Me((d=a.avatar,d=null==d||d===!1?d:d.cache,typeof d===Oe?d.apply(a):d))+'" alt="'+Me(c.t.call(a,gettext("Avatar"),{hash:{},data:b}))+'" />\n</a>\n<a class="username" href="#" title="'+Me((d=a.name,typeof d===Oe?d.apply(a):d))+'">\n'+Me((d=a.name,typeof d===Oe?d.apply(a):d))+"\n</a>\n</li>\n"}function oe(a,b){var d,e="";return e+="\n",d=c["if"].call(a,a.guestCount,{hash:{},inverse:Ne.noop,fn:Ne.program(384,pe,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function pe(a,b){var e,f,g="";return g+='\n<li class="user ',e=c["if"].call(a,a.highlight,{hash:{},inverse:Ne.noop,fn:Ne.program(285,kd,b),data:b}),(e||0===e)&&(g+=e),g+='" data-role="guest">\n<span class="avatar" title="',e=Ne.invokePartial(d.guestUpvoterText,"guestUpvoterText",a,c,d,b),(e||0===e)&&(g+=e),g+='">\n<img src="'+Me((e=a.guestAvatarUrl,typeof e===Oe?e.apply(a):e))+'" alt="'+Me(c.t.call(a,gettext("Avatar"),{hash:{},data:b}))+'" />\n</span>\n<span class="username" title="',f=Ne.invokePartial(d.guestUpvoterText,"guestUpvoterText",a,c,d,b),(f||0===f)&&(g+=f),g+='">\n',f=Ne.invokePartial(d.guestUpvoterText,"guestUpvoterText",a,c,d,b),(f||0===f)&&(g+=f),g+="\n</span>\n</li>\n"}function qe(a,b){var d,e="";return e+="\n",d=c["if"].call(a,a.guestCount>1,{hash:{},inverse:Ne.program(389,se,b),fn:Ne.program(387,re,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function re(a,b){var d="";return d+=" "+Me(c.t.call(a,gettext("%(guestCount)s Guest Votes"),{hash:{guestCount:a.guestCount},data:b}))+" "}function se(a,b){var d="";return d+=" "+Me(c.t.call(a,gettext("1 Guest Vote"),{hash:{},data:b}))+" "}function te(a,b){var d,e,f="";return f+="\n",e=c["if"].call(a,(d=a.user,d=null==d||d===!1?d:d.thread,null==d||d===!1?d:d.canReply),{hash:{},inverse:Ne.noop,fn:Ne.program(392,ue,b),data:b}),(e||0===e)&&(f+=e),f+='\n<ul class="dropdown-menu">\n',e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isRegistered),{hash:{},inverse:Ne.program(402,Ae,b),fn:Ne.program(397,xe,b),data:b}),(e||0===e)&&(f+=e),f+="\n\n",e=c["if"].call(a,(d=a.user,d=null==d||d===!1?d:d.thread,null==d||d===!1?d:d.canModerate),{hash:{},inverse:Ne.noop,fn:Ne.program(405,Ce,b),data:b}),(e||0===e)&&(f+=e),f+="\n\n",e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isGlobalAdmin),{hash:{},inverse:Ne.noop,fn:Ne.program(416,Ie,b),data:b}),(e||0===e)&&(f+=e),f+="\n\n",e=c["if"].call(a,(d=a.user,(null==d||d===!1?d:d.isRegistered)&&(d=a.user,d=null==d||d===!1?d:d.thread,null==d||d===!1?d:d.canReply)),{hash:{},inverse:Ne.noop,fn:Ne.program(418,Je,b),data:b}),(e||0===e)&&(f+=e),f+="\n</ul>\n"}function ue(a,b){var d,e,f="";return f+="\n"+'\n<a href="#" class="dropdown-toggle" data-toggle="dropdown">\n<span class="cog">\n\n<i aria-hidden="true" class="icon-cog"></i>\n\n',e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isRegistered),{hash:{},inverse:Ne.program(395,we,b),fn:Ne.program(393,ve,b),data:b}),(e||0===e)&&(f+=e),f+='\n\n</span> <span class="caret"></span>\n</a>\n'}function ve(a,b){var d,e="";return e+='\n<span data-role="username" data-user="'+Me((d=a.user,d=null==d||d===!1?d:d.id,typeof d===Oe?d.apply(a):d))+'">\n'+Me(c.any.call(a,(d=a.user,null==d||d===!1?d:d.name),(d=a.user,null==d||d===!1?d:d.username),{hash:{},data:b}))+"\n</span>\n"}function we(a,b){var d="";return d+="\n<span>\n"+Me(c.t.call(a,gettext("Login"),{hash:{},data:b}))+"\n</span>\n"}function xe(a,b){var d,e,f="";return f+='\n<li>\n<a href="'+Me((d=a.user,d=null==d||d===!1?d:d.profileUrl,typeof d===Oe?d.apply(a):d))+'" data-role="user-profile-link" data-action="profile" data-user="'+Me((d=a.user,d=null==d||d===!1?d:d.id,typeof d===Oe?d.apply(a):d))+'">\n'+Me(c.t.call(a,gettext("Your Profile"),{hash:{},data:b}))+"\n</a>\n</li>\n",e=c["if"].call(a,a.newMedia,{hash:{},inverse:Ne.noop,fn:Ne.program(398,ye,b),data:b}),(e||0===e)&&(f+=e),f+="\n",e=c.unless.call(a,(d=a.user,null==d||d===!1?d:d.remote),{hash:{},inverse:Ne.noop,fn:Ne.program(400,ze,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function ye(a,b){var d="";return d+='\n<li>\n<a href="#" class="media-toggle-on" data-action="toggle-media">'+Me(c.t.call(a,gettext("Display Media"),{hash:{},data:b}))+'</a>\n<a href="#" class="media-toggle-off" data-action="toggle-media">'+Me(c.t.call(a,gettext("Hide Media"),{hash:{},data:b}))+"</a>\n</li>\n"}function ze(a,b){var d="";return d+="\n"+'\n<li>\n<a href="'+Me(c.g.call(a,"urls.editProfile",{hash:{},data:b}))+'">'+Me(c.t.call(a,gettext("Edit Settings"),{hash:{},data:b}))+"</a>\n</li>\n"}function Ae(a,b){var d,e,f="";return f+="\n\n",e=c["if"].call(a,a.sso&&(d=a.sso,null==d||d===!1?d:d.url),{hash:{},inverse:Ne.noop,fn:Ne.program(403,Be,b),data:b}),(e||0===e)&&(f+=e),f+='\n\n<li>\n<a href="#" data-action="auth:disqus">Disqus</a>\n</li>\n<li>\n<a href="#" data-action="auth:facebook">Facebook</a>\n</li>\n<li>\n<a href="#" data-action="auth:twitter">Twitter</a>\n</li>\n<li>\n<a href="#" data-action="auth:google">Google</a>\n</li>\n'}function Be(a){var b,c="";return c+='\n<li class="sso">\n<a href="#" data-action="auth:sso">'+Me((b=a.sso,b=null==b||b===!1?b:b.name,typeof b===Oe?b.apply(a):b))+"</a>\n</li>\n"}function Ce(a,b){var d,e,f="";return f+='\n<li data-role="toggle-thread">\n<a href="#" data-action="',e=c["if"].call(a,(d=a.thread,null==d||d===!1?d:d.isClosed),{hash:{},inverse:Ne.program(408,Ee,b),fn:Ne.program(406,De,b),data:b}),(e||0===e)&&(f+=e),f+='-thread">\n',e=c["if"].call(a,(d=a.thread,null==d||d===!1?d:d.isClosed),{hash:{},inverse:Ne.program(412,Ge,b),fn:Ne.program(410,Fe,b),data:b}),(e||0===e)&&(f+=e),f+="\n</a>\n</li>\n\n",e=c.unless.call(a,(d=a.user,null==d||d===!1?d:d.isGlobalAdmin),{hash:{},inverse:Ne.noop,fn:Ne.program(414,He,b),data:b}),(e||0===e)&&(f+=e),f+="\n\n"}function De(){return"open"}function Ee(){return"close"}function Fe(a,b){var d="";return d+="\n"+Me(c.t.call(a,gettext("Open Thread"),{hash:{},data:b}))+"\n"}function Ge(a,b){var d="";return d+="\n"+Me(c.t.call(a,gettext("Close Thread"),{hash:{},data:b}))+"\n"}function He(a,b){var d="";return d+='\n<li>\n<a href="http://docs.disqus.com/kb/2012/">'+Me(c.t.call(a,gettext("Help"),{hash:{},data:b}))+"</a>\n</li>\n"}function Ie(a,b){var d="";return d+='\n<li>\n<a href="#" data-action="debug">'+Me(c.t.call(a,gettext("Debug"),{hash:{},data:b}))+'</a>\n</li>\n\n<li>\n<a href="#" data-action="repair">'+Me(c.t.call(a,gettext("Repair"),{hash:{},data:b}))+"</a>\n</li>\n"}function Je(a,b){var d,e="";return e+='\n<li>\n<a href="'+Me((d=a.user,d=null==d||d===!1?d:d.logoutUrl,typeof d===Oe?d.apply(a):d))+'" data-action="logout">'+Me(c.t.call(a,gettext("Logout"),{hash:{},data:b}))+"</a>\n</li>\n"}this.compilerInfo=[2,">= 1.0.0-rc.3"],c=c||a.helpers,d=d||a.partials,e=e||{};var Ke,Le="",Me=this.escapeExpression,Ne=this,Oe="function";return Ke=c.partial.call(b,"followButton",{hash:{},inverse:Ne.noop,fn:Ne.program(1,f,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"alert",{hash:{},inverse:Ne.noop,fn:Ne.program(12,n,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"blacklist",{hash:{},inverse:Ne.noop,fn:Ne.program(17,q,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"blacklistErrorMessage",{hash:{},inverse:Ne.noop,fn:Ne.program(20,s,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"captcha",{hash:{},inverse:Ne.noop,fn:Ne.program(22,t,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n"+"\n\n",Ke=c.partial.call(b,"communityForum",{hash:{},inverse:Ne.noop,fn:Ne.program(24,u,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"changeYourWebsiteName",{hash:{},inverse:Ne.noop,fn:Ne.program(26,v,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"communityNotification",{hash:{},inverse:Ne.noop,fn:Ne.program(28,w,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"community",{hash:{},inverse:Ne.noop,fn:Ne.program(30,x,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"contextCard",{hash:{},inverse:Ne.noop,fn:Ne.program(32,y,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n"+"\n\n",Ke=c.partial.call(b,"dashboard",{hash:{},inverse:Ne.noop,fn:Ne.program(43,E,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"edit",{hash:{},inverse:Ne.noop,fn:Ne.program(45,F,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n",Ke=c.partial.call(b,"followButtonSmall",{hash:{},inverse:Ne.noop,fn:Ne.program(47,G,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"formUser",{hash:{},inverse:Ne.noop,fn:Ne.program(60,P,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"form",{hash:{},inverse:Ne.noop,fn:Ne.program(62,Q,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"loginButtons",{hash:{},inverse:Ne.noop,fn:Ne.program(84,bb,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"guestForm",{hash:{},inverse:Ne.noop,fn:Ne.program(94,hb,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"audienceSync",{hash:{},inverse:Ne.noop,fn:Ne.program(109,pb,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"mediaUpload",{hash:{},inverse:Ne.noop,fn:Ne.program(111,qb,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"legacyMediaUpload",{hash:{},inverse:Ne.noop,fn:Ne.program(116,tb,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"hovercard",{hash:{},inverse:Ne.noop,fn:Ne.program(118,ub,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"hovercardCounters",{hash:{},inverse:Ne.noop,fn:Ne.program(125,yb,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"hovercardActions",{hash:{},inverse:Ne.noop,fn:Ne.program(134,Db,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n"+"\n\n",Ke=c.partial.call(b,"layout",{hash:{},inverse:Ne.noop,fn:Ne.program(137,Fb,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"postSort",{hash:{},inverse:Ne.noop,fn:Ne.program(139,Gb,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"postCount",{hash:{},inverse:Ne.noop,fn:Ne.program(148,Lb,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"topNavigation",{hash:{},inverse:Ne.noop,fn:Ne.program(151,Nb,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"threadVotes",{hash:{},inverse:Ne.noop,fn:Ne.program(156,Qb,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"mainNavigation",{hash:{},inverse:Ne.noop,fn:Ne.program(158,Rb,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n\n",Ke=c.partial.call(b,"networkActivity",{hash:{},inverse:Ne.noop,fn:Ne.program(160,Sb,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"networkActivityThreadEntry",{hash:{},inverse:Ne.noop,fn:Ne.program(162,Tb,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"networkActivityPostEntry",{hash:{},inverse:Ne.noop,fn:Ne.program(164,Ub,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"networkForumLink",{hash:{},inverse:Ne.noop,fn:Ne.program(174,$b,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"profileLink",{hash:{},inverse:Ne.noop,fn:Ne.program(176,_b,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"notificationMenu",{hash:{},inverse:Ne.noop,fn:Ne.program(181,cc,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"notifications",{hash:{},inverse:Ne.noop,fn:Ne.program(187,gc,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"notification",{hash:{},inverse:Ne.noop,fn:Ne.program(189,hc,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"postLink",{hash:{},inverse:Ne.noop,fn:Ne.program(196,lc,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"onboard",{hash:{},inverse:Ne.noop,fn:Ne.program(201,oc,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"post",{hash:{},inverse:Ne.noop,fn:Ne.program(203,pc,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"postWrapperTop",{hash:{},inverse:Ne.noop,fn:Ne.program(226,Cc,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"postWrapperBottom",{hash:{},inverse:Ne.noop,fn:Ne.program(233,Gc,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"postMedia",{hash:{},inverse:Ne.noop,fn:Ne.program(235,Hc,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"postMediaPlaceholder",{hash:{},inverse:Ne.noop,fn:Ne.program(241,Lc,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"postMediaImage",{hash:{},inverse:Ne.noop,fn:Ne.program(243,Mc,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"postMediaInlineLink",{hash:{},inverse:Ne.noop,fn:Ne.program(246,Oc,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"postMediaTwitterContent",{hash:{},inverse:Ne.noop,fn:Ne.program(254,Tc,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"postMediaLegacyList",{hash:{},inverse:Ne.noop,fn:Ne.program(256,Uc,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"postVotes",{hash:{},inverse:Ne.noop,fn:Ne.program(264,Zc,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"postMenu",{hash:{},inverse:Ne.noop,fn:Ne.program(277,ed,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"postFooter",{hash:{},inverse:Ne.noop,fn:Ne.program(296,qd,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"postUserAvatar",{hash:{},inverse:Ne.noop,fn:Ne.program(302,ud,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"highlightedSuccessMessage",{hash:{},inverse:Ne.noop,fn:Ne.program(307,xd,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"postDeleted",{hash:{},inverse:Ne.noop,fn:Ne.program(309,yd,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"postMinimized",{hash:{},inverse:Ne.noop,fn:Ne.program(311,zd,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"realtimeToggleButton",{hash:{},inverse:Ne.noop,fn:Ne.program(319,Ed,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"realtimeCommentNotification",{hash:{},inverse:Ne.noop,fn:Ne.program(321,Fd,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"realtimeReplyNotification",{hash:{},inverse:Ne.noop,fn:Ne.program(326,Id,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"realtimeIndicator",{hash:{},inverse:Ne.noop,fn:Ne.program(331,Ld,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"realtimeIndicatorText",{hash:{},inverse:Ne.noop,fn:Ne.program(333,Md,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"suggestions",{hash:{},inverse:Ne.noop,fn:Ne.program(344,Td,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"suggestedUser",{hash:{},inverse:Ne.noop,fn:Ne.program(346,Ud,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n"+"\n\n",Ke=c.partial.call(b,"topThreadPost",{hash:{},inverse:Ne.noop,fn:Ne.program(348,Vd,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n"+"\n\n",Ke=c.partial.call(b,"topUser",{hash:{},inverse:Ne.noop,fn:Ne.program(357,$d,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n"+"\n\n",Ke=c.partial.call(b,"topThread",{hash:{},inverse:Ne.noop,fn:Ne.program(366,de,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"upvoters",{hash:{},inverse:Ne.noop,fn:Ne.program(370,ge,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"upvoter",{hash:{},inverse:Ne.noop,fn:Ne.program(381,ne,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"guestUpvoter",{hash:{},inverse:Ne.noop,fn:Ne.program(383,oe,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n\n",Ke=c.partial.call(b,"guestUpvoterText",{hash:{},inverse:Ne.noop,fn:Ne.program(386,qe,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n",Ke=c.partial.call(b,"userMenu",{hash:{},inverse:Ne.noop,fn:Ne.program(391,te,e),data:e}),(Ke||0===Ke)&&(Le+=Ke),Le+="\n"
});